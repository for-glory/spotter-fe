{"version":3,"file":"js/2421.cdb787cd.js","mappings":"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","sources":["webpack://spotter/./src/general/components/blocks/payment/PaymentMethod.vue?cce4","webpack://spotter/./src/general/components/blocks/payment/PaymentMethod.vue","webpack://spotter/./src/services/paypal/paypal.ts","webpack://spotter/./src/users/views/orders/ChoosePaymentMethod.vue?3b52","webpack://spotter/./src/users/views/orders/ChoosePaymentMethod.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, normalizeClass as _normalizeClass, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { IonButton, IonIcon, IonText } from \"@ionic/vue\";\n\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PaymentMethod',\n  props: {\n    id: {},\n    icon: {},\n    title: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonButton), {\n    id: `${_ctx.icon}`,\n    class: _normalizeClass([\"payment-method__btn\", { 'payment-method__btn--google-pay': _ctx.id === 'googlePay' }])\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_unref(IonIcon), {\n        class: \"payment-method__icon\",\n        src: `assets/icon/payment/${_ctx.icon}.svg`\n      }, null, 8, [\"src\"]),\n      _createVNode(_unref(IonText), { class: \"payment-method__title\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_ctx.title), 1)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"id\", \"class\"]))\n}\n}\n\n})","import script from \"./PaymentMethod.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PaymentMethod.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PaymentMethod.vue?vue&type=style&index=0&id=a422b7f8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a422b7f8\"]])\n\nexport default __exports__","import {\n  useQuery,\n  useMutation,\n  provideApolloClient,\n} from \"@vue/apollo-composable\";\nimport initializeApollo from \"@/apollo\";\nprovideApolloClient(initializeApollo());\n\nimport {\n  PaypalTokenQuery,\n  PaypalTokenDocument,\n  PayWithPaypalMutation,\n  PayWithPaypalDocument,\n} from \"@/generated/graphql\";\n\nexport class BackendPaypal {\n  createPaypalToken() {\n    return useQuery<PaypalTokenQuery>(PaypalTokenDocument);\n  }\n  makePaymentRequest() {\n    return useMutation<PayWithPaypalMutation>(PayWithPaypalDocument);\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 1,\n  class: \"cards\"\n}\nconst _hoisted_2 = {\n  key: 0,\n  class: \"cards__container\"\n}\nconst _hoisted_3 = {\n  key: 2,\n  class: \"separator\"\n}\nconst _hoisted_4 = { class: \"payment__methods\" }\n\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport CardForm from \"@/general/components/forms/CardForm.vue\";\nimport {\n  IonText,\n  IonButton,\n  IonTitle,\n  IonIcon,\n  IonNote,\n  isPlatform,\n  toastController,\n  IonSpinner,\n} from \"@ionic/vue\";\nimport PaymentMethod from \"@/general/components/blocks/payment/PaymentMethod.vue\";\nimport { computed, onMounted, onUnmounted, ref } from \"vue\";\nimport Card from \"@/general/components/blocks/payment/Card.vue\";\nimport BaseCarousel from \"@/general/components/base/BaseCarousel.vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { BackendStripe } from \"@/services/stripe/stripe\";\nimport { BackendPaypal } from \"@/services/paypal/paypal\";\nimport { Cards } from \"@/services/stripe/cards\";\nimport AddCardButton from \"@/general/components/blocks/payment/AddCardButton.vue\";\nimport {\n  Stripe as capacitorStripe,\n  ApplePayEventsEnum,\n  GooglePayEventsEnum,\n} from \"@capacitor-community/stripe\";\nimport { GetCartDocument, PaymentProvidersEnum } from \"@/generated/graphql\";\nimport { useQuery } from \"@vue/apollo-composable\";\nimport { navigationAfterPaymentCompleted } from \"@/helpers/purchaseRouterNavigation\";\nimport debounce from \"lodash/debounce\";\n\ndeclare const braintree: any;\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ChoosePaymentMethod',\n  setup(__props) {\n\nconst paymentMethods = ref([\n  { icon: \"apple\", title: \"Pay\", key: \"applePay\", isHidden: true },\n  {\n    icon: \"google\",\n    title: \"Pay with Google Pay\",\n    key: \"googlePay\",\n    isHidden: true,\n  },\n  { icon: \"paypal\", title: \"PayPal\", key: \"paypal\", isHidden: true },\n]);\n\nconst VUE_APP_STRIPE_PUBLIC_KEY = process.env.VUE_APP_STRIPE_PUBLIC_KEY;\nconst VUE_APP_APPLE_MERCHANT_ID = process.env.VUE_APP_APPLE_MERCHANT_ID;\nconst cardCreation = ref(false);\nconst preparedCards = ref<typeof Card[]>([]);\nconst errorMessage = ref(\"\");\nconst isGoogleAvailable = ref();\nconst isAppleAvailable = ref();\nconst router = useRouter();\nconst route = useRoute();\nconst cardsContainer = new Cards();\nconst isZeroPayment = ref(false);\nconst isACardInAppleWallet = ref(true);\nconst interval = ref(null);\n\nconst backendStripe = new BackendStripe(VUE_APP_STRIPE_PUBLIC_KEY || \"\");\nconst backendPaypal = new BackendPaypal();\nonUnmounted(() => {\n  clearInterval(interval.value);\n});\n\nconst { result, loading } = useQuery(\n  GetCartDocument,\n  {\n    id: route.query.cart_id,\n  },\n  {\n    fetchPolicy: \"no-cache\",\n  }\n);\n\nonMounted(() => {\n  refetch();\n  if (isFreeProducts.value) {\n    isZeroPayment.value = true;\n    return;\n  }\n\n  backendStripe.init();\n\n  capacitorStripe\n    .initialize({\n      publishableKey: VUE_APP_STRIPE_PUBLIC_KEY,\n    })\n    .then(() => {\n      checkIfGpayAvailable();\n      checkIfApplepayAvailable();\n    });\n  addPaypal();\n\n  interval.value = setInterval(() => {\n    refetch();\n  }, 5000);\n});\n\nconst { mutate: changeCard } = backendStripe.changePaymentMethod();\nconst { mutate: createPaymentIntent } = backendStripe.createPaymentIntent();\nconst { onResult: cardsResult, refetch } = backendStripe.getCards();\n\n// temporary solution for updating new cards\nconst getCards = debounce(() => {\n  refetch();\n}, 5000);\n\ngetCards();\n\nconst { onResult: getPaypalToken } = backendPaypal.createPaypalToken();\nconst { mutate: makePaymentRequest } = backendPaypal.makePaymentRequest();\n\nconst addPaypal = () => {\n  const script = document.createElement(\"script\");\n  script.src = \"https://js.braintreegateway.com/js/braintree-2.32.1.min.js\";\n  script.addEventListener(\"load\", initializeBraintree());\n  document.body.appendChild(script);\n};\n\nconst products = computed(() => result.value?.getCart?.items);\n\nconst initializeBraintree = () => {\n  if (products.value?.length < 1) {\n    errorMessage.value = \"Paypal not initialized: select the products first.\";\n\n    return;\n  }\n  getPaypalToken((response) => {\n    paymentMethods.value.forEach((paymentMethod) => {\n      if (!isZeroPayment.value && paymentMethod.key === \"paypal\")\n        paymentMethod.isHidden = false;\n    });\n\n    let checkout: any;\n    braintree.setup(response?.data?.paypalToken?.token, \"custom\", {\n      paypal: {\n        container: \"paypal\",\n      },\n      onReady: function (integration: any) {\n        checkout = integration;\n      },\n      onError: function () {\n        // Paypal Checkout page errors output here, before calling backend\n        initializeBraintree();\n      },\n      onCancelled: () => {\n        checkout.teardown(() => {\n          checkout = null;\n        });\n        initializeBraintree();\n      },\n      onPaymentMethodReceived: (obj: any) => {\n        checkout.teardown(() => {\n          checkout = null;\n          handleBraintreePayment(obj.nonce);\n        });\n      },\n    });\n  });\n};\n\nconst handleBraintreePayment = (nonce: any) => {\n  errorMessage.value = \"\";\n\n  makePaymentRequest({\n    cart_id: route.query.cart_id,\n    nonce: nonce,\n  })\n    .then((response: any) => {\n      const payload = JSON.parse(response?.data?.payWithPaypal?.result);\n      // only when 'payload.success === true' it means that payment gateway call was successfull\n      if (payload.success === true) {\n        navigationAfterPaymentCompleted(\n          route.params.orderId,\n          route.query.cart_id as string\n        );\n        return true;\n      }\n      //otherwise we need to let user know what was the reason of failure.\n      errorMessage.value = payload.message;\n\n      return;\n    })\n    .catch((response: any) => {\n      const payload = response?.data?.payWithPaypal?.result;\n      errorMessage.value = payload.message;\n\n      return false;\n    });\n  initializeBraintree();\n};\n\nconst onSubmit = () => {\n  errorMessage.value = \"\";\n  if (products.value?.length < 1) {\n    errorMessage.value = \"Select the products first.\";\n\n    return;\n  }\n\n  createPaymentIntent({\n    cart_id: route.query.cart_id,\n    purchasable_product_id: route.params.orderId,\n  })\n    .then((data) => {\n      let isZeroPayment = data?.data?.paymentIntent?.zeroPayment;\n      if (isZeroPayment) {\n        navigationAfterPaymentCompleted(\n          route.params.orderId,\n          route.query.cart_id as string\n        );\n      }\n\n      let intent = JSON.parse(data?.data?.paymentIntent?.session);\n      backendStripe.redirectToCheckout(intent.id);\n    })\n    .catch((err) => {\n      errorMessage.value = err;\n      throw new Error(err);\n    });\n\n  if (cardCreation.value) {\n    cardCreation.value = !cardCreation.value;\n  } else {\n    // TODO need find solution how to transit user to Payment Success page\n  }\n};\n\ncardsResult((response) => {\n  cardsContainer.init(response?.data?.cards?.data || []);\n  preparedCards.value = cardsContainer.cards;\n});\n\nconst changePaymentMethod = (cardId: number) => {\n  changeCard({ card_id: cardId })\n    .then(() => {\n      preparedCards.value.forEach((element: typeof Card) => {\n        element.is_default = element.id === cardId;\n      });\n    })\n    .catch((err) => {\n      errorMessage.value = err;\n      throw new Error(err);\n    });\n};\n\nconst onCardCreation = async () => {\n  const { onResult } = backendStripe.createSetupIntent(route.params.orderId);\n  onResult((setupIntentResult) => {\n    let intent = JSON.parse(setupIntentResult?.data?.setupIntent?.session);\n    backendStripe.redirectToCardSaving(intent.id, intent.url);\n  });\n};\n\nconst onBack = () => {\n  router.go(-1);\n};\n\ncapacitorStripe.addListener(ApplePayEventsEnum.Completed, () => {\n  navigationAfterPaymentCompleted(\n    route.params.orderId,\n    route.query.cart_id as string\n  );\n});\n\ncapacitorStripe.addListener(ApplePayEventsEnum.Failed, () => {\n  errorMessage.value = \"Something went wrong, please try again\";\n  // @TODO create correct behaviour of failed payment\n});\n\ncapacitorStripe.addListener(GooglePayEventsEnum.Completed, () => {\n  navigationAfterPaymentCompleted(\n    route.params.orderId,\n    route.query.cart_id as string\n  );\n  // @TODO create correct behaviour of completed payment\n});\n\ncapacitorStripe.addListener(GooglePayEventsEnum.Failed, () => {\n  errorMessage.value = \"Something went wrong, please try again\";\n  // @TODO create correct behaviour of failed payment\n});\n\nconst handleAdditionalPaymentMethod = async (paymentMethod: string) => {\n  switch (paymentMethod) {\n    case \"applePay\":\n      await applepay();\n      break;\n    case \"googlePay\":\n      await googlepay();\n      break;\n    default:\n      break;\n  }\n};\n\nconst applepay = async () => {\n  if (isACardInAppleWallet.value) {\n    const { onResult } = backendStripe.createAppleGooglePaymentIntent({\n      cart_id: route.query.cart_id,\n      provider: PaymentProvidersEnum.Apple,\n    });\n    onResult(async (result) => {\n      const paymentIntent = JSON.parse(\n        result.data.appleGooglePaymentIntent.paymentIntent\n      );\n\n      await capacitorStripe.createApplePay({\n        paymentIntentClientSecret: paymentIntent.client_secret,\n        paymentSummaryItems: [\n          {\n            label: products.value[0].productable?.title,\n            amount: products.value[0].productable?.price / 100,\n            // (be aware that apple shows a one thousand and ninty nine), while google shows 10.99\n          },\n        ],\n        merchantIdentifier: VUE_APP_APPLE_MERCHANT_ID,\n        countryCode: \"US\",\n        currency: \"USD\",\n      });\n\n      await capacitorStripe.presentApplePay();\n    });\n  } else {\n    const toast = await toastController.create({\n      message: \"Please, add a card to Apple Wallet to use with Apple Pay\",\n      duration: 3000,\n      icon: \"assets/icon/info.svg\",\n      cssClass: \"warning-toast\",\n    });\n    toast.present();\n  }\n};\n\nconst checkIfGpayAvailable = async () => {\n  isGoogleAvailable.value = capacitorStripe\n    .isGooglePayAvailable()\n    .then(() => {\n      paymentMethods.value.forEach((element: any) => {\n        if (element.key === \"googlePay\") element.isHidden = false;\n      });\n    })\n    .catch(() => {\n      // not available\n    });\n};\n\nconst checkIfApplepayAvailable = async () => {\n  isAppleAvailable.value = capacitorStripe\n    .isApplePayAvailable()\n    .then(() => {\n      paymentMethods.value.forEach((element: any) => {\n        if (element.key === \"applePay\") element.isHidden = false;\n      });\n      return true;\n    })\n    .catch(async (err) => {\n      // not available\n      if (\n        err &&\n        err.errorMessage === \"Can not use on this Device.\" &&\n        isPlatform(\"ios\")\n      ) {\n        isACardInAppleWallet.value = false;\n        paymentMethods.value.forEach((element: any) => {\n          if (element.key === \"applePay\") element.isHidden = false;\n        });\n        return true;\n      }\n      return undefined;\n    });\n};\n\nconst googlepay = async () => {\n  if (isGoogleAvailable.value === undefined) {\n    // stop further logic from work\n    return;\n  }\n\n  const { onResult } = backendStripe.createAppleGooglePaymentIntent({\n    cart_id: route.query.cart_id,\n    provider: PaymentProvidersEnum.Google,\n  });\n  onResult(async (result) => {\n    const paymentIntent = JSON.parse(\n      result.data.appleGooglePaymentIntent.paymentIntent\n    );\n    await capacitorStripe.createGooglePay({\n      paymentIntentClientSecret: paymentIntent.client_secret,\n      paymentSummaryItems: [\n        {\n          label: products.value[0].productable?.title,\n          amount: products.value[0].productable?.price / 100,\n          // (be aware that apple shows a one thousand and ninty nine), while google shows 10.99\n        },\n      ],\n      merchantIdentifier: VUE_APP_APPLE_MERCHANT_ID,\n      countryCode: \"US\",\n      currency: \"USD\",\n    });\n\n    await capacitorStripe.presentGooglePay();\n  });\n};\n\nconst isFreeProducts = computed(\n  () => result.value?.getCart?.items[0].productable?.booked_count === 0\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, { \"full-width-footer\": false }, {\n    header: _withCtx(() => [\n      _createVNode(PageHeader, {\n        \"back-btn\": \"\",\n        onBack: onBack,\n        title: \"Payment\"\n      })\n    ]),\n    content: _withCtx(() => [\n      (_unref(loading))\n        ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n            key: 0,\n            class: \"spinner\",\n            name: \"lines\"\n          }))\n        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            (cardCreation.value)\n              ? (_openBlock(), _createBlock(CardForm, { key: 0 }))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                  _createVNode(_unref(IonTitle), { class: \"cards__title\" }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"Payment Method\")\n                    ]),\n                    _: 1\n                  }),\n                  (preparedCards.value?.length)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createVNode(BaseCarousel, {\n                          \"show-start\": \"\",\n                          items: preparedCards.value,\n                          \"slides-offset-after\": 16,\n                          \"slides-offset-before\": 16\n                        }, {\n                          start: _withCtx(() => [\n                            _createVNode(_unref(IonButton), {\n                              onClick: onCardCreation,\n                              class: \"add-card\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(IonIcon), {\n                                  src: \"assets/icon/payment/plus.svg\",\n                                  class: \"add-icon\"\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          default: _withCtx((preparedCards) => [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(preparedCards, (card) => {\n                              return (_openBlock(), _createBlock(Card, {\n                                key: card.id,\n                                \"card-holder\": card.card_holder,\n                                \"card-number\": card.pm_last_four,\n                                \"exp-date\": card.exp_month + '/' + card.exp_year,\n                                \"is-default\": card.is_default,\n                                class: \"card-slide\",\n                                onClick: ($event: any) => (changePaymentMethod(card.id))\n                              }, null, 8, [\"card-holder\", \"card-number\", \"exp-date\", \"is-default\", \"onClick\"]))\n                            }), 128))\n                          ]),\n                          _: 1\n                        }, 8, [\"items\"])\n                      ]))\n                    : (_openBlock(), _createBlock(AddCardButton, {\n                        key: 1,\n                        class: \"add-card-btn\",\n                        onClick: onCardCreation\n                      }))\n                ])),\n            (!isZeroPayment.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                  _createVNode(_unref(IonText), { class: \"optional\" }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"or pay with\")\n                    ]),\n                    _: 1\n                  })\n                ]))\n              : (_openBlock(), _createBlock(_unref(IonTitle), {\n                  key: 3,\n                  class: \"separator text-align-center\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Products you've chosen are free. Click \\\"Confirm\\\" button to continue.\")\n                  ]),\n                  _: 1\n                })),\n            _createElementVNode(\"div\", _hoisted_4, [\n              (errorMessage.value)\n                ? (_openBlock(), _createBlock(_unref(IonNote), { key: 0 }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(errorMessage.value), 1)\n                    ]),\n                    _: 1\n                  }))\n                : _createCommentVNode(\"\", true),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paymentMethods.value, (paymentMethod) => {\n                return (_openBlock(), _createBlock(PaymentMethod, {\n                  icon: paymentMethod.icon,\n                  title: paymentMethod.title,\n                  key: paymentMethod.key,\n                  id: paymentMethod.key,\n                  hidden: paymentMethod.isHidden,\n                  onClick: ($event: any) => (handleAdditionalPaymentMethod(paymentMethod.key))\n                }, null, 8, [\"icon\", \"title\", \"id\", \"hidden\", \"onClick\"]))\n              }), 128))\n            ])\n          ], 64))\n    ]),\n    footer: _withCtx(() => [\n      _createVNode(_unref(IonButton), {\n        onClick: onSubmit,\n        class: \"submit-btn\",\n        disabled: preparedCards.value.length < 1\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(preparedCards.value.length < 1 ? \"Create card\" : \"Confirm\"), 1)\n        ]),\n        _: 1\n      }, 8, [\"disabled\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./ChoosePaymentMethod.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChoosePaymentMethod.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChoosePaymentMethod.vue?vue&type=style&index=0&id=9010d28a&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_defineComponent","__name","props","id","icon","title","setup","__props","_ctx","_cache","_openBlock","_createBlock","_unref","IonButton","class","_normalizeClass","default","_withCtx","_createVNode","IonIcon","src","IonText","_createTextVNode","_toDisplayString","_","__exports__","provideApolloClient","initializeApollo","BackendPaypal","createPaypalToken","useQuery","PaypalTokenDocument","makePaymentRequest","useMutation","PayWithPaypalDocument","_hoisted_1","key","_hoisted_2","_hoisted_3","_hoisted_4","paymentMethods","ref","isHidden","VUE_APP_STRIPE_PUBLIC_KEY","process","VUE_APP_APPLE_MERCHANT_ID","cardCreation","preparedCards","errorMessage","isGoogleAvailable","isAppleAvailable","router","useRouter","route","useRoute","cardsContainer","Cards","isZeroPayment","isACardInAppleWallet","interval","backendStripe","BackendStripe","backendPaypal","onUnmounted","clearInterval","value","result","loading","GetCartDocument","query","cart_id","fetchPolicy","onMounted","refetch","isFreeProducts","init","capacitorStripe","initialize","publishableKey","then","checkIfGpayAvailable","checkIfApplepayAvailable","addPaypal","setInterval","mutate","changeCard","changePaymentMethod","createPaymentIntent","onResult","cardsResult","getCards","debounce","getPaypalToken","script","document","createElement","addEventListener","initializeBraintree","body","appendChild","products","computed","getCart","items","length","response","checkout","forEach","paymentMethod","braintree","data","paypalToken","token","paypal","container","onReady","integration","onError","onCancelled","teardown","onPaymentMethodReceived","obj","handleBraintreePayment","nonce","payload","JSON","parse","payWithPaypal","success","navigationAfterPaymentCompleted","params","orderId","message","catch","onSubmit","purchasable_product_id","paymentIntent","zeroPayment","intent","session","redirectToCheckout","err","Error","cards","cardId","card_id","element","is_default","onCardCreation","async","createSetupIntent","setupIntentResult","setupIntent","redirectToCardSaving","url","onBack","go","addListener","ApplePayEventsEnum","Completed","Failed","GooglePayEventsEnum","handleAdditionalPaymentMethod","applepay","googlepay","createAppleGooglePaymentIntent","provider","PaymentProvidersEnum","Apple","appleGooglePaymentIntent","createApplePay","paymentIntentClientSecret","client_secret","paymentSummaryItems","label","productable","amount","price","merchantIdentifier","countryCode","currency","presentApplePay","toast","toastController","create","duration","cssClass","present","isGooglePayAvailable","isApplePayAvailable","isPlatform","undefined","Google","createGooglePay","presentGooglePay","booked_count","BaseLayout","header","PageHeader","content","IonSpinner","name","_createElementBlock","_Fragment","CardForm","IonTitle","BaseCarousel","start","onClick","_renderList","card","Card","card_holder","pm_last_four","exp_month","exp_year","$event","AddCardButton","_createElementVNode","IonNote","_createCommentVNode","PaymentMethod","hidden","footer","disabled"],"sourceRoot":""}