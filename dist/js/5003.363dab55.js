"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[5003],{24509:function(e,a,s){s.d(a,{s:function(){return l}});var i=s(2262);const l=()=>{const e=(0,i.iH)(!1),a=()=>{e.value=!1},s=()=>{e.value=!0};return{showConfirmationModal:e,hideModal:a,showModal:s}}},35294:function(e,a,s){s.d(a,{Z:function(){return c}});var i=s(66252),l=s(3577),r=s(2262),t=s(31810),n=(0,i.aZ)({__name:"AddressItem",props:{large:{type:Boolean,default:!1}},setup(e){return(e,a)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)([{"address--large":e.large},"address"])},[(0,i.Wm)((0,r.SU)(t.gu),{class:(0,l.C_)([{"address__icon--large":e.large},"address__icon"]),src:"assets/icon/location.svg"},null,8,["class"]),(0,i.WI)(e.$slots,"default")],2))}}),o=s(83744);const d=(0,o.Z)(n,[["__scopeId","data-v-1aaae496"]]);var c=d},98660:function(e,a,s){s.d(a,{Z:function(){return m}});var i=s(66252),l=s(2262),r=s(3577),t=s(31810),n=s(35294),o=s(27705);const d={class:"radiobutton__holder"};var c=(0,i.aZ)({__name:"ChoiceLocation",props:{id:{},facility:{}},setup(e){const a=e,s=(0,i.Fl)((()=>a.facility?.media?.length?a.facility.media[0]?.pathUrl:null)),c=(0,i.Fl)((()=>a.facility?.address?.street||""));return(e,a)=>((0,i.wg)(),(0,i.j4)((0,l.SU)(t.Ie),{lines:"none",class:"radiobutton"},{default:(0,i.w5)((()=>[(0,i.Wm)(o.Z,{square:"",src:s.value,class:"radiobutton__photo",symbols:e.facility?.name.charAt(0)},null,8,["src","symbols"]),(0,i._)("div",d,[(0,i.Wm)((0,l.SU)(t.Q$),{class:"radiobutton__title"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.facility?.name),1)])),_:1}),(0,i.Wm)(n.Z,{class:"radiobutton__address"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(c.value),1)])),_:1})]),(0,i.Wm)((0,l.SU)(t.B7),{value:e.id,slot:"end"},null,8,["value"])])),_:1}))}}),u=s(83744);const _=(0,u.Z)(c,[["__scopeId","data-v-4b5a8f98"]]);var m=_},27705:function(e,a,s){s.d(a,{Z:function(){return u}});var i=s(66252),l=s(2262),r=s(3577),t=s(31810);const n=["src"],o={key:2,class:"avatar__online-indicator"};var d=(0,i.aZ)({__name:"Avatar",props:{src:{},symbols:{},isOnline:{type:Boolean},square:{type:Boolean}},setup(e){return(e,a)=>((0,i.wg)(),(0,i.j4)((0,l.SU)(t.Bs),{slot:"start",class:"avatar"},{default:(0,i.w5)((()=>[e.src?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.src,class:(0,r.C_)(["avatar__image",{"avatar__image--online":e.isOnline,"avatar__image--square":e.square}])},null,10,n)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)(e.symbols),1)],64)),e.isOnline?((0,i.wg)(),(0,i.iD)("div",o)):(0,i.kq)("",!0)])),_:1}))}});const c=d;var u=c},73226:function(e,a,s){s.d(a,{Z:function(){return v}});var i=s(66252),l=s(2262),r=s(3577),t=s(31810);const n={class:"wrapper"},o={class:"ion-padding-horizontal"},d={class:"modal__title"},c={class:"modal__content"},u={class:"modal__footer"};var _=(0,i.aZ)({__name:"Confirmation",props:{title:{},description:{},buttonText:{},isVisible:{type:Boolean},cancelButtonText:{default:"Cancel"}},emits:["decline","discard"],setup(e,{emit:a}){const s=()=>{a("decline",!1)},_=()=>{a("discard",!0)};return(e,a)=>((0,i.wg)(),(0,i.j4)((0,l.SU)(t.ki),{ref:"modal","is-open":e.isVisible,"backdrop-dismiss":!1},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)((0,l.SU)(t.gu),{src:"assets/icon/close.svg",onClick:s,class:"close-btn"}),(0,i.Wm)((0,l.SU)(t.Xz),{class:"modal__img",src:"assets/dumbbells.png"}),(0,i._)("div",o,[(0,i._)("strong",d,(0,r.zw)(e.title),1),(0,i._)("div",c,[(0,i.Wm)((0,l.SU)(t.yW),{color:"secondary",class:"modal__text"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.description),1)])),_:1})]),(0,i._)("div",u,[(0,i.Wm)((0,l.SU)(t.YG),{onClick:s,class:"modal__button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.cancelButtonText),1)])),_:1}),(0,i.Wm)((0,l.SU)(t.YG),{onClick:_,class:"modal__button secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.buttonText),1)])),_:1})])])])])),_:1},8,["is-open"]))}}),m=s(83744);const g=(0,m.Z)(_,[["__scopeId","data-v-d596bdc6"]]);var v=g},75003:function(e,a,s){s.r(a),s.d(a,{default:function(){return H}});s(57658);var i=s(66252),l=s(2262),r=s(3577),t=s(31810),n=s(10121),o=s(19239),d=s(49316),c=s(87794);const u=["height","width"],_=["stroke-dasharray","stroke-width","cx","cy"],m=["stroke-dasharray","stroke-width","cx","cy"],g=3;var v=(0,i.aZ)({__name:"ProgressAvatar",props:{radius:{},progress:{},stroke:{},src:{},disabled:{type:Boolean},symbols:{}},setup(e){const a=e,s=(0,l.iH)(!1),n=a.radius-2*a.stroke,o=2*n*Math.PI,d=(0,i.Fl)((()=>25*Math.floor(a.progress/25))),c=(0,i.Fl)((()=>a.progress>=100)),v=(0,i.Fl)((()=>{const e=d.value/25;return e?[...Array(e)].map(((a,s)=>`${.25*o-g} ${s===e-1?o:g}`)):`${.25*o-g} ${o}`})),f=()=>{s.value=!s.value};return(e,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"progress-avatar",style:(0,r.j5)({width:2*e.radius+"px",height:2*e.radius+"px"})},[e.disabled?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[((0,i.wg)(),(0,i.iD)("svg",{height:2*e.radius,width:2*e.radius},[(0,i._)("circle",{fill:"transparent","stroke-dasharray":.25*o-g+" "+g,"stroke-width":e.stroke,r:n,cx:e.radius,cy:e.radius,class:"progress-avatar__circle progress-avatar__circle--unchecked"},null,8,_),(0,i._)("circle",{fill:"transparent","stroke-dasharray":v.value,"stroke-width":e.stroke,r:n,cx:e.radius,cy:e.radius,class:"progress-avatar__circle"},null,8,m)],8,u)),(0,i.Wm)((0,l.SU)(t.gu),{src:`assets/icon/${c.value?"":"not-"}trusted-user.svg`,class:"progress-avatar__mark"},null,8,["src"]),s.value?((0,i.wg)(),(0,i.j4)((0,l.SU)(t.yW),{key:0,class:"progress-avatar__percents",onClick:f},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.progress)+"% ",1)])),_:1})):(0,i.kq)("",!0)],64)),(0,i.Wm)((0,l.SU)(t.Bs),{class:(0,r.C_)([{"progress-avatar__avatar--dark":s.value&&!e.disabled},"progress-avatar__avatar"]),style:(0,r.j5)({"--size":2*e.radius-16+"px"}),onClick:a[0]||(a[0]=a=>!e.disabled&&f())},{default:(0,i.w5)((()=>[e.src?((0,i.wg)(),(0,i.j4)((0,l.SU)(t.Xz),{key:0,src:e.src,class:"progress-avatar__image"},null,8,["src"])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)(e.symbols||""),1)],64))])),_:1},8,["class","style"])],4))}}),f=s(83744);const p=(0,f.Z)(v,[["__scopeId","data-v-0ae79979"]]);var y=p,w=s(35294),U=s(87042),h=s(61081),k=s(18354),b=s(22201),S=s(24509),D=s(73226),P=s(12712);const O={USER:[{name:h.N.ProfileIdentityVerification,label:"Identify verification",icon:"identity"},{name:h.N.ProfileEdit,label:"Edit profile",icon:"edit"},{name:h.N.ProfilePaymentMethods,label:"Payment methods",icon:"payment",isTrusted:!0},{name:h.N.ProfileBookingHistory,label:"Booking history",icon:"history",isTrusted:!0}],TRAINER:[{name:h.N.ProfileScan,label:"Scan code",icon:"scan"},{name:h.N.ProfileEdit,label:"Edit profile",icon:"edit"},{name:h.N.ProfileWorkingSchedule,label:"Working schedule",icon:"working",isTrusted:!0},{name:h.N.ProfileMembership,label:"Membership",icon:"membership",isTrusted:!0},{name:h.N.ProfilePaymentMethods,label:"Payment methods",icon:"payment",isTrusted:!0},{name:h.N.ProfileBookingHistory,label:"Booking history",icon:"history",isTrusted:!0}],FACILITY:[{name:h.N.ProfileEdit,label:"Edit profile",icon:"edit"},{name:h.N.Facility,label:"View profile",icon:"profile",isTrusted:!0},{name:h.N.ProfileMembership,label:"Membership",icon:"membership",isTrusted:!0},{name:h.N.ProfilePaymentMethods,label:"Payment methods",icon:"payment",isTrusted:!0}]};var W=s(43173),z=s(98660);const N={class:"profile"},C={class:"profile__head"},I={class:"profile__address"},Z={class:"profile__options"},M={class:"buttons"},T={class:"modal-gym__content"};var A=(0,i.aZ)({__name:"Index",setup(e){const a=(0,b.tv)(),s=(0,b.yj)(),{showConfirmationModal:u,hideModal:_,showModal:m}=(0,S.s)(),{showConfirmationModal:g,hideModal:v,showModal:f}=(0,S.s)(),{id:p}=(0,W.Z)(),{role:A}=(0,P.Z)(),F={NODE_ENV:"production",VUE_APP_API_URL:"https://api.spotterfitness.com/graphql",VUE_APP_GOOGLE_AUTH_CLIENT_ID:"",BASE_URL:"/"}.VUE_APP_DEFAULT_POSITION_ADDRESS,{result:H,refetch:Y,onResult:x}=(0,d.aM)(c.Jx,{id:p}),E=(0,l.iH)(""),q=(0,i.Fl)((()=>A!==c.g8.User||Number(E.value)>=100));(0,i.bv)((()=>{Y()}));const B=(0,i.Fl)((()=>{switch(A){case c.g8.OrganizationOwner:return H.value?.user?.owned_facilities;case c.g8.Manager:case c.g8.FacilityOwner:return H.value?.user?.facilities;default:return[]}})),j=(0,l.iH)(null);(0,i.YP)((()=>j.value),(e=>{a.push({name:a?.currentRoute?.value?.name,query:{facilityId:e}})}));const L=(0,i.Fl)((()=>{switch(A){case c.g8.User:case c.g8.Trainer:return H.value?.user?.avatarUrl;case c.g8.Manager:case c.g8.FacilityOwner:case c.g8.OrganizationOwner:{const e=B.value?.find((e=>e?.id===j.value));return e?.media?e?.media[0]?.pathUrl:H.value?.user?.avatarUrl}default:return""}})),V=(0,i.Fl)((()=>B.value?.find((e=>e.id===j.value))?.name??H.value?.user?.email??"")),$=(0,i.Fl)((()=>B.value?.find((e=>e.id===j.value))?.address?.street??F)),G=(0,i.Fl)((()=>{switch(A){case c.g8.User:case c.g8.Trainer:return`${H.value?.user?.first_name?.charAt(0)||""}${H.value?.user?.last_name?.charAt(0)||""}`;case c.g8.Manager:case c.g8.FacilityOwner:case c.g8.OrganizationOwner:return V.value?.charAt(0)||"";default:return""}}));x((({data:e})=>{j.value=B.value?.length&&B.value[0]?B.value[0].id:null,E.value=e?.user?.settings?.find((e=>e.setting.code===c.Lm.VerifiedUser))?.value?100:0}));const R=()=>{m()},K=()=>{(0,k.Os)(),a.push({name:h.N.Login}),_()},X=A===c.g8.OrganizationOwner||A===c.g8.FacilityOwner||A===c.g8.Manager?h.N.Facility:A,J=O[X],Q=e=>{switch(e){case h.N.Facility:a.push({name:e,params:{id:s.query.facilityId}});break;case h.N.ProfileEdit:a.push({name:e,query:{facilityId:s?.query?.facilityId||""}});break;case h.N.ProfileMembership:a.push({name:e,query:{facilityId:s?.query?.facilityId||""}});break;default:a.push({name:e});break}},ee=(0,l.iH)(!1),ae=()=>{ee.value=!0},se=()=>{ee.value=!1,a.push({name:h.N.AddNewGym})},{mutate:ie,loading:le,onDone:re}=(0,d.Db)(c.Ak),te=()=>{ie(),v()};return re((()=>{(0,k.Os)(),a.push({name:h.N.Login})})),(e,a)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(n.Z,{"content-full-height":""},{header:(0,i.w5)((()=>[(0,i.Wm)(o.Z,{title:"Profile"})])),content:(0,i.w5)((()=>[(0,i._)("div",N,[(0,i.Wm)(y,{src:L.value||"",progress:E.value,radius:52,stroke:2,class:"profile__avatar",symbols:G.value,disabled:(0,l.SU)(A)===(0,l.SU)(c.g8).OrganizationOwner||(0,l.SU)(A)===(0,l.SU)(c.g8).FacilityOwner||(0,l.SU)(A)===(0,l.SU)(c.g8).Manager||(0,l.SU)(A)===(0,l.SU)(c.g8).Trainer},null,8,["src","progress","symbols","disabled"]),(0,i._)("div",C,[(0,i.Wm)((0,l.SU)(t.wd),{onClick:a[0]||(a[0]=e=>(0,l.SU)(A)===(0,l.SU)(c.g8).OrganizationOwner&&ae()),class:"profile__fullname"},{default:(0,i.w5)((()=>[(0,l.SU)(A)===(0,l.SU)(c.g8).User||(0,l.SU)(A)===(0,l.SU)(c.g8).Trainer?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,r.zw)((0,l.SU)(H)?.user?.first_name)+" "+(0,r.zw)((0,l.SU)(H)?.user?.last_name),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)(V.value),1)],64)),(0,l.SU)(A)===(0,l.SU)(c.g8).OrganizationOwner?((0,i.wg)(),(0,i.j4)((0,l.SU)(t.gu),{key:2,class:"profile__fullname-icon",icon:"assets/icon/arrow-down.svg"})):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",I,[(0,i.Wm)(w.Z,{large:""},{default:(0,i.w5)((()=>[(0,l.SU)(A)===(0,l.SU)(c.g8).User||(0,l.SU)(A)===(0,l.SU)(c.g8).Trainer?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,l.SU)(H)?.user?.address?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,r.zw)((0,l.SU)(H)?.user.address?.city?.state.name)+", "+(0,r.zw)((0,l.SU)(H)?.user.address?.city?.name)+", "+(0,r.zw)((0,l.SU)(H)?.user.address?.street),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)((0,l.SU)(F)),1)],64))],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)($.value),1)],64))])),_:1})])]),(0,i._)("div",Z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,l.SU)(J),(e=>((0,i.wg)(),(0,i.j4)(U.Z,{key:e.name,title:e.label,icon:e.icon,onClick:a=>Q(e.name),disabled:e.isTrusted&&!q.value},null,8,["title","icon","onClick","disabled"])))),128))]),(0,i._)("div",M,[(0,i.Wm)((0,l.SU)(t.YG),{expand:"block",class:"secondary",onClick:R,disabled:(0,l.SU)(le)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Log out ")])),_:1},8,["disabled"]),(0,i.Wm)((0,l.SU)(t.YG),{fill:"outline",color:"danger",expand:"block",disabled:(0,l.SU)(le),onClick:(0,l.SU)(f)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Delete profile ")])),_:1},8,["disabled","onClick"])])])])),_:1}),(0,i.Wm)(D.Z,{"is-visible":(0,l.SU)(u),title:"Do you want to log out?",description:"You will be logged out","button-text":"Log out",onDiscard:K,onDecline:(0,l.SU)(_)},null,8,["is-visible","onDecline"]),(0,i.Wm)(D.Z,{"is-visible":(0,l.SU)(g),title:"Are you sure you want to delete your profile?",description:"All your profile data and history will be deleted without the possibility for recovery.","button-text":"Delete",onDiscard:te,onDecline:(0,l.SU)(v)},null,8,["is-visible","onDecline"]),B.value?.length&&j.value?((0,i.wg)(),(0,i.j4)((0,l.SU)(t.ki),{key:0,ref:"modal","is-open":ee.value,class:"choose-facility-modal",onWillDismiss:a[3]||(a[3]=e=>ee.value=!1)},{default:(0,i.w5)((()=>[(0,i._)("div",T,[(0,i.Wm)((0,l.SU)(t.se),{modelValue:j.value,"onUpdate:modelValue":a[1]||(a[1]=e=>j.value=e),onIonChange:a[2]||(a[2]=e=>ee.value=!1)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(B.value,(e=>((0,i.wg)(),(0,i.j4)(z.Z,{id:e?.id,key:e?.id,facility:e},null,8,["id","facility"])))),128))])),_:1},8,["modelValue"]),(0,i.Wm)((0,l.SU)(t.YG),{onClick:se,class:"add-facility-button secondary",expand:"block"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add new gym ")])),_:1})])])),_:1},8,["is-open"])):(0,i.kq)("",!0)],64))}});const F=(0,f.Z)(A,[["__scopeId","data-v-d5fef4ba"]]);var H=F}}]);
//# sourceMappingURL=5003.363dab55.js.map