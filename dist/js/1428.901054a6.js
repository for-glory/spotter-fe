"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[1428],{95813:function(e,l,t){t.r(l),t.d(l,{default:function(){return W}});t(57658);var a=t(66252),i=t(2262),n=t(31810),s=t(19239),o=t(10121),c=t(22201),d=t(37891),u=t(19648),r=t(62308),v=(0,a.aZ)({__name:"ChooseFacilityModal",emits:["cancel","select"],setup(e,{expose:l,emit:t}){const s=(0,i.iH)(null),o=(0,i.iH)(null),c=(0,i.iH)(null),d=(0,i.iH)(null),v=()=>{t("cancel"),f()},m=e=>{d.value=e.filters,s?.value?.$el.present(),c.value=e.selected,o.value?.$el.search()},f=()=>{s?.value?.$el.dismiss()};l({present:m});const _=e=>{t("select",{facility:e}),f()};return(e,l)=>((0,a.wg)(),(0,a.j4)((0,i.SU)(n.ki),{ref_key:"modal",ref:s},{default:(0,a.w5)((()=>[(0,a.Wm)(r.Z,{"back-btn":"","hidden-cancel":"","visible-result":"",onBack:v,ref_key:"searchForm",ref:o,customNavigation:"",filters:d.value,onHandleItemClick:_,type:(0,i.SU)(u.qF).Facilities,placeholder:"Enter name or address of gym...","no-found-msg":"No results found. Check selected state/city."},null,8,["filters","type"])])),_:1},512))}}),m=t(83744);const f=(0,m.Z)(v,[["__scopeId","data-v-0d0076a2"]]);var _=f,S=t(87042),p=t(87794),g=t(61081),y=t(49316),k=t(43173),b=t(59205);const U={class:"content"},h={class:"main"},H={class:"form-row"},w={class:"buttons"};var C=(0,a.aZ)({__name:"SelectExistingFacility",setup(e){const l=(0,c.tv)(),t=()=>{l.go(-1)},r=(0,i.iH)(null),v=(0,i.iH)(null),m=(0,i.iH)(null),f=(0,i.iH)(null),C=()=>{r.value?.present({type:g.N.State,title:"Select state",selected:v.value?.id})},Z=()=>{r.value?.present({type:g.N.City,title:"Select city",selected:m.value?.id,state:v.value})},W=async e=>{e&&(v.value=e.state,m.value=e.city)},{mutate:I,onDone:N,loading:F}=(0,y.Db)(p.HX),D=()=>{const{registration_code:e}=JSON.parse(localStorage.getItem("organization")||"{}");e?I({input:{registration_code:e,facility_id:f.value?.id}}):l.push({name:g.N.EnterCode})};N((()=>{M()}));const{mutate:z,onDone:x,loading:E}=(0,y.Db)(p.PO),M=()=>{(0,b.I2)([{isFacilitySetUp:!0}]);const{id:e}=(0,k.Z)(),l=localStorage.getItem(u.LX.UserSettings);z({id:e,front_settings:l})};x((()=>{localStorage.removeItem("organization"),l.push({name:g.N.Profile})}));const O=(0,i.iH)(null),P=()=>{const{id:e}=JSON.parse(localStorage.getItem("organization")||"{}");e&&O.value?.present({filters:{organization_id:e,city_id:m.value?.id,state_id:v.value?.id},selected:f.value})},Y=e=>{f.value=e.facility};return(e,l)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o.Z,{"hide-navigation-menu":""},{header:(0,a.w5)((()=>[(0,a.Wm)(s.Z,{"back-btn":"",title:"Location",onBack:t})])),content:(0,a.w5)((()=>[(0,a._)("div",U,[(0,a._)("div",h,[(0,a._)("div",H,[(0,a.Wm)(S.Z,{title:"State",class:"form-row__control",onHandleClick:C,value:v.value?.name,disabled:(0,i.SU)(F)||(0,i.SU)(E)},null,8,["value","disabled"]),(0,a.Wm)(S.Z,{title:"City",class:"form-row__control",onHandleClick:Z,value:m.value?.name,disabled:!v.value||(0,i.SU)(F)||(0,i.SU)(E)},null,8,["value","disabled"]),(0,a.Wm)(S.Z,{title:"Gyms",class:"form-row__control",onHandleClick:P,value:f.value?.name||"",disabled:!m.value||(0,i.SU)(F)||(0,i.SU)(E)},null,8,["value","disabled"])])]),(0,a._)("div",w,[(0,a.Wm)((0,i.SU)(n.YG),{expand:"block",onClick:D,disabled:!f.value||(0,i.SU)(F)||(0,i.SU)(E)},{default:(0,a.w5)((()=>[(0,i.SU)(F)||(0,i.SU)(E)?((0,a.wg)(),(0,a.j4)((0,i.SU)(n.PQ),{key:1,name:"lines",class:"spinner"})):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)("Submit and finish")],64))])),_:1},8,["disabled"])])])])),_:1}),(0,a.Wm)(d.Z,{ref_key:"chooseAddressModal",ref:r,onSelect:W},null,512),(0,a.Wm)(_,{ref_key:"chooseFacilityModal",ref:O,onSelect:Y},null,512)],64))}});const Z=(0,m.Z)(C,[["__scopeId","data-v-4a287c4d"]]);var W=Z}}]);
//# sourceMappingURL=1428.901054a6.js.map