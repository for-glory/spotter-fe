"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[3530],{97439:function(e,a,t){var l,o,i;t.d(a,{GW:function(){return o},dk:function(){return i},oK:function(){return l}}),function(e){e["Prompt"]="PROMPT",e["Camera"]="CAMERA",e["Photos"]="PHOTOS"}(l||(l={})),function(e){e["Rear"]="REAR",e["Front"]="FRONT"}(o||(o={})),function(e){e["Uri"]="uri",e["Base64"]="base64",e["DataUrl"]="dataUrl"}(i||(i={}))},96826:function(e,a,t){t.d(a,{V1:function(){return i},dk:function(){return o.dk},oK:function(){return o.oK}});var l=t(29895),o=t(97439);const i=(0,l.fo)("Camera",{web:()=>t.e(6806).then(t.bind(t,66806)).then((e=>new e.CameraWeb))})},5964:function(e,a,t){t.d(a,{Z:function(){return d}});var l=t(66252),o=t(2262),i=t(3577),n=t(31810);const s={key:0,class:"multiselect"};var u=(0,l.aZ)({__name:"CheckboxGroup",props:{options:{},selected:{}},emits:["change"],setup(e,{emit:a}){const t=e,u=(0,o.iH)(),r=(0,o.iH)(t.options);(0,l.YP)((()=>t.options),(e=>{r.value=e})),(0,l.bv)((()=>{t.options.map((e=>{t.selected&&(e.isChecked=t.selected.indexOf(String(e.value))>-1)})),u.value=!0}));const c=(e,t)=>{t.isChecked=e;const l=r.value.filter((e=>e.isChecked)).map((e=>e.value));a("change",l,t)};return(e,a)=>u.value?((0,l.wg)(),(0,l.iD)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.value,(e=>((0,l.wg)(),(0,l.j4)((0,o.SU)(n.Ie),{lines:"none",class:(0,i.C_)(["checkbox",{"checkbox--checked":e.isChecked}]),key:e.id},{default:(0,l.w5)((()=>[e.iconUrl?((0,l.wg)(),(0,l.j4)((0,o.SU)(n.gu),{key:0,src:e.iconUrl,class:"checkbox-group__icon"},null,8,["src"])):(0,l.kq)("",!0),(0,l.Wm)((0,o.SU)(n.Q$),null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e?.label),1)])),_:2},1024),(0,l.Wm)((0,o.SU)(n.nz),{modelValue:e.isChecked,"onUpdate:modelValue":a=>c(a,e)},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])))),128))])):(0,l.kq)("",!0)}}),r=t(83744);const c=(0,r.Z)(u,[["__scopeId","data-v-5dd5bc92"]]);var d=c},78022:function(e,a,t){t.d(a,{Z:function(){return q}});var l=t(66252),o=t(3577),i=t(2262),n=t(31810),s=t(45241),u=t(96826),r=t(19312),c=t(34840),d=t(29895);const p={key:0,class:"photo-preview"},v=["src"],g={class:"photo-preview__icon"},h=["src"],m={key:2,class:"photo-area__loader"};var z;(function(e){e["Delete"]="DELETE",e["MakeAPhoto"]="MAKE_A_PHOTO",e["PhotoLibrary"]="PHOTO_LIBRARY"})(z||(z={}));var _=(0,l.aZ)({__name:"PhotoLoader",props:{photo:{},icon:{default:"person"},circleShape:{type:Boolean,default:!1},type:{default:"default"},loading:{type:Boolean},progress:{}},emits:["change"],setup(e,{emit:a}){const t=e,_=(0,i.iH)(t.photo),k=(0,i.iH)(""),y=(0,i.iH)(!1);(0,l.YP)((()=>t.photo),(e=>{_.value=e}));const q=async()=>{const e=[..._.value?[{text:"Delete photo",role:"destructive",data:{type:z.Delete}}]:[],{text:"Take photo",data:{type:z.MakeAPhoto}},{text:"Photo library",data:{type:z.PhotoLibrary}},{text:"Cancel",role:"cancel"}],a=[..._.value?[{text:"Delete photo",role:"destructive",data:{type:z.Delete}}]:[],{text:"Photo library",data:{type:z.PhotoLibrary}},{text:"Cancel",role:"cancel"}],t=await n.BO.create({mode:"ios",buttons:d.dV.isNativePlatform()?e:a});await t.present();const{data:l}=await t.onWillDismiss(),o=l?.type,i={[z.Delete]:()=>S(),[z.MakeAPhoto]:()=>w(u.oK.Camera),[z.PhotoLibrary]:()=>w(u.oK.Photos)};i[o]&&i[o]()},w=async e=>{if((0,s.a)("capacitor")){const a=await u.V1.requestPermissions();if(e===u.oK.Camera&&"denied"===a.camera||e===u.oK.Photos&&"denied"===a.photos){const a=await n.Cl.create({header:"Permissions denied",message:e===u.oK.Camera?"You have denied the app from using the camera":"You have denied the app access to your photos",buttons:["OK"]});return void await a.present()}}const a=await u.V1.getPhoto({width:750,height:750,quality:100,allowEditing:!1,resultType:u.dk.Base64,source:e});k.value=`data:image/jpeg;base64,${a.base64String}`,y.value=!0},S=e=>{_.value=e,a("change",_.value)},f=e=>{y.value=e},U=e=>{S(e),y.value=!1};return(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",{class:"photo-loader",onClick:q},["avatar"===e.type?((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("img",{class:(0,o.C_)(["photo-preview__img",{"photo-preview__img--empty":!_.value}]),src:_.value||`assets/icon/${e.icon}.svg`},null,10,v),(0,l._)("span",g,[(0,l.Wm)((0,i.SU)(n.gu),{src:"assets/icon/change-photo.svg"})])])):((0,l.wg)(),(0,l.j4)((0,i.SU)(n.Ie),{key:1,class:(0,o.C_)(["photo-area",{"photo-area--empty":!_.value}])},{default:(0,l.w5)((()=>[_.value?((0,l.wg)(),(0,l.iD)("img",{key:0,src:_.value,class:"photo-area__img"},null,8,h)):e.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)((0,i.SU)(n.gu),{key:1,src:"assets/icon/add-media.svg",class:"photo-area__add-icon"})),e.loading?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(c.Z,{percent:e.progress,class:"photo-area__progress"},null,8,["percent"])])):(0,l.kq)("",!0)])),_:1},8,["class"]))]),(0,l.Wm)(r.Z,{"is-open":y.value,onSetOpen:f,file:k.value,onGetUploadedImg:U,"circle-shape":e.circleShape},null,8,["is-open","file","circle-shape"])],64))}}),k=t(83744);const y=(0,k.Z)(_,[["__scopeId","data-v-5a5479a9"]]);var q=y},70306:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});t(57658);var l=t(66252),o=t(2262),i=t(31810),n=t(19239),s=t(3577),u=t(87794),r=t(78022),c=t(5964);const d={class:"quizz-item"},p={class:"quizz-item__main"},v={class:"quizz-item__head"},g={class:"quizz-item__title"},h=["innerHTML"],m={class:"quizz-item__body"},z={class:"quizz-item__footer"};var _=(0,l.aZ)({__name:"QuizzItem",props:{quizz:{},loading:{type:Boolean}},emits:["next"],setup(e,{emit:a}){const t=e,n=(0,o.iH)(t.quizz?.options?.length&&t.quizz.type===u.qS.Select?t.quizz.options[0]?.value:void 0),_=(0,o.iH)(),k=(0,l.Fl)((()=>t.quizz?.status===u.R4.Necessary)),y=(0,l.Fl)((()=>(t.quizz.type!==u.qS.File||!n.value?.length)&&(t.quizz.type===u.qS.MultiSelect?!_.value?.length:!("string"===typeof n.value&&n.value.length)))),q=(0,o.iH)(t.quizz.options?.map((e=>({id:e?.id,label:e?.title,value:e?.value,isChecked:!1}))));(0,l.YP)((()=>t.quizz),(()=>{n.value=void 0,k.value=t.quizz?.status===u.R4.Necessary}));const w=()=>{a("next",{value:t.quizz.type===u.qS.MultiSelect?_.value:n.value})},S=e=>{n.value=e},f=e=>{_.value=e};return(e,a)=>{const t=(0,l.up)("base-input");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",p,[(0,l._)("div",v,[(0,l._)("span",g,(0,s.zw)(e.quizz.title),1),(0,l._)("span",{class:"quizz-item__description",innerHTML:e.quizz.description},null,8,h)]),(0,l._)("div",m,[e.quizz.type===(0,o.SU)(u.qS).Input?((0,l.wg)(),(0,l.j4)(t,{key:0,rows:3,maxlength:150,value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e)},null,8,["value"])):(0,l.kq)("",!0),e.quizz.type===(0,o.SU)(u.qS).Select?((0,l.wg)(),(0,l.j4)((0,o.SU)(i.se),{key:1,modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.quizz.options,((e,a)=>((0,l.wg)(),(0,l.j4)((0,o.SU)(i.Ie),{lines:"none",class:(0,s.C_)(["radiobutton",{"radiobutton--checked":n.value===e?.value}]),key:e?.id||a},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(i.Q$),null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e?.title),1)])),_:2},1024),(0,l.Wm)((0,o.SU)(i.B7),{slot:"end",value:e?.value},null,8,["value"])])),_:2},1032,["class"])))),128))])),_:1},8,["modelValue"])):(0,l.kq)("",!0),e.quizz.type===(0,o.SU)(u.qS).MultiSelect?((0,l.wg)(),(0,l.j4)(c.Z,{key:2,onChange:f,options:q.value||[]},null,8,["options"])):(0,l.kq)("",!0),e.quizz.type===(0,o.SU)(u.qS).File?((0,l.wg)(),(0,l.j4)(r.Z,{key:3,"circle-shape":"",type:"avatar",photo:n.value,onChange:S},null,8,["photo"])):(0,l.kq)("",!0),e.quizz.type===(0,o.SU)(u.qS).ModelSelect?((0,l.wg)(),(0,l.iD)(l.HY,{key:4},[(0,l.Uk)(" Model select ")],64)):(0,l.kq)("",!0),e.quizz.type===(0,o.SU)(u.qS).MultiModelSelect?((0,l.wg)(),(0,l.iD)(l.HY,{key:5},[(0,l.Uk)(" Multimodelselect ")],64)):(0,l.kq)("",!0)])]),(0,l._)("div",z,[(0,l.Wm)((0,o.SU)(i.YG),{expand:"block",onClick:a[2]||(a[2]=e=>w()),disabled:y.value||e.loading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Next ")])),_:1},8,["disabled"])])])}}}),k=t(83744);const y=(0,k.Z)(_,[["__scopeId","data-v-576abb3b"]]);var q=y,w=t(25934),S=t(49316),f=t(12712),U=t(74790),b=t(61081),P=t(22201),C=t(16025),D=t(43173),x=t(59205),H=t(19648);const Z={key:0,class:"ion-text-center"};var M=(0,l.aZ)({__name:"Quizz",setup(e){const{role:a}=(0,f.Z)(),{mutate:t,loading:s,onDone:r}=(0,S.Db)(U.QQ,{context:{useMultipart:!0}}),c=(0,P.tv)(),d=(0,o.iH)(0),p={role:a},{result:v,loading:g,error:h}=(0,S.aM)(u.re,p),m=(0,l.Fl)((()=>v.value?.quizzes?.data??[])),z=(0,l.Fl)((()=>v.value?.quizzes?.paginatorInfo?.total||0)),_=(0,o.iH)(m.value[d.value]?.status===u.R4.Unnecessary),k=()=>{d.value?W(d.value-1):c.go(-1)},y=()=>{W(d.value+1)},M=e=>{if(m.value[d.value].type!==u.qS.File||"string"!==typeof e.value)t({quizz_id:m.value[d.value].id,value:Array.isArray(e.value)?e.value.toString():e.value});else{const a=(0,C.U)(e.value,(0,w.Z)());t({quizz_id:m.value[d.value].id,value:a})}},W=e=>{if(e<z.value)d.value=e;else{const{id:e}=(0,D.Z)();(0,x.I2)([{isQuizzDone:!0}]);const a=localStorage.getItem(H.LX.UserSettings);I({id:e,front_settings:a})}},{mutate:I,onDone:j}=(0,S.Db)(u.PO);return j((()=>{if(a===u.g8.Trainer){const{id:e}=(0,D.Z)();c.push({name:b.N.Trainer,params:{id:e}})}else c.push({name:b.N.RegistrationDone})})),r((()=>{W(d.value+1)})),(0,l.YP)((()=>d.value),(()=>{_.value=m.value[d.value]?.status===u.R4.Unnecessary})),(e,a)=>((0,l.wg)(),(0,l.j4)((0,o.SU)(i._i),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(i.Gu),{class:"ion-no-border"},{default:(0,l.w5)((()=>[(0,l.Wm)(n.Z,{onBack:k,onSkip:y,"skip-btn":_.value,"back-btn":""},null,8,["skip-btn"])])),_:1}),(0,l.Wm)((0,o.SU)(i.W2),{fullscreen:!0,class:"page-content"},{default:(0,l.w5)((()=>[(0,o.SU)(h)?((0,l.wg)(),(0,l.iD)("p",Z,"Something went wrong...")):(0,l.kq)("",!0),(0,o.SU)(g)?((0,l.wg)(),(0,l.j4)((0,o.SU)(i.PQ),{key:1,name:"lines",class:"spinner"})):(0,l.kq)("",!0),m.value.length?((0,l.wg)(),(0,l.j4)(q,{onNext:a[0]||(a[0]=e=>M(e)),loading:(0,o.SU)(s),quizz:m.value[d.value],key:d.value},null,8,["loading","quizz"])):(0,l.kq)("",!0)])),_:1})])),_:1}))}});const W=(0,k.Z)(M,[["__scopeId","data-v-2ab246d4"]]);var I=W}}]);
//# sourceMappingURL=3530.6dd8b250.js.map