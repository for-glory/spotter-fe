"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[6472],{40411:function(t,a,e){e.d(a,{b:function(){return i}});var n=e(29895);const i=(0,n.fo)("Geolocation",{web:()=>e.e(6642).then(e.bind(e,56642)).then((t=>new t.GeolocationWeb))})},48218:function(t,a,e){e.d(a,{E:function(){return l},T:function(){return i}});var n=e(61081);const i=[{name:n.N.ActivitiesNearby,label:"Nearby"},{name:n.N.MyTraining,label:"Events"}],l=[{name:n.N.Trainings,label:"Trainings"},{name:n.N.Events,label:"Events"}]},14602:function(t,a,e){e.d(a,{J:function(){return n}});const n=(t,a)=>{const e=3958.8,n=i(a.lat-t.lat),l=i(a.lng-t.lng),s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(i(t.lat))*Math.cos(i(a.lat))*Math.sin(l/2)*Math.sin(l/2),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return e*o},i=t=>t*(Math.PI/180)},82544:function(t,a,e){e.d(a,{Z:function(){return v}});var n=e(66252),i=e(2262),l=e(3577),s=e(31810);const o={class:"empty-block"},c={class:"empty-block__img"};var u=(0,n.aZ)({__name:"EmptyBlock",props:{title:{},text:{},buttonText:{},hideButton:{type:Boolean},icon:{default:"assets/icon/shore-run.svg"}},emits:["buttonClick"],setup(t,{emit:a}){return(t,e)=>((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",null,[(0,n._)("div",c,[(0,n.Wm)((0,i.SU)(s.gu),{src:t.icon},null,8,["src"])]),(0,n.Wm)((0,i.SU)(s.wd),{class:"empty-block__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.title),1)])),_:1}),(0,n.Wm)((0,i.SU)(s.yW),{color:"medium",class:"empty-block__text"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.text),1)])),_:1}),t.hideButton?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,i.SU)(s.YG),{key:0,class:"button",expand:"block",color:"primary",onClick:e[0]||(e[0]=t=>a("buttonClick"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.buttonText),1)])),_:1}))])]))}}),r=e(83744);const d=(0,r.Z)(u,[["__scopeId","data-v-776b8fd0"]]);var v=d},54354:function(t,a,e){e.d(a,{Z:function(){return r}});var n=e(66252),i=e(2262),l=e(3577),s=e(31810),o=(0,n.aZ)({__name:"PageTabs",props:{tabs:{},value:{}},emits:["change"],setup(t,{emit:a}){const e=t=>{t.detail.value&&a("change",t.detail.value)};return(t,a)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,i.SU)(s.cJ),{id:"page-tabs",mode:"ios",class:"tabs",onIonChange:a[0]||(a[0]=t=>e(t)),value:t.value||t.tabs&&t.tabs[0].name},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.tabs,(t=>((0,n.wg)(),(0,n.j4)((0,i.SU)(s.GO),{key:t.name,value:t.name,class:"tabs__item",disabled:t.disabled},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.label),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"])]))}}),c=e(83744);const u=(0,c.Z)(o,[["__scopeId","data-v-6ea469ae"]]);var r=u},97010:function(t,a,e){e.d(a,{Z:function(){return h}});var n=e(66252),i=e(2262),l=e(3577),s=e(31810),o=e(64193),c=e(35294);const u={class:"activity-item__photo"},r={class:"activity-item__inner"},d={class:"activity-item__head"};var v=(0,n.aZ)({__name:"Activity",props:{activity:{}},setup(t){return(t,a)=>((0,n.wg)(),(0,n.j4)((0,i.SU)(s.Ie),{class:"activity-item"},{default:(0,n.w5)((()=>[(0,n._)("div",u,[t.activity.photo?.length?((0,n.wg)(),(0,n.j4)((0,i.SU)(s.Xz),{key:0,src:t.activity.photo},null,8,["src"])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)((0,l.zw)(t.activity.name?.charAt(0)),1)],64))]),(0,n._)("div",r,[(0,n._)("div",d,[(0,n.Wm)((0,i.SU)(s.Q$),{class:"activity-item__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.activity.name),1)])),_:1}),(0,n.Wm)(o.Z,{class:"activity-item__rating"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.activity.rating),1)])),_:1})]),t.activity.distance?((0,n.wg)(),(0,n.j4)(c.Z,{key:0,class:"activity-item__address"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,i.SU)(s.yW),{class:"activity-item__distance",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.activity.distance),1)])),_:1}),(0,n.Uk)(" far from you ")])),_:1})):(0,n.kq)("",!0)])])),_:1}))}}),m=e(83744);const g=(0,m.Z)(v,[["__scopeId","data-v-d2c419ce"]]);var h=g},95436:function(t,a,e){e.r(a),e.d(a,{default:function(){return k}});e(57658);var n=e(66252),i=e(2262),l=e(31810),s=e(10121),o=e(54354),c=e(62308),u=e(97010),r=e(61081),d=e(49316),v=e(87794),m=e(22201),g=e(48218),h=e(40411),y=e(82544),f=e(14602);const _={class:"holder-content ion-padding-horizontal"};var p=(0,n.aZ)({__name:"GymsNearby",setup(t){const a=(0,m.tv)(),e=g.T,p=(0,i.iH)(!1),w=(0,i.iH)(1),b=(0,i.iH)(0),k=(0,i.iH)(""),U=(0,i.iH)({lat:0,lng:0}),S=t=>{a.push({name:t})},{onResult:Z}=(0,d.aM)(v.en,{},{fetchPolicy:"no-cache"});Z((async t=>{t.data.me.settings.find((t=>t.setting.code===v.Lm.UsePhoneLocation))?.value?(U.value=await W(),M()):(U.value={lat:t.data.me.address.lat,lng:t.data.me.address.lng},M())}));const W=async()=>new Promise(((t,a)=>{h.b.getCurrentPosition().then((a=>{t({lat:a.coords.latitude,lng:a.coords.longitude})})).catch((async()=>{const t=await l.Mn.create({message:"Failed to get your location. Check the permissions for the application.",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});t.present(),await h.b.requestPermissions(),a()}))})),{load:I,refetch:x,onResult:C}=(0,d.td)(v.kF,{first:6,page:w.value,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}},{fetchPolicy:"no-cache"}),M=()=>{I(v.kF,{first:6,page:w.value,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}},{fetchPolicy:"no-cache"})},N=t=>{H.value.length<b.value&&(w.value++,x({first:6,page:w.value,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}})?.then((()=>{t.target.complete()})))};C((t=>{b.value=t.data.facilities?.paginatorInfo.total??0;const a=t.data?.facilities?.data.map((t=>({name:t.name,id:t.id,distance:`~${(0,f.J)({lat:t.address?.lat||0,lng:t.address?.lng||0},{lat:U.value.lat||0,lng:U.value.lng||0}).toFixed(1)}mi`,rating:String(t.score?.toFixed(1)),photo:t.media?.length?t.media[0]?.pathUrl:void 0})))??[];p.value&&H.value?.length&&H.value.findIndex((t=>a.length&&t.id===a[0].id))>-1||(p.value=!0,H.value=H.value&&null!==t.data.facilities?.paginatorInfo.firstItem&&1!==t.data.facilities?.paginatorInfo.firstItem?[...H.value,...a]:a)}));const H=(0,i.iH)(null),j=t=>{w.value=1,b.value=0,p.value=!1,k.value=t,M()},z=t=>{a.push({name:r.N.NearbyGym,params:{id:t}})},P=()=>{a.go(-1)};return(t,d)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s.Z,null,{header:(0,n.w5)((()=>[(0,n.Wm)((0,i.SU)(l.Sm),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,i.SU)(l.oU),{class:"back-btn",icon:"assets/icon/arrow-back.svg",onClick:P})])),_:1}),(0,n.Wm)(c.Z,{"hide-results":"",onSearch:j})])),content:(0,n.w5)((()=>[(0,n._)("div",_,[p.value?H.value&&H.value.length?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Wm)((0,i.SU)(l.wd),{slot:"start",class:"title"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Gyms Nearby")])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(H.value,(t=>((0,n.wg)(),(0,n.j4)(u.Z,{key:t.id,activity:t,onClick:a=>z(t.id)},null,8,["activity","onClick"])))),128)),H.value.length<b.value?((0,n.wg)(),(0,n.j4)((0,i.SU)(l.ju),{key:0,threshold:"100px",class:"infinite-scroll",onIonInfinite:N},{default:(0,n.w5)((()=>[(0,n.Wm)((0,i.SU)(l.MB),{"loading-spinner":"lines","loading-text":"Loading more..."})])),_:1})):(0,n.kq)("",!0)],64)):((0,n.wg)(),(0,n.j4)(y.Z,{key:2,title:"Empty here","button-text":"Explore more",text:"No gyms were found near you",onButtonClick:d[0]||(d[0]=t=>(0,i.SU)(a).push({name:(0,i.SU)(r.N).Facilities}))})):((0,n.wg)(),(0,n.j4)((0,i.SU)(l.PQ),{key:0,name:"lines",class:"spinner"}))])])),_:1}),(0,n.Wm)(o.Z,{tabs:(0,i.SU)(e),class:"page-tabs",value:(0,i.SU)(r.N).ActivitiesNearby,onChange:S},null,8,["tabs","value"])],64))}}),w=e(83744);const b=(0,w.Z)(p,[["__scopeId","data-v-920e9264"]]);var k=b}}]);
//# sourceMappingURL=6472.f903f50b.js.map