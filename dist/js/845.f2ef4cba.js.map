{"version":3,"file":"js/845.f2ef4cba.js","mappings":"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","sources":["webpack://spotter/./src/general/components/blocks/footers/ButtonsFooter.vue?d623","webpack://spotter/./src/general/components/blocks/footers/ButtonsFooter.vue","webpack://spotter/./src/general/views/profile/Password.vue?2324","webpack://spotter/./src/general/views/profile/Password.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-70d0b6b0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"buttons__container\" }\n\nimport { IonButton } from \"@ionic/vue\";\nimport { withDefaults } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ButtonsFooter',\n  props: {\n    mainButtonText: {},\n    secondaryButtonText: { default: \"\" },\n    disabled: { type: Boolean, default: false }\n  },\n  emits: [\"handle-click\", \"handle-secondary-click\"],\n  setup(__props: any) {\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(IonButton), {\n      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('handle-click'))),\n      class: \"submit-btn\",\n      disabled: _ctx.disabled\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(_toDisplayString(_ctx.mainButtonText), 1)\n      ]),\n      _: 1\n    }, 8, [\"disabled\"]),\n    (_ctx.secondaryButtonText)\n      ? (_openBlock(), _createBlock(_unref(IonButton), {\n          key: 0,\n          class: \"secondary secondary-btn\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('handle-secondary-click')))\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_ctx.secondaryButtonText), 1)\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","import script from \"./ButtonsFooter.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ButtonsFooter.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ButtonsFooter.vue?vue&type=style&index=0&id=70d0b6b0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-70d0b6b0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, isRef as _isRef, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-71a67759\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"password__form\" }\n\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport BaseInput from \"@/general/components/base/BaseInput.vue\";\nimport ButtonsFooter from \"@/general/components/blocks/footers/ButtonsFooter.vue\";\nimport { useRouter } from \"vue-router\";\nimport { useMutation, useQuery } from \"@vue/apollo-composable\";\nimport { MeDocument, UpdatePasswordDocument } from \"@/generated/graphql\";\nimport { useField } from \"vee-validate\";\nimport { passwordSchema } from \"@/validations/authValidations\";\nimport { computed } from \"vue\";\nimport { humanizeString } from \"@/utils/textUtils\";\nimport { toastController } from \"@ionic/vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Password',\n  setup(__props) {\n\nconst router = useRouter();\n\nconst { mutate, onDone, loading, error } = useMutation(UpdatePasswordDocument);\n\nconst { value: passwordInput, errorMessage: passwordInputError } =\n  useField<string>(\"password\", passwordSchema);\n\nconst { value: newPasswordInput, errorMessage: newPasswordError } =\n  useField<string>(\"new password\", passwordSchema);\n\nconst {\n  value: passwordConfirmationInput,\n  errorMessage: passwordConfirmationError,\n} = useField<string>(\n  \"password confirmation\",\n  (inputValue) => inputValue === newPasswordInput.value\n);\n\nconst errorMessage = computed(() => {\n  return humanizeString(\n    error.value?.message || \"Something went wrong. Please try again.\"\n  );\n});\n\nconst showToast = async (message: string, style = \"success\") => {\n  const toast = await toastController.create({\n    message: message,\n    duration: 2000,\n    icon: \"assets/icon/success.svg\",\n    cssClass: `${style}-toast`,\n  });\n  return toast.present();\n};\n\nonDone(({ data }) => {\n  showToast(data.updatePassword.message);\n  router.go(-1);\n});\n\nconst isValidForm = computed(() =>\n  hasPassword.value\n    ? !passwordInputError.value &&\n      !passwordConfirmationError.value &&\n      !newPasswordError.value &&\n      passwordInput.value &&\n      passwordConfirmationInput.value &&\n      newPasswordInput.value\n    : !passwordConfirmationError.value &&\n      !newPasswordError.value &&\n      passwordConfirmationInput.value &&\n      newPasswordInput.value\n);\n\nconst onSubmit = () => {\n  if (isValidForm.value) {\n    mutate({\n      input: {\n        old_password: hasPassword.value ? passwordInput.value : \"\",\n        password: newPasswordInput.value,\n        password_confirmation: passwordConfirmationInput.value,\n      },\n    }).catch(() => {\n      showToast(errorMessage.value, \"danger\");\n    });\n  }\n};\n\nconst onBack = () => {\n  router.go(-1);\n};\n\nconst { result: userResult } = useQuery(MeDocument);\n\nconst hasPassword = computed<boolean>(() => userResult.value?.me.has_password);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, null, {\n    header: _withCtx(() => [\n      _createVNode(PageHeader, {\n        \"back-btn\": \"\",\n        title: `${hasPassword.value ? 'Change' : 'Set'} password`,\n        onBack: onBack\n      }, null, 8, [\"title\"])\n    ]),\n    content: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        (hasPassword.value)\n          ? (_openBlock(), _createBlock(BaseInput, {\n              key: 0,\n              type: \"password\",\n              placeholder: \"Enter your current password\",\n              class: \"password__input\",\n              value: _unref(passwordInput),\n              \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(passwordInput) ? (passwordInput).value = $event : null)),\n              \"error-message\": _unref(passwordInputError),\n              disabled: _unref(loading)\n            }, null, 8, [\"value\", \"error-message\", \"disabled\"]))\n          : _createCommentVNode(\"\", true),\n        _createVNode(BaseInput, {\n          value: _unref(newPasswordInput),\n          \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(newPasswordInput) ? (newPasswordInput).value = $event : null)),\n          \"error-message\": _unref(newPasswordError),\n          disabled: _unref(loading),\n          type: \"password\",\n          placeholder: \"Enter your new password\",\n          class: \"password__input\"\n        }, null, 8, [\"value\", \"error-message\", \"disabled\"]),\n        _createVNode(BaseInput, {\n          value: _unref(passwordConfirmationInput),\n          \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(passwordConfirmationInput) ? (passwordConfirmationInput).value = $event : null)),\n          \"error-message\": _unref(passwordConfirmationError),\n          type: \"password\",\n          placeholder: \"Enter your new password again\",\n          class: \"password__input\"\n        }, null, 8, [\"value\", \"error-message\"])\n      ])\n    ]),\n    footer: _withCtx(() => [\n      _createVNode(ButtonsFooter, {\n        \"main-button-text\": \"Change password\",\n        onClick: onSubmit,\n        disabled: _unref(loading) || !isValidForm.value\n      }, null, 8, [\"disabled\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Password.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Password.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Password.vue?vue&type=style&index=0&id=71a67759&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-71a67759\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_defineComponent","__name","props","mainButtonText","secondaryButtonText","default","disabled","type","Boolean","emits","setup","__props","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","IonButton","onClick","$event","$emit","_withCtx","_createTextVNode","_toDisplayString","_","_createBlock","key","_createCommentVNode","__exports__","router","useRouter","mutate","onDone","loading","error","useMutation","UpdatePasswordDocument","value","passwordInput","errorMessage","passwordInputError","useField","passwordSchema","newPasswordInput","newPasswordError","passwordConfirmationInput","passwordConfirmationError","inputValue","computed","humanizeString","message","showToast","async","style","toast","toastController","create","duration","icon","cssClass","present","data","updatePassword","go","isValidForm","hasPassword","onSubmit","input","old_password","password","password_confirmation","catch","onBack","result","userResult","useQuery","MeDocument","me","has_password","BaseLayout","header","PageHeader","title","content","_createElementVNode","BaseInput","placeholder","_isRef","footer","ButtonsFooter"],"sourceRoot":""}