{"version":3,"file":"js/2837.7d1470bb.js","mappings":"6QAGA,MACMA,EAAa,CAAEC,MAAO,WAiB5B,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,QACRC,MAAMC,GAER,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MACRC,EAASA,KACbC,EAAqBC,OAAQ,CAAI,EAE7BC,GAAUC,EAAAA,EAAAA,IAAYN,EAAMO,OAAOC,KAEjCC,OAAQC,EAAaC,QAASC,IAAiBC,EAAAA,EAAAA,IACrDC,EAAAA,GACA,CACEN,GAAIH,EAAQD,OAEd,CACEW,YAAa,aAIXC,GAAYC,EAAAA,EAAAA,KAAS,KACzB,GAAKP,EAAYN,MACjB,MAAO,CACLc,MAAOR,EAAYN,OAAOe,MAAMD,MAChCE,YAAaV,EAAYN,OAAOe,MAAMC,YACtCC,OAAQX,EAAYN,OAAOe,MAAMG,MAAMC,KAAKD,IACnC,CACLd,GAAIc,EAAMd,GACVgB,IAAKF,EAAMG,YAGfC,WAAYhB,EAAYN,OAAOe,MAAMO,WACrCC,UAAWjB,EAAYN,OAAOe,MAAMQ,UACrC,IAGGxB,GAAuBG,EAAAA,EAAAA,KAAI,GAE3BsB,EAAsBC,IAC1B1B,EAAqBC,OAAQ,EACzByB,IACFC,EAAU1B,OAAO2B,aACjBjC,EAAOkC,IAAI,G,GAKbC,OAAQC,EACRvB,QAASwB,EACTC,OAAQC,IACNC,EAAAA,EAAAA,IAAYC,EAAAA,IAEVC,EAAeC,IACnBP,EAAkB,CAAE1B,GAAIH,EAAQD,MAAOqC,SAAQ,EAG3CX,GAAYxB,EAAAA,EAAAA,IAA6B,MAE/C+B,GAAa,KACXK,IACAZ,EAAU1B,OAAO2B,aACjBjC,EAAOkC,IAAI,EAAE,IAGf,MAAMU,EAAmBC,UACvB,MAAMC,QAAcC,EAAAA,GAAgBC,OAAO,CACzCC,QAAS,gCACTC,SAAU,IACVC,KAAM,0BACNC,SAAU,kBAEZ,OAAON,EAAMO,SAAS,EAGxB,MAAO,CAACC,EAAUC,MACRC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBC,EAAAA,GAAW,KAAM,EACzDC,EAAAA,EAAAA,IAAaC,EAAAA,EAAY,CAAE,uBAAwB,IAAM,CACvDC,QAAQC,EAAAA,EAAAA,KAAS,IAAM,EACrBH,EAAAA,EAAAA,IAAaI,EAAAA,EAAY,CACvB,WAAY,GACZ3D,OAAQA,EACRgB,MAAO,kBAGX4C,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBG,EAAAA,EAAAA,GAAoB,MAAOvE,EAAY,EACrCiE,EAAAA,EAAAA,IAAaO,EAAAA,EAAW,CACtBC,KAAM,GACNC,QAAS,YACT5D,IAAKwB,EACLqC,KAAMnD,EAAUZ,MAChBgE,SAAU5B,EACV,qBAAsB,SACtB7B,SAAS0D,EAAAA,EAAAA,IAAOlC,KAAoBkC,EAAAA,EAAAA,IAAOzD,IAC1C,KAAM,EAAG,CAAC,OAAQ,iBAGzB0D,EAAG,KAELb,EAAAA,EAAAA,IAAac,EAAAA,EAAgB,CAC3B,UAAWpE,EAAqBC,MAChCoE,QAAS5C,GACR,KAAM,EAAG,CAAC,aACZ,IAEL,I,WCzHA,MAAM6C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://spotter/./src/general/views/events/edit/Index.vue?742e","webpack://spotter/./src/general/views/events/edit/Index.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2dcb53e9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"content\" }\n\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport EventForm from \"@/general/components/forms/EventForm.vue\";\nimport DiscardChanges from \"@/general/components/modals/confirmations/DiscardChanges.vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { ref, computed } from \"vue\";\nimport { toastController } from \"@ionic/vue\";\nimport {\n  UpdateEventDocument,\n  UpdateEventInput,\n  EventDocument,\n} from \"@/generated/graphql\";\nimport { useMutation, useQuery } from \"@vue/apollo-composable\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Index',\n  setup(__props) {\n\nconst router = useRouter();\nconst route = useRoute();\nconst onBack = () => {\n  isConfirmedModalOpen.value = true;\n};\nconst eventId = ref<string>(route.params.id as string);\n\nconst { result: eventResult, loading: eventLoading } = useQuery(\n  EventDocument,\n  {\n    id: eventId.value,\n  },\n  {\n    fetchPolicy: \"no-cache\",\n  }\n);\n\nconst eventData = computed(() => {\n  if (!eventResult.value) return;\n  return {\n    title: eventResult.value?.event.title,\n    description: eventResult.value?.event.description,\n    photos: eventResult.value?.event.media.map((media: any) => {\n      return {\n        id: media.id,\n        url: media.pathUrl,\n      };\n    }),\n    equipments: eventResult.value?.event.equipments,\n    amenities: eventResult.value?.event.amenities,\n  };\n});\n\nconst isConfirmedModalOpen = ref(false);\n\nconst discardModalClosed = (approved: boolean) => {\n  isConfirmedModalOpen.value = false;\n  if (approved) {\n    eventForm.value?.clearStore();\n    router.go(-1);\n  }\n};\n\nconst {\n  mutate: updateEventMutate,\n  loading: eventOnUpdating,\n  onDone: eventUpdated,\n} = useMutation(UpdateEventDocument);\n\nconst updateEvent = (input: UpdateEventInput) => {\n  updateEventMutate({ id: eventId.value, input });\n};\n\nconst eventForm = ref<typeof EventForm | null>(null);\n\neventUpdated(() => {\n  showSuccessToast();\n  eventForm.value?.clearStore();\n  router.go(-1);\n});\n\nconst showSuccessToast = async () => {\n  const toast = await toastController.create({\n    message: \"Succesfully updated the event\",\n    duration: 2000,\n    icon: \"assets/icon/success.svg\",\n    cssClass: \"success-toast\",\n  });\n  return toast.present();\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(BaseLayout, { \"hide-navigation-menu\": \"\" }, {\n      header: _withCtx(() => [\n        _createVNode(PageHeader, {\n          \"back-btn\": \"\",\n          onBack: onBack,\n          title: \"Edit event\"\n        })\n      ]),\n      content: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(EventForm, {\n            edit: \"\",\n            ref_key: \"eventForm\",\n            ref: eventForm,\n            data: eventData.value,\n            onSubmit: updateEvent,\n            \"submit-button-text\": \"Update\",\n            loading: _unref(eventOnUpdating) || _unref(eventLoading)\n          }, null, 8, [\"data\", \"loading\"])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(DiscardChanges, {\n      \"is-open\": isConfirmedModalOpen.value,\n      onClose: discardModalClosed\n    }, null, 8, [\"is-open\"])\n  ], 64))\n}\n}\n\n})","import script from \"./Index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=2dcb53e9&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2dcb53e9\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_defineComponent","__name","setup","__props","router","useRouter","route","useRoute","onBack","isConfirmedModalOpen","value","eventId","ref","params","id","result","eventResult","loading","eventLoading","useQuery","EventDocument","fetchPolicy","eventData","computed","title","event","description","photos","media","map","url","pathUrl","equipments","amenities","discardModalClosed","approved","eventForm","clearStore","go","mutate","updateEventMutate","eventOnUpdating","onDone","eventUpdated","useMutation","UpdateEventDocument","updateEvent","input","showSuccessToast","async","toast","toastController","create","message","duration","icon","cssClass","present","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_createVNode","BaseLayout","header","_withCtx","PageHeader","content","_createElementVNode","EventForm","edit","ref_key","data","onSubmit","_unref","_","DiscardChanges","onClose","__exports__"],"sourceRoot":""}