{"version":3,"file":"js/329.a8d8183d.js","mappings":"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","sources":["webpack://spotter/./src/general/components/forms/ForgotPasswordForm.vue?7420","webpack://spotter/./src/general/components/forms/ForgotPasswordForm.vue","webpack://spotter/./src/general/views/ForgotPassword.vue?a444","webpack://spotter/./src/general/views/ForgotPassword.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, isRef as _isRef, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withModifiers as _withModifiers } from \"vue\"\n\nimport BaseInput from \"@/general/components/base/BaseInput.vue\";\nimport BaseForm from \"@/general/components/base/BaseForm.vue\";\nimport { IonButton, IonText } from \"@ionic/vue\";\nimport { toRef, computed } from \"vue\";\nimport { ForgotPasswordMutationVariables } from \"@/generated/graphql\";\nimport { useField } from \"vee-validate\";\nimport { emailSchema } from \"@/validations/authValidations\";\nimport { ApolloError } from \"@apollo/client\";\nimport { humanizeString } from \"@/utils/textUtils\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ForgotPasswordForm',\n  props: {\n    email: {},\n    error: {},\n    isLoading: { type: Boolean }\n  },\n  emits: [\"handle-submit\", \"update:email\"],\n  setup(__props: any, { emit: emits }) {\n\nconst props = __props;\n\n\n\n\n\nconst { value: emailInput, errorMessage: emailInputError } = useField<string>(\n  toRef(props, \"email\"),\n  emailSchema,\n  {\n    modelPropName: \"email\",\n  }\n);\n\nconst errorMessage = computed(() => {\n  return props.error ? humanizeString(props.error.message) : null;\n});\n\nconst isValidForm = computed(() => !emailInputError.value && emailInput.value);\n\nconst onSubmit = () => {\n  if (isValidForm.value) {\n    emits(\"handle-submit\", {\n      email: emailInput.value,\n    });\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseForm, {\n    class: \"authentication-form\",\n    onSubmit: _withModifiers(onSubmit, [\"prevent\"])\n  }, {\n    default: _withCtx(() => [\n      _createVNode(BaseInput, {\n        value: _unref(emailInput),\n        \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(emailInput) ? (emailInput).value = $event : null)),\n        \"error-message\": _unref(emailInputError),\n        disabled: _ctx.isLoading,\n        type: \"email\",\n        placeholder: \"Enter your email\"\n      }, null, 8, [\"value\", \"error-message\", \"disabled\"]),\n      _createVNode(_unref(IonButton), {\n        disabled: _ctx.isLoading || !isValidForm.value,\n        class: \"button--submit\",\n        type: \"submit\",\n        expand: \"block\"\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(\" Update \")\n        ]),\n        _: 1\n      }, 8, [\"disabled\"]),\n      _createVNode(_Transition, null, {\n        default: _withCtx(() => [\n          (errorMessage.value)\n            ? (_openBlock(), _createBlock(_unref(IonText), {\n                key: 0,\n                class: \"error\",\n                color: \"danger\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(errorMessage.value), 1)\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"onSubmit\"]))\n}\n}\n\n})","import script from \"./ForgotPasswordForm.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ForgotPasswordForm.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ForgotPasswordForm.vue?vue&type=style&index=0&id=a9127942&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a9127942\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d594546a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"page--content\" }\nconst _hoisted_2 = { class: \"page--title\" }\n\nimport { IonText, IonTitle } from \"@ionic/vue\";\nimport { useMutation } from \"@vue/apollo-composable\";\nimport {\n  ForgotPasswordMutationVariables,\n  ForgotPasswordDocument,\n} from \"@/generated/graphql\";\nimport { ref } from \"vue\";\nimport ForgotPasswordForm from \"@/general/components/forms/ForgotPasswordForm.vue\";\nimport { useRouter } from \"vue-router\";\nimport { EntitiesEnum } from \"@/const/entities\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ForgotPassword',\n  setup(__props) {\n\nconst router = useRouter();\n\nconst {\n  mutate: forgotPassword,\n  onDone,\n  loading,\n  error,\n} = useMutation(ForgotPasswordDocument);\n\nconst form = ref<ForgotPasswordMutationVariables>({\n  email: \"\",\n});\n\nconst resetPassword = (formData: ForgotPasswordMutationVariables) => {\n  forgotPassword({ ...formData });\n};\n\nonDone(() => {\n  localStorage.setItem(\"temporary_email\", JSON.stringify(form.value.email));\n  router.push({ name: EntitiesEnum.ForgotPasswordCheckEmail });\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(IonTitle), null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Uh oh! Forgot your password?\")\n        ]),\n        _: 1\n      }),\n      _createVNode(_unref(IonText), null, {\n        default: _withCtx(() => [\n          _createTextVNode(\" Don't sweat it! Enter your email below to receive instructions to reset your password \")\n        ]),\n        _: 1\n      })\n    ]),\n    _createVNode(ForgotPasswordForm, {\n      email: form.value.email,\n      \"onUpdate:email\": _cache[0] || (_cache[0] = ($event: any) => ((form.value.email) = $event)),\n      error: _unref(error),\n      \"is-loading\": _unref(loading),\n      onHandleSubmit: resetPassword,\n      class: \"forgot-password-form\"\n    }, null, 8, [\"email\", \"error\", \"is-loading\"])\n  ]))\n}\n}\n\n})","import script from \"./ForgotPassword.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ForgotPassword.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ForgotPassword.vue?vue&type=style&index=0&id=d594546a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d594546a\"]])\n\nexport default __exports__"],"names":["_defineComponent","__name","props","email","error","isLoading","type","Boolean","emits","setup","__props","emit","value","emailInput","errorMessage","emailInputError","useField","toRef","emailSchema","modelPropName","computed","humanizeString","message","isValidForm","onSubmit","_ctx","_cache","_openBlock","_createBlock","BaseForm","class","_withModifiers","default","_withCtx","_createVNode","BaseInput","_unref","$event","_isRef","disabled","placeholder","IonButton","expand","_createTextVNode","_","_Transition","IonText","key","color","_toDisplayString","_createCommentVNode","__exports__","_hoisted_1","_hoisted_2","router","useRouter","mutate","forgotPassword","onDone","loading","useMutation","ForgotPasswordDocument","form","ref","resetPassword","formData","localStorage","setItem","JSON","stringify","push","name","EntitiesEnum","ForgotPasswordCheckEmail","_createElementBlock","_createElementVNode","IonTitle","ForgotPasswordForm","onHandleSubmit"],"sourceRoot":""}