"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[8027],{12432:function(e,t,i){i.d(t,{y:function(){return s}});const s=(e,t=!1)=>t?(Number(e)/100).toFixed(2):100*Number(e)},17343:function(e,t,i){i.d(t,{y:function(){return r}});var s=i(26089);const r=(0,s.Q_)("workouts",{state:()=>({workoutTitle:"",workoutType:null,workoutMuscleTypesIds:[],workoutDuration:"",workoutPrice:null,workoutPreview:"",workoutPath:"",media:[],exercises:{},workoutMuscleTypes:[]}),actions:{setValue(e,t){this[e]=t},setMuscleTypes(e,t){this.workoutMuscleTypesIds=e,t.isChecked&&(this.workoutMuscleTypes=[...this.workoutMuscleTypes,t]),t.isChecked||(this.workoutMuscleTypes=[...this.workoutMuscleTypes].filter((e=>e.id!==t.id)))},setExercise(e){this.exercises={...this.exercises,[e.id]:e}},editExercise(e,t){this.exercises[e]=t},setMedia(){this.media=Object.values(this.exercises)},removeExercise(e){this.media=this.media.filter((t=>t.id!==e)),delete this.exercises[e]},clearState(){this.workoutTitle="",this.workoutType=null,this.workoutMuscleTypesIds=[],this.workoutDuration="",this.workoutPrice=null,this.workoutPreview="",this.workoutPath="",this.media=[],this.exercises={},this.workoutMuscleTypes=[]},setWorkout(e){this.exercises={},this.workoutTitle=e.title||"",e.type&&(this.workoutType=e.type),e.bodyParts&&(this.workoutMuscleTypesIds=e.bodyParts),this.workoutDuration=e?.duration?.toString()||"",e.price&&(this.workoutPrice=e.price),this.workoutPreview=e.preview||"",this.workoutPath=e.previewUrl||"",e.exercises?.forEach((e=>this.setExercise({title:e?.title,description:e?.description||"",previewUrl:e?.previewUrl||"",previewPath:e?.previewUrl||"",id:e.id,videoPath:e?.pathUrl,path:e?.pathUrl,videoSize:"",videoName:""}))),this.setMedia()}}})},36578:function(e,t,i){i.d(t,{Z:function(){return w}});var s=i(66252),r=i(2262),o=i(3577),u=i(31810);const a=["src"],c={class:"exercise__holder"};var l=(0,s.aZ)({__name:"ExerciseItem",props:{exercise:{},sequenceNumber:{}},setup(e){return(e,t)=>((0,s.wg)(),(0,s.j4)((0,r.SU)(u.Ie),{lines:"none",class:"exercise"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(u.Bs),{class:"exercise__photo"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.exercise?.previewUrl,class:"exercise__img"},null,8,a)])),_:1}),(0,s._)("div",c,[(0,s.Wm)((0,r.SU)(u.Q$),{class:"exercise__title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.sequenceNumber)+". "+(0,o.zw)(e.exercise?.title),1)])),_:1})])])),_:1}))}}),n=i(83744);const d=(0,n.Z)(l,[["__scopeId","data-v-0cb32faa"]]);var w=d},78027:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});i(57658);var s=i(66252),r=i(2262),o=i(49963),u=i(3577),a=i(31810),c=i(36578),l=i(22201),n=i(49316),d=i(87794),w=i(17343),p=i(61081),k=i(12432);const h={key:1,class:"page-content ion-padding-horizontal"},m={key:0,class:"action-wrap ion-padding-horizontal"};var v=(0,s.aZ)({__name:"ExercisesList",setup(e){const t=(0,l.tv)(),i=(0,l.yj)(),v=(0,w.y)(),{result:y,loading:x,onResult:_}=(0,n.aM)(d.fS,{id:i.params.id},(()=>({enabled:i?.params?.id})));_((({data:e})=>{v.setWorkout(e?.workout)}));const U=(0,s.Fl)((()=>y.value.workout.exercises)),f=(0,s.Fl)((()=>i.params.id?U.value:v.media)),b=(0,r.iH)(""),T=()=>{i.params.id&&v.clearState(),t.go(-1)},{mutate:S,loading:g}=(0,n.Db)(d.rG),P=(0,s.Fl)((()=>({preview:v.workoutPath,body_parts:v.workoutMuscleTypesIds,type_id:v.workoutType?.id,title:v.workoutTitle,description:v.workoutDuration,price:(0,k.y)(v.workoutPrice),duration:Number(v.workoutDuration),exercises:v.media.reduce(((e,t)=>(e.push({id:t.id,title:t.title,file:t.path,preview:t.previewPath,description:t.description}),e)),[])}))),M=()=>{S(P.value).then((()=>{v.clearState(),t.push({name:p.N.TrainerWorkouts})})).catch((e=>{throw b.value=e,new Error(e)}))};return(e,t)=>{const l=(0,s.up)("page-header"),n=(0,s.up)("router-link"),d=(0,s.up)("base-layout");return(0,s.wg)(),(0,s.j4)(d,null,{header:(0,s.w5)((()=>[(0,s.Wm)(l,{onBack:T,"back-btn":"",title:(0,r.SU)(v).workoutTitle},null,8,["title"])])),content:(0,s.w5)((()=>[(0,r.SU)(g)||(0,r.SU)(x)?((0,s.wg)(),(0,s.j4)((0,r.SU)(a.PQ),{key:0,name:"lines",class:"spinner"})):((0,s.wg)(),(0,s.iD)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.value,((e,t)=>((0,s.wg)(),(0,s.j4)(n,{key:e.id,to:(0,r.SU)(i).params.id?{name:(0,r.SU)(p.N).WorkoutPreview,params:{id:e.id}}:{name:(0,r.SU)(p.N).TrainerPreviewExercise,params:{id:e.id}}},{default:(0,s.w5)((()=>[(0,s.Wm)(c.Z,{exercise:e,sequenceNumber:Number(t)+1,class:"exercise-item"},null,8,["exercise","sequenceNumber"])])),_:2},1032,["to"])))),128))]))])),footer:(0,s.w5)((()=>[(0,r.SU)(i).params.id||(0,r.SU)(g)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)((0,r.SU)(a.YG),{type:"submit",expand:"block",onClick:M,disabled:(0,r.SU)(g)},{default:(0,s.w5)((()=>[(0,r.SU)(g)?((0,s.wg)(),(0,s.j4)((0,r.SU)(a.PQ),{key:1,name:"lines"})):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)("Upload workout")],64))])),_:1},8,["disabled"])])),(0,s.Wm)(o.uT,null,{default:(0,s.w5)((()=>[b.value?((0,s.wg)(),(0,s.j4)((0,r.SU)(a.uN),{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(b.value),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}}}),y=i(83744);const x=(0,y.Z)(v,[["__scopeId","data-v-fce3272c"]]);var _=x}}]);
//# sourceMappingURL=8027.8fcce8d7.js.map