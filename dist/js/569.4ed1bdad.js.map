{"version":3,"file":"js/569.4ed1bdad.js","mappings":"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","sources":["webpack://spotter/./node_modules/@capacitor/camera/dist/esm/definitions.js","webpack://spotter/./node_modules/@capacitor/camera/dist/esm/index.js","webpack://spotter/./src/helpers/chats/chatroom.ts","webpack://spotter/./src/ts/enums/chat.ts","webpack://spotter/./src/general/components/blocks/Avatar.vue?c5d4","webpack://spotter/./src/general/components/blocks/Avatar.vue","webpack://spotter/./src/general/components/blocks/chat/Message.vue?fd9b","webpack://spotter/./src/general/components/blocks/chat/Message.vue","webpack://spotter/./src/general/components/blocks/chat/RoomHeader.vue?9ef0","webpack://spotter/./src/general/components/blocks/chat/RoomHeader.vue","webpack://spotter/./src/hooks/usePhotoLoader.ts","webpack://spotter/./src/general/components/blocks/chat/RoomFooter.vue?8ef8","webpack://spotter/./src/general/components/blocks/chat/RoomFooter.vue","webpack://spotter/./src/general/views/chat/Personal.vue?d5e0","webpack://spotter/./src/general/views/chat/Personal.vue"],"sourcesContent":["export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo from the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","import { ChatMessageTypeEnum } from \"@/generated/graphql\";\nimport { RoomType } from \"@/ts/enums/chat\";\nimport dayjs from \"dayjs\";\nimport { Message as MessageType } from \"@/ts/types/chat\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst { first_name, last_name } = JSON.parse(\n  localStorage.getItem(\"user\") || \"{}\"\n);\n\nconst getVisibleMessage = (message: any, id: number) => {\n  if (\n    (message.type !== ChatMessageTypeEnum.OperationRequired &&\n      !message?.operation_data?.visibleFor?.length) ||\n    (message.type !== ChatMessageTypeEnum.OperationRequired &&\n      message?.operation_data?.visibleFor?.length &&\n      message?.operation_data?.visibleFor.find(\n        (i: number) => Number(i) === Number(id)\n      ))\n  ) {\n    return message;\n  }\n};\n\nconst mapChats = (chat: any, userId: any) => {\n  const lastMsg: any = getVisibleMessage(chat.message, userId);\n\n  return {\n    roomId: chat?.id.toString(),\n    roomName: chat.participant.chat_name,\n    avatar: chat.participant.avatar ? chat.participant.avatar : \"\",\n    users: chat.participants,\n    status: lastMsg?.type,\n    lastMessage: lastMsg?.message,\n    type: RoomType.Chat,\n    userId,\n    participantId: chat.participants.find(\n      (participant: { user_id: number }) =>\n        Number(participant.user_id) !== Number(userId)\n    )?.user_id,\n    locked: chat.locked,\n    symbols: `${chat.participant.chat_name\n      .split(\" \")[0]\n      .charAt(0)} ${chat.participant.chat_name.split(\" \")[1].charAt(0)}`,\n    unread: chat.unread[userId],\n  };\n};\n\nexport const mapRequests = (chats: any, id: string) => {\n  return Object.values(chats).reduce((acc: any[], cur: any) => {\n    acc.push({\n      avatar: cur.participants.filter(\n        (i: { user_id: number }) => Number(i.user_id) === Number(id)\n      )[0]?.avatar,\n      status: cur.type,\n      roomId: cur.id.toString(),\n      roomName: cur.sender_name,\n      lastMessage: {\n        time: cur?.operation_data?.time,\n        address: cur?.operation_data?.address,\n      },\n      type: RoomType.Chat,\n      id: cur.id,\n      trainingId: cur?.operation_data?.training_id,\n      participantId: cur.participants.find(\n        (participant: { user_id: number }) =>\n          Number(participant.user_id) !== Number(id)\n      )?.user_id,\n      key: uuidv4(),\n    });\n    return acc;\n  }, []);\n};\n\nexport const mapRequestMessages = (message: any) => {\n  return [\n    {\n      content: message?.message,\n      username: message.sender_name,\n      date: dayjs(message.created_at).format(\"D MMM YYYY\"),\n      timestamp: dayjs(message.created_at).format(\"hh:mm a\"),\n      type: message.type,\n      id: message.id,\n      trainingId: message?.operation_data?.training_id,\n    },\n  ];\n};\n\nconst mapMessages = (chat: any, userId: number) => {\n  return Object.values(chat?.messages).reduce(\n    (acc: MessageType[], cur: any) => {\n      if (getVisibleMessage(cur, userId)) {\n        acc.push({\n          ...cur,\n          parentId: cur?.parent_id,\n          content: cur?.message,\n          username: cur.sender_name,\n          date: dayjs(cur.created_at).format(\"D MMM YYYY\"),\n          timestamp: dayjs(cur.created_at).format(\"hh:mm a\"),\n          type: cur.type,\n          id: cur.id,\n          isCurUserMessage:\n            cur.sender_name === `${first_name} ${last_name}` &&\n            (cur.type === ChatMessageTypeEnum.Message ||\n              cur.type === ChatMessageTypeEnum.Attachment),\n          trainingId: cur?.operation_data?.training_id,\n          key: uuidv4(),\n        });\n      }\n      return acc;\n    },\n    []\n  );\n};\n\nexport { mapChats, mapMessages };\n","export enum RoomStatus {\n  SystemPending = \"SYSTEM_PENDING\",\n  SystemApproved = \"SYSTEM_APPROVED\",\n  SystemRejected = \"SYSTEM_REJECTED\",\n  Default = \"DEFAULT\",\n}\n\nexport enum RoomType {\n  Chat = \"CHAT\",\n  Request = \"REQUEST\",\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, unref as _unref, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = {\n  key: 2,\n  class: \"avatar__online-indicator\"\n}\n\n\nimport { IonThumbnail } from \"@ionic/vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Avatar',\n  props: {\n    src: {},\n    symbols: {},\n    isOnline: { type: Boolean },\n    square: { type: Boolean }\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonThumbnail), {\n    slot: \"start\",\n    class: \"avatar\"\n  }, {\n    default: _withCtx(() => [\n      (_ctx.src)\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 0,\n            src: _ctx.src,\n            class: _normalizeClass([\"avatar__image\", {\n        'avatar__image--online': _ctx.isOnline,\n        'avatar__image--square': _ctx.square,\n      }])\n          }, null, 10, _hoisted_1))\n        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            _createTextVNode(_toDisplayString(_ctx.symbols), 1)\n          ], 64)),\n      (_ctx.isOnline)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=6552dd10&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, normalizeClass as _normalizeClass, createVNode as _createVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, resolveDirective as _resolveDirective, withDirectives as _withDirectives, Fragment as _Fragment, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f26e3bc8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"message__date\"\n}\nconst _hoisted_2 = { class: \"message__container\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"message__content-main\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"system-icon__container\"\n}\nconst _hoisted_6 = {\n  key: 0,\n  class: \"message__content-additional\"\n}\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_8 = { class: \"message__timestamp\" }\nconst _hoisted_9 = {\n  key: 1,\n  class: \"approve-form__buttons\"\n}\n\nimport { computed, withDefaults, ref } from \"vue\";\nimport {\n  IonIcon,\n  IonProgressBar,\n  IonText,\n  IonButton,\n  IonContent,\n  IonPopover,\n  alertController,\n  IonSpinner,\n} from \"@ionic/vue\";\nimport { useMutation } from \"@vue/apollo-composable\";\nimport {\n  ChangeTrainingStateDocument,\n  ChatMessageTypeEnum,\n  TrainingStatesEnum,\n} from \"@/generated/graphql\";\nimport { toastController } from \"@ionic/vue\";\nimport { useRouter } from \"vue-router\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport { RoomType } from \"@/ts/enums/chat\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Message',\n  props: {\n    contentType: { default: ChatMessageTypeEnum.Message },\n    content: {},\n    timestamp: {},\n    date: {},\n    currentUser: { type: Boolean },\n    showDate: { type: Boolean },\n    approvable: { type: Boolean },\n    trainingId: { default: null },\n    messageId: {},\n    deleteable: { type: Boolean }\n  },\n  emits: [\"delete-message\"],\n  setup(__props: any, { emit: emits }) {\n\nconst props = __props;\n\n\n\nconst uri = ref(process.env.VUE_APP_FB_STORAGE);\n\nconst router = useRouter();\n\n\n\nconst isSystemMessage = computed(() =>\n  [\n    ChatMessageTypeEnum.Cancel,\n    ChatMessageTypeEnum.Info,\n    ChatMessageTypeEnum.Confirm,\n  ].includes(props.contentType)\n);\n\nconst { mutate, loading } = useMutation(ChangeTrainingStateDocument);\n\nconst onDeleteMessage = () => {\n  emits(\"delete-message\", props.messageId);\n};\n\nconst presentAlert = async () => {\n  if (props.deleteable) {\n    const alert = await alertController.create({\n      header: props.content,\n      buttons: [\n        {\n          text: \"Cancel\",\n          role: \"cancel\",\n        },\n        {\n          text: \"Delete\",\n          role: \"confirm\",\n          handler: () => {\n            onDeleteMessage();\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n};\n\nconst getErrorMessage = ({ graphQLErrors }) => {\n  if (graphQLErrors.length) {\n    const errsExt = graphQLErrors[0];\n    if (errsExt?.debugMessage) {\n      return errsExt?.debugMessage;\n    }\n    if (errsExt?.extensions?.validation) {\n      return errsExt?.extensions?.validation[\"input.state\"][0];\n    }\n  }\n\n  return \"Something went wrong. Please try again.\";\n};\n\nconst onHandleApproveOrder = () => {\n  mutate({\n    input: { id: props.trainingId, state: TrainingStatesEnum.Accepted },\n  })\n    .then(async () => {\n      const toast = await toastController.create({\n        message: \"Order successfully approved\",\n        duration: 2000,\n        icon: \"assets/icon/success.svg\",\n        cssClass: \"success-toast\",\n      });\n      toast.present();\n      router.push({\n        name: EntitiesEnum.ChatList,\n        query: { type: RoomType.Request.toLocaleLowerCase() },\n      });\n    })\n    .catch(async (err) => {\n      const error = getErrorMessage(err);\n\n      const toast = await toastController.create({\n        message: error,\n        duration: 2000,\n        icon: \"assets/icon/info.svg\",\n        cssClass: \"danger-toast\",\n      });\n      toast.present();\n    });\n};\n\nconst onHandleDeclineOrder = () => {\n  mutate({\n    input: { id: props.trainingId, state: TrainingStatesEnum.Rejected },\n  })\n    .then(async () => {\n      const toast = await toastController.create({\n        message: \"Order successfully declined\",\n        duration: 2000,\n        icon: \"assets/icon/success.svg\",\n        cssClass: \"success-toast\",\n      });\n      toast.present();\n      router.push({\n        name: EntitiesEnum.ChatList,\n        query: { type: RoomType.Request.toLocaleLowerCase() },\n      });\n    })\n    .catch(async (err) => {\n      const error = getErrorMessage(err);\n      const toast = await toastController.create({\n        message: error,\n        duration: 5000,\n        icon: \"assets/icon/info.svg\",\n        cssClass: \"danger-toast\",\n      });\n      toast.present();\n    });\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _directive_touch = _resolveDirective(\"touch\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([{\n      'message__row--current-user': _ctx.currentUser,\n    }, \"message__row\"])\n  }, [\n    (_ctx.showDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, _toDisplayString(_ctx.date), 1))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_ctx.contentType === _unref(ChatMessageTypeEnum).Attachment)\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 0,\n            src: `${uri.value}/${_ctx.content}`,\n            class: _normalizeClass([{ 'message__img--current-user': _ctx.currentUser }, \"message__img\"])\n          }, null, 10, _hoisted_3))\n        : _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: _normalizeClass([{\n          'message__content--approved':\n            _ctx.contentType === _unref(ChatMessageTypeEnum).Confirm,\n          'message__content--pending': _ctx.contentType === _unref(ChatMessageTypeEnum).Info,\n          'message__content--rejected':\n            _ctx.contentType === _unref(ChatMessageTypeEnum).Cancel,\n          'message__content--current-user': _ctx.currentUser,\n          'message__content--approvable': _ctx.approvable,\n        }, \"message__content\"])\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              (isSystemMessage.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                    _createVNode(_unref(IonIcon), {\n                      src: `assets/icon/chat/${_ctx.contentType}.svg`,\n                      class: \"system-icon\"\n                    }, null, 8, [\"src\"])\n                  ]))\n                : _createCommentVNode(\"\", true),\n              _createTextVNode(\" \" + _toDisplayString(_ctx.content), 1)\n            ]),\n            _createVNode(_unref(IonPopover), {\n              trigger: \"click-trigger\",\n              \"trigger-action\": \"click\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(IonContent), { class: \"ion-padding\" }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Delete\")\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            (_ctx.contentType === _unref(ChatMessageTypeEnum).Info && _ctx.approvable)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                  _createVNode(_unref(IonText), {\n                    class: \"message__content-additional--primary\",\n                    color: \"primary\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"You have to approve or decline the order. Client is waiting... \")\n                    ]),\n                    _: 1\n                  }),\n                  _hoisted_7,\n                  _createVNode(_unref(IonText), {\n                    class: \"message__content-additional--light\",\n                    color: \"light\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(IonIcon), {\n                        class: \"system-icon\",\n                        src: \"assets/icon/info.svg\"\n                      }),\n                      _createTextVNode(\" You have 2 hours to approve or decline session \")\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_unref(IonProgressBar), {\n                    value: 0.8,\n                    class: \"approve-progress\",\n                    color: \"light\"\n                  })\n                ]))\n              : _createCommentVNode(\"\", true)\n          ], 2)), [\n            [_directive_touch, presentAlert, \"hold\"]\n          ]),\n      _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_ctx.timestamp), 1)\n    ]),\n    (_ctx.approvable)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _createVNode(_unref(IonButton), {\n            class: \"approve-form__button\",\n            onClick: onHandleApproveOrder,\n            disabled: _unref(loading)\n          }, {\n            default: _withCtx(() => [\n              (!_unref(loading))\n                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                    _createTextVNode(\"Approve order\")\n                  ], 64))\n                : (_openBlock(), _createBlock(_unref(IonSpinner), {\n                    key: 1,\n                    name: \"lines\"\n                  }))\n            ]),\n            _: 1\n          }, 8, [\"disabled\"]),\n          _createVNode(_unref(IonButton), {\n            class: \"approve-form__button secondary\",\n            onClick: onHandleDeclineOrder,\n            disabled: _unref(loading)\n          }, {\n            default: _withCtx(() => [\n              (!_unref(loading))\n                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                    _createTextVNode(\"Decline order\")\n                  ], 64))\n                : (_openBlock(), _createBlock(_unref(IonSpinner), {\n                    key: 1,\n                    name: \"lines\"\n                  }))\n            ]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}\n}\n\n})","import script from \"./Message.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=f26e3bc8&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f26e3bc8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9abe11f4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"header__title\" }\nconst _hoisted_2 = { class: \"header__text\" }\n\nimport {\n  IonToolbar,\n  IonButtons,\n  IonTitle,\n  IonText,\n  IonButton,\n  IonIcon,\n} from \"@ionic/vue\";\nimport { withDefaults, computed } from \"vue\";\nimport Avatar from \"@/general/components/blocks/Avatar.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RoomHeader',\n  props: {\n    avatarSrc: {},\n    isOnline: { type: Boolean },\n    backBtn: { type: Boolean, default: false },\n    title: { default: null }\n  },\n  emits: [\"back\"],\n  setup(__props: any, { emit: emits }) {\n\nconst props = __props;\n\n\n\nconst symbols = computed(\n  () =>\n    `${props.title?.split(\" \")[0]?.charAt(0)} ${props.title\n      ?.split(\" \")[1]\n      ?.charAt(0)}`\n);\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonToolbar), { class: \"header\" }, {\n    default: _withCtx(() => [\n      _createVNode(_unref(IonButtons), { slot: \"start\" }, {\n        default: _withCtx(() => [\n          (_ctx.backBtn)\n            ? (_openBlock(), _createBlock(_unref(IonButton), {\n                key: 0,\n                class: \"back-btn\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (emits('back')))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_unref(IonIcon), { src: \"assets/icon/arrow-back.svg\" })\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }),\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(Avatar, {\n          src: _ctx.avatarSrc,\n          class: \"avatar\",\n          symbols: symbols.value\n        }, null, 8, [\"src\", \"symbols\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_unref(IonTitle), { class: \"header__title-room\" }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(_ctx.title), 1)\n            ]),\n            _: 1\n          }),\n          _createVNode(_unref(IonText), {\n            class: _normalizeClass([{ 'header__title-status--offline': !_ctx.isOnline }, \"header__title-status\"])\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(_ctx.isOnline ? \"Online\" : \"Offline\"), 1)\n            ]),\n            _: 1\n          }, 8, [\"class\"])\n        ])\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./RoomHeader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RoomHeader.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RoomHeader.vue?vue&type=style&index=0&id=9abe11f4&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9abe11f4\"]])\n\nexport default __exports__","import { actionSheetController, alertController, isPlatform } from \"@ionic/vue\";\nimport { Camera, CameraResultType, CameraSource } from \"@capacitor/camera\";\nimport { Ref } from \"vue\";\n\nenum actionTypesEnum {\n  Delete = \"DELETE\",\n  MakeAPhoto = \"MAKE_A_PHOTO\",\n  PhotoLibrary = \"PHOTO_LIBRARY\",\n}\n\nexport const usePhotoLoader = (setValue: (photo?: string) => void) => {\n  const openLoadOptions = async (\n    value?: Ref<string | undefined>\n  ): Promise<void> => {\n    const actionSheet = await actionSheetController.create({\n      mode: \"ios\",\n      buttons: [\n        ...(value?.value\n          ? [\n              {\n                text: \"Delete photo\",\n                role: \"destructive\",\n                data: {\n                  type: actionTypesEnum.Delete,\n                },\n              },\n            ]\n          : []),\n        {\n          text: \"Make a photo\",\n          data: {\n            type: actionTypesEnum.MakeAPhoto,\n          },\n        },\n        {\n          text: \"Photo library\",\n          data: {\n            type: actionTypesEnum.PhotoLibrary,\n          },\n        },\n        {\n          text: \"Cancel\",\n          role: \"cancel\",\n        },\n      ],\n    });\n\n    await actionSheet.present();\n\n    const { data } = await actionSheet.onWillDismiss();\n    const type: actionTypesEnum = data.type;\n\n    const actions = {\n      [actionTypesEnum.Delete]: () => setValue(),\n      [actionTypesEnum.MakeAPhoto]: () => getPhoto(CameraSource.Camera),\n      [actionTypesEnum.PhotoLibrary]: () => getPhoto(CameraSource.Photos),\n    };\n\n    if (actions[type]) {\n      actions[type]();\n    }\n  };\n\n  const getPhoto = async (source: CameraSource): Promise<void> => {\n    if (isPlatform(\"capacitor\")) {\n      const permissions = await Camera.requestPermissions();\n      if (\n        (source === CameraSource.Camera && permissions.camera === \"denied\") ||\n        (source === CameraSource.Photos && permissions.photos === \"denied\")\n      ) {\n        const alert = await alertController.create({\n          header: \"Permissions denied\",\n          message:\n            source === CameraSource.Camera\n              ? \"You have denied the app from using the camera\"\n              : \"You have denied the app access to your photos\",\n          buttons: [\"OK\"],\n        });\n\n        await alert.present();\n        return;\n      }\n    }\n\n    const image = await Camera.getPhoto({\n      width: 264,\n      height: 264,\n      quality: 90,\n      allowEditing: true,\n      resultType: CameraResultType.Base64,\n      source,\n    });\n\n    setValue(`data:image/jpeg;base64,${image.base64String}`);\n  };\n\n  return {\n    getPhoto,\n    openLoadOptions,\n  };\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, normalizeClass as _normalizeClass, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-417f38ec\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"room-footer\" }\n\nimport { IonIcon, IonTextarea, IonText } from \"@ionic/vue\";\nimport { ref } from \"vue\";\nimport { usePhotoLoader } from \"@/hooks/usePhotoLoader\";\nimport { ChatMessageTypeEnum } from \"@/generated/graphql\";\nimport { dataURItoFile } from \"@/utils/fileUtils\";\nimport { uuidv4 } from \"@firebase/util\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RoomFooter',\n  props: {\n    disabled: { type: Boolean }\n  },\n  emits: [\"send\"],\n  setup(__props: any, { emit: emits }) {\n\nconst props = __props;\n\n\n\n\n\nconst messageText = ref(\"\");\n\nconst sendPhoto = (photoValue: string) => {\n  const file = dataURItoFile(photoValue, uuidv4());\n  emits(\"send\", file, ChatMessageTypeEnum.Attachment);\n};\n\nconst { openLoadOptions } = usePhotoLoader(sendPhoto);\n\nconst handleOpenLoadOptions = () => {\n  if (!props.disabled) {\n    openLoadOptions();\n  }\n};\n\nconst handleSend = () => {\n  if (messageText.value && !props.disabled) {\n    emits(\"send\", messageText.value, ChatMessageTypeEnum.Message);\n    messageText.value = \"\";\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([{ 'room__footer__input--disabled': _ctx.disabled }, \"room-footer__input\"])\n    }, [\n      _createVNode(_unref(IonIcon), {\n        onClick: handleOpenLoadOptions,\n        src: \"assets/icon/clip.svg\",\n        class: _normalizeClass([{ 'file-input--disabled': _ctx.disabled }, \"file-input\"])\n      }, null, 8, [\"class\"]),\n      _createVNode(_unref(IonTextarea), {\n        rows: 1,\n        \"auto-grow\": true,\n        modelValue: messageText.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((messageText).value = $event)),\n        disabled: _ctx.disabled,\n        placeholder: \"Type message\",\n        class: \"room-footer__textarea\"\n      }, null, 8, [\"modelValue\", \"disabled\"]),\n      (messageText.value)\n        ? (_openBlock(), _createBlock(_unref(IonText), {\n            key: 0,\n            onClick: handleSend,\n            class: \"send-message__button\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\" Send \")\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true)\n    ], 2)\n  ]))\n}\n}\n\n})","import script from \"./RoomFooter.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RoomFooter.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RoomFooter.vue?vue&type=style&index=0&id=417f38ec&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-417f38ec\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, withCtx as _withCtx } from \"vue\"\n\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport Message from \"@/general/components/blocks/chat/Message.vue\";\nimport RoomHeader from \"@/general/components/blocks/chat/RoomHeader.vue\";\nimport { onBeforeRouteLeave, useRoute, useRouter } from \"vue-router\";\nimport { onBeforeMount, reactive, ref } from \"vue\";\nimport RoomFooter from \"@/general/components/blocks/chat/RoomFooter.vue\";\nimport { Message as MessageType } from \"@/ts/types/chat\";\nimport useRoles from \"@/hooks/useRole\";\nimport {\n  ChatMessageTypeEnum,\n  RoleEnum,\n  SendMessageDocument,\n  DeleteMessageDocument,\n  ReadMessageDocument,\n} from \"@/generated/graphql\";\nimport {\n  mapChats,\n  mapMessages,\n  mapRequestMessages,\n} from \"@/helpers/chats/chatroom\";\nimport { chatRoom } from \"@/interfaces/chats/chatRoom\";\nimport { activeUsersRef, chatsRef, requestsRef } from \"@/firebase/db\";\nimport { onValue } from \"firebase/database\";\nimport useId from \"@/hooks/useId\";\nimport { useMutation } from \"@vue/apollo-composable\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport { RoomType } from \"@/ts/enums/chat\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Personal',\n  setup(__props) {\n\nconst route = useRoute();\nconst router = useRouter();\nconst { role } = useRoles();\n\nconst { id } = useId();\n\nconst activeUsers = ref<number[]>([]);\n\nconst messagesContainer = ref<HTMLDivElement | null>(null);\nconst layout = ref<typeof BaseLayout | null>(null);\nconst data = reactive<{ messages: MessageType[]; chats: chatRoom[] }>({\n  chats: [],\n  messages: [],\n});\n\nonBeforeRouteLeave((to, from, next) => {\n  to.name === EntitiesEnum.ConfirmOrder\n    ? next({ name: EntitiesEnum.Dashboard })\n    : next();\n});\n\nconst fetchChats = async () => {\n  const ref =\n    route.query.type === RoomType.Request.toLocaleLowerCase()\n      ? requestsRef\n      : chatsRef;\n\n  await onValue(ref, (snapshot) => {\n    snapshot.forEach((childSnapshot: any) => {\n      if (\n        route.query.type === RoomType.Request.toLocaleLowerCase() &&\n        childSnapshot.key === id &&\n        route.params.id\n      ) {\n        const message = Object.values(childSnapshot.val()).filter(\n          (i) => Number(i.id) === Number(route.params.id)\n        ).length\n          ? Object.values(childSnapshot.val()).filter(\n              (i) => Number(i.id) === Number(route.params.id)\n            )[0]\n          : {};\n\n        data.chats = {\n          avatar: message?.participants?.filter(\n            (i: { user_id: any }) => Number(i.user_id) === Number(id)\n          )[0]?.avatar,\n          roomName: message.sender_name,\n          participantId: message.participants.find(\n            (participant: { user_id: number }) =>\n              Number(participant.user_id) !== Number(id)\n          )?.user_id,\n        };\n\n        const mappedValues = mapRequestMessages([message][0]);\n        data.messages.push(...mappedValues);\n      } else {\n        const chat = childSnapshot.val();\n        if (chat.id == route.params.id) {\n          chat.participants.forEach(\n            async (user: {\n              user_id: number;\n              avatar: string;\n              chat_name: string;\n            }) => {\n              if (Number(user.user_id) === Number(id)) {\n                const curChat = {\n                  ...chat,\n                  message: Object.values(chat.messages).pop(),\n                  participant: chat.participants.filter(\n                    (i) => Number(i.user_id) === Number(id)\n                  )[0],\n                };\n                data.chats = mapChats(curChat, id);\n              }\n            }\n          );\n\n          data.messages = Object.assign({}, mapMessages(chat, id));\n\n          if (\n            !data.messages[Object.keys(data.messages)?.pop()]?.read ||\n            (data.messages[Object.keys(data.messages)?.pop()] &&\n              data.messages[Object.keys(data.messages)?.pop()]?.read?.length &&\n              data.messages[Object.keys(data.messages)?.pop()].read[0] &&\n              data.messages[Object.keys(data.messages)?.pop()].read[0] !==\n                Number(id))\n          ) {\n            readMessage({\n              id: data.messages[Object.keys(data.messages)?.pop()].id,\n            });\n          }\n        }\n      }\n    });\n  });\n};\n\nconst fetchActiveUsers = () => {\n  onValue(activeUsersRef, (snapshot) => {\n    snapshot.forEach((childSnapshot) => {\n      activeUsers.value = [...activeUsers.value, childSnapshot.val()];\n    });\n  });\n};\n\nconst isOnline = (id: number) => {\n  return !!activeUsers.value.find((user) => user === id);\n};\n\nonBeforeMount(() => {\n  fetchActiveUsers();\n  fetchChats();\n  layout?.value?.scrollToBottom();\n});\n\nconst showDate = (index: number) => {\n  const currentMessage = data.messages[index];\n  const prevMessage = data.messages[index - 1];\n\n  return currentMessage.date !== prevMessage?.date;\n};\n\nconst isApprovable = (type: ChatMessageTypeEnum, idx: number) => {\n  return (\n    role === RoleEnum.Trainer &&\n    type === ChatMessageTypeEnum.OperationRequired &&\n    ((data.messages[Number(idx) + 1] &&\n      data.messages[Number(idx) + 1]?.type !== ChatMessageTypeEnum.Cancel &&\n      data.messages[Number(idx) + 1]?.type !== ChatMessageTypeEnum.Confirm) ||\n      !data.messages[Number(idx) + 1])\n  );\n};\n\nconst { mutate: sendMessage } = useMutation(SendMessageDocument);\nconst { mutate: deleteMessage } = useMutation(DeleteMessageDocument);\nconst { mutate: readMessage } = useMutation(ReadMessageDocument);\n\nconst onSend = (\n  newMessage: string | File,\n  messageContentType: ChatMessageTypeEnum\n) => {\n  const key = messageContentType.toLowerCase();\n  sendMessage({\n    chat_id: route.params.id,\n    input: {\n      type: messageContentType,\n      [key]: newMessage,\n    },\n  });\n  if (messagesContainer.value) {\n    layout?.value?.scrollToBottom();\n  }\n};\n\nconst onDeleteMessage = (id: number) => {\n  deleteMessage({ id });\n};\n\nconst onBack = () => {\n  router.go(-1);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, {\n    ref_key: \"layout\",\n    ref: layout\n  }, {\n    header: _withCtx(() => [\n      _createVNode(RoomHeader, {\n        \"back-btn\": \"\",\n        \"is-online\": isOnline(data.chats?.participantId),\n        title: data.chats?.roomName || '',\n        \"avatar-src\": data.chats?.avatar || '',\n        onBack: onBack\n      }, null, 8, [\"is-online\", \"title\", \"avatar-src\"])\n    ]),\n    content: _withCtx(() => [\n      _createElementVNode(\"div\", {\n        ref_key: \"messagesContainer\",\n        ref: messagesContainer,\n        class: \"messages__container\"\n      }, [\n        _createElementVNode(\"div\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.messages, (message, idx) => {\n            return (_openBlock(), _createBlock(Message, {\n              key: message.id,\n              content: message.content,\n              timestamp: message.timestamp,\n              date: message.date,\n              \"content-type\": message.type,\n              \"current-user\": message.isCurUserMessage,\n              \"show-date\": showDate(idx),\n              approvable: isApprovable(message.type, idx),\n              \"training-id\": message?.trainingId,\n              onDeleteMessage: onDeleteMessage,\n              \"message-id\": message.id,\n              deleteable: message.isCurUserMessage\n            }, null, 8, [\"content\", \"timestamp\", \"date\", \"content-type\", \"current-user\", \"show-date\", \"approvable\", \"training-id\", \"message-id\", \"deleteable\"]))\n          }), 128))\n        ])\n      ], 512)\n    ]),\n    footer: _withCtx(() => [\n      _createVNode(RoomFooter, {\n        onSend: onSend,\n        disabled: data.chats?.locked\n      }, null, 8, [\"disabled\"])\n    ]),\n    _: 1\n  }, 512))\n}\n}\n\n})","import script from \"./Personal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Personal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Personal.vue?vue&type=style&index=0&id=7dd9da5c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7dd9da5c\"]])\n\nexport default __exports__"],"names":["CameraSource","CameraDirection","CameraResultType","Camera","web","then","m","CameraWeb","first_name","last_name","JSON","parse","localStorage","getItem","getVisibleMessage","message","id","type","ChatMessageTypeEnum","OperationRequired","operation_data","visibleFor","length","find","i","Number","mapChats","chat","userId","lastMsg","roomId","toString","roomName","participant","chat_name","avatar","users","participants","status","lastMessage","RoomType","Chat","participantId","user_id","locked","symbols","split","charAt","unread","mapRequests","chats","Object","values","reduce","acc","cur","push","filter","sender_name","time","address","trainingId","training_id","key","uuidv4","mapRequestMessages","content","username","date","dayjs","created_at","format","timestamp","mapMessages","messages","parentId","parent_id","isCurUserMessage","Message","Attachment","RoomStatus","_hoisted_1","_hoisted_2","class","_defineComponent","__name","props","src","isOnline","Boolean","square","setup","__props","_ctx","_cache","_openBlock","_createBlock","_unref","IonThumbnail","slot","default","_withCtx","_createElementBlock","_normalizeClass","_Fragment","_createTextVNode","_toDisplayString","_createCommentVNode","_","__exports__","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementVNode","_hoisted_8","_hoisted_9","contentType","currentUser","showDate","approvable","messageId","deleteable","emits","emit","uri","ref","process","VUE_APP_FB_STORAGE","router","useRouter","isSystemMessage","computed","Cancel","Info","Confirm","includes","mutate","loading","useMutation","ChangeTrainingStateDocument","onDeleteMessage","presentAlert","async","alert","alertController","create","header","buttons","text","role","handler","present","getErrorMessage","graphQLErrors","errsExt","debugMessage","extensions","validation","onHandleApproveOrder","input","state","TrainingStatesEnum","Accepted","toast","toastController","duration","icon","cssClass","name","EntitiesEnum","ChatList","query","Request","toLocaleLowerCase","catch","error","err","onHandleDeclineOrder","Rejected","_directive_touch","_resolveDirective","value","_withDirectives","_createVNode","IonIcon","IonPopover","trigger","IonContent","IonText","color","IonProgressBar","IonButton","onClick","disabled","IonSpinner","avatarSrc","backBtn","title","IonToolbar","IonButtons","$event","Avatar","IonTitle","actionTypesEnum","usePhotoLoader","setValue","openLoadOptions","actionSheet","actionSheetController","mode","data","Delete","MakeAPhoto","PhotoLibrary","onWillDismiss","actions","getPhoto","Photos","isPlatform","permissions","requestPermissions","source","camera","photos","image","width","height","quality","allowEditing","resultType","Base64","base64String","messageText","sendPhoto","photoValue","file","dataURItoFile","handleOpenLoadOptions","handleSend","IonTextarea","rows","modelValue","placeholder","route","useRoute","useRoles","useId","activeUsers","messagesContainer","layout","reactive","onBeforeRouteLeave","to","from","next","ConfirmOrder","Dashboard","fetchChats","requestsRef","chatsRef","onValue","snapshot","forEach","childSnapshot","params","val","mappedValues","user","curChat","pop","assign","keys","read","readMessage","fetchActiveUsers","activeUsersRef","onBeforeMount","scrollToBottom","index","currentMessage","prevMessage","isApprovable","idx","RoleEnum","Trainer","sendMessage","SendMessageDocument","deleteMessage","DeleteMessageDocument","ReadMessageDocument","onSend","newMessage","messageContentType","toLowerCase","chat_id","onBack","go","BaseLayout","ref_key","RoomHeader","_renderList","footer","RoomFooter"],"sourceRoot":""}