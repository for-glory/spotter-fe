{"version":3,"file":"js/5270.422568e0.js","mappings":"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","sources":["webpack://spotter/./node_modules/@capacitor/geolocation/dist/esm/index.js","webpack://spotter/./src/graphql/documents/userDocuments.ts","webpack://spotter/./src/helpers/distance-between-coords.ts","webpack://spotter/./src/general/components/blocks/AdvantageItem.vue?5903","webpack://spotter/./src/general/components/blocks/AdvantageItem.vue","webpack://spotter/./src/general/components/blocks/Avatar.vue?c5d4","webpack://spotter/./src/general/components/blocks/Avatar.vue","webpack://spotter/./src/general/components/blocks/ratings/ReviewItem.vue?9e3b","webpack://spotter/./src/general/components/blocks/ratings/ReviewItem.vue","webpack://spotter/./src/general/components/blocks/ratings/ReviewSlides.vue?a4c8","webpack://spotter/./src/general/components/blocks/ratings/ReviewSlides.vue","webpack://spotter/./src/users/views/activities/Detail.vue?29d1","webpack://spotter/./src/users/views/activities/Detail.vue"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Geolocation = registerPlugin('Geolocation', {\n    web: () => import('./web').then(m => new m.GeolocationWeb()),\n});\nexport * from './definitions';\nexport { Geolocation };\n//# sourceMappingURL=index.js.map","import gql from \"graphql-tag\";\n\nexport const UserDocument = gql`\n  query user($id: ID!, $email: String) {\n    user(id: $id, email: $email) {\n      id\n      email\n      gender\n      created_at\n      updated_at\n    }\n  }\n`;\n\nexport const FollowTrainerDocument = gql`\n  mutation FollowTrainer($trainer_id: ID!) {\n    followTrainer(input: { trainer_id: $trainer_id }) {\n      id\n    }\n  }\n`;\n\nexport const UnfollowTrainerDocument = gql`\n  mutation UnfollowTrainer($trainer_id: ID!) {\n    unfollowTrainer(input: { trainer_id: $trainer_id }) {\n      id\n    }\n  }\n`;\n\nexport const GetTrainerDocument = gql`\n  query user($id: ID!) {\n    user(id: $id) {\n      id\n      first_name\n      last_name\n      avatar\n      score\n      avatarUrl\n      facilities {\n        address {\n          street\n        }\n      }\n      settings {\n        setting {\n          code\n        }\n        value\n      }\n    }\n  }\n`;\n\nexport const GetFacilityDocument = gql`\n  query Facility($id: ID!) {\n    facility(id: $id) {\n      was_commented_by_me\n      was_visited_by_me\n      address {\n        lat\n        lng\n        street\n      }\n      created_at\n      equipments {\n        name\n        id\n        icon\n        iconUrl\n      }\n      id\n      is_followed\n      media {\n        path\n        pathUrl\n      }\n      name\n      score\n      description\n      not_recommended_count\n      recommended_count\n      reviews_count\n      positive_reviews_count\n      negative_reviews_count\n      amenities {\n        id\n        name\n        icon\n        iconUrl\n      }\n    }\n  }\n`;\n\nexport const RefreshTokenDocument = gql`\n  mutation RefreshToken($refresh_token: String) {\n    refreshToken(input: { refresh_token: $refresh_token }) {\n      access_token\n      refresh_token\n      expires_in\n      token_type\n    }\n  }\n`;\n","import { PositionLatLng } from \"@/ts/types/map\";\n\nexport const distanceBetweenCoords = (\n  point1: PositionLatLng,\n  point2: PositionLatLng\n) => {\n  const R = 3958.8;\n  const dLat = deg2rad(point2.lat - point1.lat);\n  const dLon = deg2rad(point2.lng - point1.lng);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(deg2rad(point1.lat)) *\n      Math.cos(deg2rad(point2.lat)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\nconst deg2rad = (deg: number) => deg * (Math.PI / 180);\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-20d89745\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"certificate\" }\n\nimport { IonIcon } from \"@ionic/vue\";\n\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AdvantageItem',\n  props: {\n    icon: {},\n    title: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(IonIcon), {\n      src: _ctx.icon,\n      class: \"certificate-icon\"\n    }, null, 8, [\"src\"]),\n    _createTextVNode(\" \" + _toDisplayString(_ctx.title), 1)\n  ]))\n}\n}\n\n})","import script from \"./AdvantageItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AdvantageItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AdvantageItem.vue?vue&type=style&index=0&id=20d89745&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-20d89745\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, unref as _unref, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = {\n  key: 2,\n  class: \"avatar__online-indicator\"\n}\n\n\nimport { IonThumbnail } from \"@ionic/vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Avatar',\n  props: {\n    src: {},\n    symbols: {},\n    isOnline: { type: Boolean },\n    square: { type: Boolean }\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(IonThumbnail), {\n    slot: \"start\",\n    class: \"avatar\"\n  }, {\n    default: _withCtx(() => [\n      (_ctx.src)\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 0,\n            src: _ctx.src,\n            class: _normalizeClass([\"avatar__image\", {\n        'avatar__image--online': _ctx.isOnline,\n        'avatar__image--square': _ctx.square,\n      }])\n          }, null, 10, _hoisted_1))\n        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            _createTextVNode(_toDisplayString(_ctx.symbols), 1)\n          ], 64)),\n      (_ctx.isOnline)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Avatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=6552dd10&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-020be6c7\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"review__header\" }\nconst _hoisted_2 = { class: \"ion-text-start\" }\n\nimport { IonText } from \"@ionic/vue\";\nimport Rating from \"@/general/components/blocks/ratings/Rating.vue\";\nimport { computed } from \"vue\";\nimport Avatar from \"../Avatar.vue\";\nimport dayjs from \"dayjs\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ReviewItem',\n  props: {\n    avatarUrl: {},\n    fullName: {},\n    rating: {},\n    date: {},\n    text: {},\n    heightFixed: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\n\n\nconst currentDate = computed(() => dayjs(props.date).format(\"D MMMM, YYYY\"));\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"review__container\", { 'review__container--height-fixed': _ctx.heightFixed }])\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(Avatar, {\n        class: \"review__avatar\",\n        src: _ctx.avatarUrl\n      }, null, 8, [\"src\"]),\n      _createVNode(_unref(IonText), { class: \"review__user\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_ctx.fullName), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(Rating, { value: _ctx.rating }, null, 8, [\"value\"]),\n      _createVNode(_unref(IonText), { class: \"review__date\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(currentDate.value), 1)\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(IonText), {\n        class: \"review__text\",\n        color: \"secondary\"\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_ctx.text), 1)\n        ]),\n        _: 1\n      })\n    ])\n  ], 2))\n}\n}\n\n})","import script from \"./ReviewItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ReviewItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ReviewItem.vue?vue&type=style&index=0&id=020be6c7&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-020be6c7\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\nimport { FreeMode } from \"swiper\";\n\nimport ReviewItem from \"@/general/components/blocks/ratings/ReviewItem.vue\";\nimport { Review } from \"@/ts/types/user\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ReviewSlides',\n  props: {\n    reviews: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(Swiper), {\n    \"free-mode\": \"\",\n    slidesPerView: \"auto\",\n    spaceBetween: 16,\n    slidesOffsetAfter: 16,\n    slidesOffsetBefore: 16,\n    modules: [_unref(FreeMode)]\n  }, {\n    default: _withCtx(() => [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.reviews, (review) => {\n        return (_openBlock(), _createBlock(_unref(SwiperSlide), {\n          key: review.id,\n          class: \"review-slide\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(ReviewItem, {\n              date: review.date,\n              \"avatar-url\": review.avatarUrl,\n              rating: review.rating,\n              \"full-name\": review.fullName,\n              text: review.text,\n              heightFixed: \"\"\n            }, null, 8, [\"date\", \"avatar-url\", \"rating\", \"full-name\", \"text\"])\n          ]),\n          _: 2\n        }, 1024))\n      }), 128))\n    ]),\n    _: 1\n  }, 8, [\"modules\"]))\n}\n}\n\n})","import script from \"./ReviewSlides.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ReviewSlides.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ReviewSlides.vue?vue&type=style&index=0&id=0abc0f62&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0abc0f62\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7a3f8d5c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"info\" }\n\nimport { IonSpinner, toastController } from \"@ionic/vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport Detail from \"@/general/components/Detail.vue\";\nimport { useMutation, useQuery } from \"@vue/apollo-composable\";\nimport {\n  MeDocument,\n  Query,\n  Review,\n  ReviewsDocument,\n  SettingsCodeEnum,\n} from \"@/generated/graphql\";\nimport {\n  GetFacilityDocument,\n  FollowFacilityDocument,\n  UnfollowFacilityDocument,\n} from \"@/graphql/documents/userDocuments\";\nimport { computed, ref } from \"vue\";\nimport AdvantageItem from \"@/general/components/blocks/AdvantageItem.vue\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport { Review as UserReview } from \"@/ts/types/user\";\nimport ReviewSlides from \"@/general/components/blocks/ratings/ReviewSlides.vue\";\nimport { distanceBetweenCoords } from \"@/helpers/distance-between-coords\";\nimport { PositionLatLng } from \"@/ts/types/map\";\nimport { Geolocation } from \"@capacitor/geolocation\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Detail',\n  setup(__props) {\n\nconst route = useRoute();\nconst router = useRouter();\nconst isFollowed = ref(false);\nconst isTrusted = ref(false);\n\nconst { result, loading, onResult } = useQuery<Pick<Query, \"facility\">>(\n  GetFacilityDocument,\n  {\n    id: route.params.id,\n  }\n);\n\nconst { mutate: follow, onDone: onFollowed } = useMutation(\n  FollowFacilityDocument,\n  {\n    variables: { facility_id: route.params.id },\n  }\n);\nconst { mutate: unfollow, onDone: onUnfollowed } = useMutation(\n  UnfollowFacilityDocument,\n  {\n    variables: { facility_id: route.params.id },\n  }\n);\n\nconst photosWithUrl = computed(() =>\n  process.env.VUE_APP_CDN\n    ? result?.value?.facility?.media?.map(\n        (media) => `${process.env.VUE_APP_CDN}${media?.path}`\n      )\n    : []\n);\n\nconst handleFollow = () => {\n  if (isFollowed.value) {\n    unfollow();\n  } else {\n    follow();\n  }\n};\n\nconst handleBuy = () => {\n  router.push({ name: EntitiesEnum.FacilitySubscription });\n};\n\nonResult(() => {\n  if (result?.value?.facility?.is_followed) {\n    isFollowed.value = result?.value?.facility?.is_followed;\n  }\n});\n\nonFollowed(() => {\n  isFollowed.value = true;\n});\n\nonUnfollowed(() => {\n  isFollowed.value = false;\n});\n\nconst { result: reviewsResult } = useQuery(ReviewsDocument, {\n  id: route.params.id,\n});\n\nconst reviews = computed(() =>\n  reviewsResult?.value?.reviews?.data.reduce(\n    (acc: UserReview[], cur: Review) => {\n      acc.push({\n        id: cur.id,\n        date: cur.created_at,\n        rating: cur.score || 0,\n        text: cur.review,\n        avatarUrl: cur.author?.avatarUrl || \"\",\n        fullName: `${cur.author?.first_name} ${cur.author?.last_name}`,\n      });\n      return acc;\n    },\n    []\n  )\n);\n\nconst myCoords = ref<PositionLatLng>({\n  lat: 0,\n  lng: 0,\n});\n\nconst { onResult: gotMe } = useQuery(\n  MeDocument,\n  {},\n  {\n    fetchPolicy: \"no-cache\",\n  }\n);\n\ngotMe(async (response) => {\n  isTrusted.value = !!response.data?.me?.settings?.find(\n    (settings: any) => settings.setting.code === SettingsCodeEnum.VerifiedUser\n  )?.value;\n\n  if (\n    !response.data.me.settings.find(\n      (settings: any) =>\n        settings.setting.code === SettingsCodeEnum.UsePhoneLocation\n    )?.value\n  ) {\n    myCoords.value = {\n      lat: response.data.me.address.lat,\n      lng: response.data.me.address.lng,\n    };\n  } else {\n    myCoords.value = await getUserLocation();\n  }\n});\n\nconst getUserLocation = async (): Promise<PositionLatLng> => {\n  return new Promise((resolve, reject) => {\n    Geolocation.getCurrentPosition()\n      .then((myPosition) => {\n        resolve({\n          lat: myPosition.coords.latitude,\n          lng: myPosition.coords.longitude,\n        });\n      })\n      .catch(async () => {\n        const toast = await toastController.create({\n          message:\n            \"Failed to get your location. Check the permissions for the application.\",\n          duration: 2000,\n          icon: \"assets/icon/info.svg\",\n          cssClass: \"warning-toast\",\n        });\n        toast.present();\n        await Geolocation.requestPermissions();\n        reject();\n      });\n  });\n};\n\nconst distance = computed(\n  () =>\n    `(${distanceBetweenCoords(\n      {\n        lat: result.value?.facility?.address?.lat || 0,\n        lng: result.value?.facility?.address?.lng || 0,\n      },\n      {\n        lat: myCoords.value.lat || 0,\n        lng: myCoords.value.lng || 0,\n      }\n    ).toFixed(1)} mi)`\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_unref(loading))\n    ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n        key: 0,\n        name: \"lines\",\n        class: \"spinner\"\n      }))\n    : (_openBlock(), _createBlock(Detail, {\n        key: 1,\n        name: _unref(result)?.facility?.name ?? '',\n        \"photos-url\": photosWithUrl.value,\n        likes: _unref(result)?.facility?.positive_reviews_count || 0,\n        \"total-rating\": _unref(result)?.facility?.score || 0,\n        dislikes: _unref(result)?.facility?.negative_reviews_count || 0,\n        \"is-followed\": isFollowed.value,\n        address: _unref(result)?.facility?.address?.street ?? '',\n        distance: distance.value,\n        \"is-trusted\": isTrusted.value,\n        \"button-text\": \"Buy\",\n        \"advantages-title\": \"Equipment\",\n        onHandleFollow: handleFollow,\n        onHandleBook: handleBuy,\n        viewAllLink: _unref(EntitiesEnum).FacilityReviews\n      }, {\n        info: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(_unref(result)?.facility?.description), 1)\n        ]),\n        reviews: _withCtx(() => [\n          _createVNode(ReviewSlides, { reviews: reviews.value }, null, 8, [\"reviews\"])\n        ]),\n        advantages: _withCtx(() => [\n          _createVNode(AdvantageItem, {\n            icon: \"heart\",\n            title: \"Cardio Items\"\n          }),\n          _createVNode(AdvantageItem, {\n            icon: \"pool\",\n            title: \"Pool\"\n          }),\n          _createVNode(AdvantageItem, {\n            icon: \"shower\",\n            title: \"Shower & bath\"\n          })\n        ]),\n        _: 1\n      }, 8, [\"name\", \"photos-url\", \"likes\", \"total-rating\", \"dislikes\", \"is-followed\", \"address\", \"distance\", \"is-trusted\", \"viewAllLink\"]))\n}\n}\n\n})","import script from \"./Detail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Detail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=7a3f8d5c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7a3f8d5c\"]])\n\nexport default __exports__"],"names":["Geolocation","web","then","m","GeolocationWeb","gql","GetTrainerDocument","GetFacilityDocument","distanceBetweenCoords","point1","point2","R","dLat","deg2rad","lat","dLon","lng","a","Math","sin","cos","c","atan2","sqrt","deg","PI","_hoisted_1","class","_defineComponent","__name","props","icon","title","setup","__props","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","IonIcon","src","_createTextVNode","_toDisplayString","__exports__","_hoisted_2","key","symbols","isOnline","type","Boolean","square","_createBlock","IonThumbnail","slot","default","_withCtx","_normalizeClass","_Fragment","_createCommentVNode","_","avatarUrl","fullName","rating","date","text","heightFixed","currentDate","computed","dayjs","format","_createElementVNode","Avatar","IonText","Rating","value","color","reviews","Swiper","slidesPerView","spaceBetween","slidesOffsetAfter","slidesOffsetBefore","modules","FreeMode","_renderList","review","SwiperSlide","id","ReviewItem","route","useRoute","router","useRouter","isFollowed","ref","isTrusted","result","loading","onResult","useQuery","params","mutate","follow","onDone","onFollowed","useMutation","FollowFacilityDocument","variables","facility_id","unfollow","onUnfollowed","UnfollowFacilityDocument","photosWithUrl","process","VUE_APP_CDN","facility","media","map","path","handleFollow","handleBuy","push","name","EntitiesEnum","FacilitySubscription","is_followed","reviewsResult","ReviewsDocument","data","reduce","acc","cur","created_at","score","author","first_name","last_name","myCoords","gotMe","MeDocument","fetchPolicy","async","response","me","settings","find","setting","code","SettingsCodeEnum","VerifiedUser","UsePhoneLocation","getUserLocation","address","Promise","resolve","reject","getCurrentPosition","myPosition","coords","latitude","longitude","catch","toast","toastController","create","message","duration","cssClass","present","requestPermissions","distance","toFixed","IonSpinner","Detail","likes","positive_reviews_count","dislikes","negative_reviews_count","street","onHandleFollow","onHandleBook","viewAllLink","FacilityReviews","info","description","ReviewSlides","advantages","AdvantageItem"],"sourceRoot":""}