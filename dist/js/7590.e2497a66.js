"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[7590],{93556:function(e,a,s){s.r(a),s.d(a,{default:function(){return H}});var r=s(66252),o=s(2262),l=s(31810),n=s(49963),t=s(3577),u=s(67273),d=s(72353),i=s(12954),m=s(8373),p=s(4860),c=s(59483);const v=e=>((0,r.dD)("data-v-1dffa5bc"),e=e(),(0,r.Cn)(),e),g={class:"mt-2"},w={style:{padding:"5%"}},U=v((()=>(0,r._)("p",null,[(0,r.Uk)(" To ensure the safety of our trainers and users, we need to verify your identity. "),(0,r._)("br"),(0,r.Uk)(" Enter Your full name as it appears on your government-issued ID. ")],-1)));var f=(0,r.aZ)({__name:"LoginForm",props:{username:{},password:{},error:{},isLoading:{type:Boolean}},emits:["handle-submit","update:username","update:password"],setup(e,{emit:a}){const s=e,{value:v,errorMessage:f}=(0,i.U$)((0,o.Vh)(s,"username"),m.R_,{modelPropName:"username"}),{value:S,errorMessage:_}=(0,i.U$)((0,o.Vh)(s,"username"),m.Js,{modelPropName:"password"}),b=(0,r.Fl)((()=>s.error?(0,c.Cb)(s.error.message):null)),k=(0,r.Fl)((()=>!f.value&&!_.value&&S.value&&v.value)),W=()=>{k.value&&a("handle-submit",{username:v.value,password:S.value})};let y=(0,o.iH)(!1),h=()=>{console.log("Entra en modal"),y.value=!0},D=()=>{y.value=!1};return(e,a)=>{const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)((0,o.SU)(l.yW),null,{default:(0,r.w5)((()=>[(0,r.Uk)(" Don't have an account? "),(0,r._)("a",{href:"#",onClick:a[0]||(a[0]=(0,n.iM)(((...e)=>(0,o.SU)(h)&&(0,o.SU)(h)(...e)),["prevent"]))}," Sign up ")])),_:1}),(0,r._)("div",g,[(0,r.Wm)(d.Z,{class:"authentication-form",onSubmit:(0,n.iM)(W,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(u.Z,{value:(0,o.SU)(v),"onUpdate:value":a[1]||(a[1]=e=>(0,o.dq)(v)?v.value=e:null),"error-message":(0,o.SU)(f),disabled:e.isLoading,type:"email",placeholder:"Enter your email"},null,8,["value","error-message","disabled"]),(0,r.Wm)(u.Z,{value:(0,o.SU)(S),"onUpdate:value":a[2]||(a[2]=e=>(0,o.dq)(S)?S.value=e:null),"error-message":(0,o.SU)(_),disabled:e.isLoading,type:"password",placeholder:"Enter your password"},null,8,["value","error-message","disabled"]),(0,r.Wm)((0,o.SU)(l.yW),{class:"mt-2"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Forgot password? "),(0,r.Wm)(s,{to:{name:(0,o.SU)(p.N).ForgotPassword}},{default:(0,r.w5)((()=>[(0,r.Uk)(" Click here ")])),_:1},8,["to"])])),_:1}),(0,r.Wm)((0,o.SU)(l.YG),{disabled:e.isLoading,class:"button--submit",type:"submit",expand:"block"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Log In ")])),_:1},8,["disabled"]),(0,r.Wm)(n.uT,null,{default:(0,r.w5)((()=>[b.value?((0,r.wg)(),(0,r.j4)((0,o.SU)(l.yW),{key:0,class:"error",color:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(b.value),1)])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1},8,["onSubmit"])]),(0,r.Wm)((0,o.SU)(l.ki),{"is-open":(0,o.SU)(y),onDidDismiss:(0,o.SU)(D)},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(l.W2),{class:"block"},{default:(0,r.w5)((()=>[(0,r._)("div",w,[U,(0,r.Wm)(s,{to:{name:(0,o.SU)(p.N).Register}},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(l.YG),{class:"button--submit",expand:"block",onClick:(0,o.SU)(D),tag:"router-link"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Register ")])),_:1},8,["onClick"])])),_:1},8,["to"])])])),_:1})])),_:1},8,["is-open","onDidDismiss"])],64)}}}),S=s(83744);const _=(0,S.Z)(f,[["__scopeId","data-v-1dffa5bc"]]);var b=_,k=s(60605),W=s(87794),y=s(49316),h=s(18354),D=s(21912),Z=s(13795);const C={class:"content"},L={class:"welcome-text"};var E=(0,r.aZ)({__name:"Login",setup(e){let{mutate:a,onDone:s,onError:n,loading:t,error:u}=(0,y.Db)(W.b1);const d=(0,o.iH)({username:"",password:""});s((({data:e,errors:a})=>{if(!e&&a)throw new Error(String(a[0].extensions.reason));(0,h.H9)(e.login);const{verified:s}=(0,Z.Z)();s||localStorage.setItem("temporary_email",JSON.stringify(e.login.user.email)),(0,D.Z)(e.login.user)})),n((()=>{d.value.password=""}));const i=e=>{a({...e})};return(e,a)=>((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("div",L,[(0,r.Wm)((0,o.SU)(l.yW),null,{default:(0,r.w5)((()=>[(0,r.Uk)("Welcome to Spotter")])),_:1})]),(0,r.Wm)(b,{username:d.value.username,"onUpdate:username":a[0]||(a[0]=e=>d.value.username=e),password:d.value.password,"onUpdate:password":a[1]||(a[1]=e=>d.value.password=e),error:(0,o.SU)(u),"is-loading":(0,o.SU)(t),onHandleSubmit:i,class:"login-form"},null,8,["username","password","error","is-loading"]),(0,r.Wm)(k.Z)]))}});const F=(0,S.Z)(E,[["__scopeId","data-v-78ade149"]]);var H=F}}]);
//# sourceMappingURL=7590.e2497a66.js.map