"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[6212],{40411:function(e,t,a){a.d(t,{b:function(){return n}});var s=a(29895);const n=(0,s.fo)("Geolocation",{web:()=>a.e(6642).then(a.bind(a,56642)).then((e=>new e.GeolocationWeb))})},76111:function(e,t,a){a.d(t,{T:function(){return n}});a(57658);const s=15,n=()=>[...Array(s)].map(((e,t)=>t)).reduce(((e,t)=>(e.push({text:String(t+1),value:String(++t)}),e)),[])},38747:function(e,t,a){a.d(t,{s:function(){return n}});var s=a(26089);const n=(0,s.Q_)("seleted-address",{state:()=>({assignedFacility:null,hourlyRate:null,remoteHourlyRate:null,travelRadius:null,useTrainerLocation:!1,workingInGym:!1,edit:!1}),actions:{setEdit(e){this.edit=e},setAssignedFacility(e){this.assignedFacility=e},setWorkinginGym(e){this.workingInGym=e},setHourlyRate(e){this.hourlyRate=e},setRemoteHourlyRate(e){this.remoteHourlyRate=e},setTravelRadius(e){this.travelRadius=e},setUseTrainerLocation(e){this.useTrainerLocation=e},clearState(){this.assignedFacility=null,this.hourlyRate=null,this.remoteHourlyRate=null,this.travelRadius=null,this.useTrainerLocation=!1},clearAssignedFacility(){this.assignedFacility=null}}})},13936:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(66252),n=a(31810),o=(0,s.aZ)({__name:"WheelPicker",props:{options:{},name:{default:""},values:{}},setup(e){const t=e,a=async()=>{const e=t.values,a=t.options.columns.map(((t,a)=>{const s=t.options.map((e=>({value:e.value,text:e.text})));return{name:t.name,options:s,selectedIndex:e?t.options.findIndex((t=>t.value===e[a])):-1}})),s=await n._E.create({buttons:t.options.buttons,mode:"ios",columns:a});await s.present()},o=(0,s.f3)("emitter");return o?.on("open-picker",(e=>{e===t.name&&a()})),(0,s.Ah)((()=>{o?.off("open-picker")})),(e,t)=>(0,s.WI)(e.$slots,"button")}});const l=o;var r=l},46815:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});a(57658);var s=a(66252),n=a(2262),o=a(3577),l=a(31810),r=a(10121),i=a(19239),u=a(22201),c=a(13936),d=a(76111),m=a(61081),v=a(37891),h=a(23728),p=a(67273),y=a(87042),g=a(40411),_=a(38747),f=a(49316),b=a(87794),w=a(43173),k=a(59205),R=a(19648),L=a(36874);const S={class:"page"},T={class:"form-row"},U={class:"form-row"},C={class:"address-container"},A={class:"form-row"},H={class:"form-row"},W={class:"holder-button"};var x=(0,s.aZ)({__name:"LocationRate",setup(e){const t=(0,u.tv)(),a=(0,n.iH)(null),x=(0,n.iH)(null),$=(0,n.iH)(null),Z=(0,n.iH)(null),F=()=>{Q.clearState(),t.go(-1)},I=(0,s.f3)("emitter"),D=e=>{I?.emit("open-picker",e)},N=(0,d.T)(),G=[{name:"radius",options:N},{name:"unit",options:[{text:"MIL",value:"miles"}]}],P={columns:G,buttons:[{text:"Cancel",role:"cancel"},{text:"Select radius",handler:e=>{j(e.radius?.value)}}]},M=e=>{let t="",a="";const s={latitude:e.geometry.location.lat().toString(),longitude:e.geometry.location.lng().toString(),countryCode:"",countryName:"",postalCode:"",administrativeArea:"",subAdministrativeArea:"",locality:"",subLocality:"",thoroughfare:"",subThoroughfare:"",areasOfInterest:[]};for(let n=0;n<e.address_components.length;n++)e.address_components[n].types.includes("postal_code")&&(s.postalCode=e.address_components[n].long_name),e.address_components[n].types.includes("locality")&&(s.locality=e.address_components[n].long_name),e.address_components[n].types.includes("subLocality")&&(s.subLocality=e.address_components[n].long_name),e.address_components[n].types.includes("country")&&(s.countryName=e.address_components[n].long_name,s.countryCode=e.address_components[n].short_name),e.address_components[n].types.includes("administrative_area_level_1")&&(s.administrativeArea=e.address_components[n].short_name),e.address_components[n].types.includes("administrative_area_level_2")&&(s.subAdministrativeArea=e.address_components[n].long_name),e.address_components[n].types.includes("street_number")&&(t=e.address_components[n].long_name),e.address_components[n].types.includes("route")&&(a=e.address_components[n].long_name);return s.thoroughfare=t+" "+a,s},z=e=>{e&&(Z.value=M(e))},E=async e=>{x.value=e.state,$.value=e.city,Z.value=e.address},Q=(0,_.s)(),Y=(0,s.Fl)((()=>Q.remoteHourlyRate?String(Q.remoteHourlyRate/100):"")),O=e=>{Q.setRemoteHourlyRate(100*Number(e))},q=(0,s.Fl)((()=>Q.travelRadius)),j=e=>{Q.setTravelRadius(e)},B=(0,n.iH)(),X=(0,s.Fl)((()=>{const e=Q.useTrainerLocation;return e&&J(),e})),J=async()=>{try{const e=await g.b.getCurrentPosition();B.value={lat:e.coords.latitude,lng:e.coords.longitude}}catch(e){Q.setUseTrainerLocation(!1);const t=await l.Mn.create({message:"Failed to get your location. Check the permissions for the application.",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});t.present(),g.b.requestPermissions()}},K=async e=>{Q.setUseTrainerLocation(e)},{loading:V,mutate:ee,onDone:te}=(0,f.Db)(b.sY),{load:ae,refetch:se}=(0,f.td)(b.Oo,{first:15,name:"",state_code:""});ae();const ne=async()=>{const{id:e}=(0,w.Z)(),t={id:e,trainer_type:b.w3.Freelancer,settings:[{code:b.Lm.UsePhoneLocation,value:X.value},{code:b.Lm.TrainerRemoteDistance,value:q.value},{code:b.Lm.RemoteHourlyRate,value:100*Number(Y.value)}]};if(X.value){const e={...B.value,extra:""};if(B.value?.lat&&B.value.lng)L.d.reverseGeocode(B.value.lat,B.value.lng,{useLocale:!1,maxResults:5}).then((a=>{const s=a[0];s?.locality&&se({first:15,name:s.locality,state_code:s.administrativeArea})?.then((async a=>{const s=a.data.cities.data[0];if(s)ee({...t,...e,city_id:s.id,street:`${s.thoroughfare} ${s.subThoroughfare}`});else{const e=await l.Mn.create({message:"Your address is outside the area. Try to choose manually.",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});e.present(),Q.setUseTrainerLocation(!1)}}))})).catch((e=>{console.log(e)}));else{const e=await l.Mn.create({message:"Something went wrong. Try again.",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});e.present(),J()}}else Z.value?.locality&&se({first:15,name:Z.value?.locality,state_code:Z.value?.administrativeArea})?.then((async e=>{const a=e.data.cities.data[0];if(a){const e={lat:Number(Z.value?.latitude),lng:Number(Z.value?.longitude),street:`${Z.value?.thoroughfare} ${Z.value?.subThoroughfare}`,extra:"",city_id:a.id};ee({...t,address:e})}}))},{mutate:oe,onDone:le}=(0,f.Db)(b.PO);return te((()=>{(0,k.I2)([{isAddressSelected:!0}]);const{id:e}=(0,w.Z)(),t=localStorage.getItem(R.LX.UserSettings);oe({id:e,front_settings:t})})),le((()=>{Q.clearState(),t.push({name:m.N.TrainersExtraPersonal})})),(e,t)=>{const u=(0,s.up)("ion-text"),d=(0,s.up)("GMapAutocomplete");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r.Z,null,{header:(0,s.w5)((()=>[(0,s.Wm)(i.Z,{"back-btn":"",onBack:F,title:"Location and Rate"})])),content:(0,s.w5)((()=>[(0,s._)("div",S,[(0,s._)("div",T,[(0,s.Wm)(h.Z,{value:X.value,content:"Use my current location",onChange:K},null,8,["value"])]),(0,s._)("div",U,[(0,s.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Location information")])),_:1}),(0,s._)("div",C,[(0,s.Wm)(u,{class:"address-content"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Address ")])),_:1}),Z.value?.thoroughfare?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"address-content"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(`${Z.value?.thoroughfare} ${Z.value?.subThoroughfare}`)+", "+(0,o.zw)(`${Z.value?.locality}`)+", "+(0,o.zw)(`${Z.value?.administrativeArea}`)+", "+(0,o.zw)(`${Z.value?.countryName}`),1)])),_:1})):(0,s.kq)("",!0)]),(0,s.Wm)(d,{placeholder:"Enter your address",class:(0,o.C_)(["search-form__control",{"search-form__control--on-focus":e.isFocused}]),onPlace_changed:z},null,8,["class"])]),(0,s._)("div",A,[(0,s.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Please set your travel or distance radius (1-15 miles) ")])),_:1}),(0,s.Wm)(c.Z,{options:P,name:"radiusDistance"},{button:(0,s.w5)((()=>[(0,s.Wm)(y.Z,{title:"Choose your travel radius",onHandleClick:t[0]||(t[0]=e=>D("radiusDistance")),value:q.value?`${q.value} miles`:""},null,8,["value"])])),_:1})]),(0,s._)("div",H,[(0,s.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,s.w5)((()=>[(0,s.Uk)(' Set your hourly rate for mobile training where you go to the client" (USD $) ')])),_:1}),(0,s.Wm)(p.Z,{type:"number",placeholder:"Hourly Rate",value:Y.value,"onUpdate:value":t[1]||(t[1]=e=>Y.value=e),onChange:O},null,8,["value"])])])])),footer:(0,s.w5)((()=>[(0,s._)("div",W,[(0,s.Wm)((0,n.SU)(l.YG),{expand:"block",onClick:ne,disabled:(0,n.SU)(V)||null===q.value||!Y.value?.length||!X.value&&!Z.value||X.value&&!B.value},{default:(0,s.w5)((()=>[(0,s.Uk)(" Next ")])),_:1},8,["disabled"])])])),_:1}),(0,s.Wm)(v.Z,{ref_key:"chooseAddressModal",ref:a,onSelect:E},null,512)],64)}}}),$=a(83744);const Z=(0,$.Z)(x,[["__scopeId","data-v-018f0b12"]]);var F=Z}}]);
//# sourceMappingURL=6212.cb141a14.js.map