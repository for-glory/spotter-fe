{"version":3,"file":"js/7169.2f487da1.js","mappings":"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","sources":["webpack://spotter/./src/general/components/base/BaseCustomCalendar.vue?d989","webpack://spotter/./src/general/components/base/BaseCustomCalendar.vue","webpack://spotter/./src/users/views/dashboards/Calendar.vue?e1d9","webpack://spotter/./src/users/views/dashboards/Calendar.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { ref, withDefaults } from \"vue\";\n\n\nconst __default__ = {\n  name: \"Calendar\",\n};\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  props: {\n    attrs: { default: [\n      {\n        key: \"today\",\n        highlight: {\n          style: {\n            backgroundColor: \"var(--gold)\",\n          },\n        },\n        dates: [new Date()],\n      },\n    ] }\n  },\n  emits: [\"month-changed\"],\n  setup(__props: any, { emit: emits }) {\n\n\n\n\n\nconst date = ref(Date.now());\n\nconst dateChanged = (event: any) => {\n  emits(\"month-changed\", event);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_calendar = _resolveComponent(\"v-calendar\")!\n\n  return (_openBlock(), _createBlock(_component_v_calendar, {\n    class: \"spotter-calendar\",\n    modelValue: date.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((date).value = $event)),\n    \"is-expanded\": \"\",\n    \"onUpdate:fromPage\": dateChanged,\n    rows: 2,\n    \"is-dark\": \"\"\n  }, null, 8, [\"modelValue\"]))\n}\n}\n\n})","import script from \"./BaseCustomCalendar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BaseCustomCalendar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BaseCustomCalendar.vue?vue&type=style&index=0&id=f01dfd4e&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport BaseCalendar from \"@/general/components/base/BaseCustomCalendar.vue\";\nimport { useRouter } from \"vue-router\";\nimport { UserAvailabilityDocument } from \"@/generated/graphql\";\nimport { useQuery } from \"@vue/apollo-composable\";\nimport dayjs from \"dayjs\";\nimport useId from \"@/hooks/useId\";\nimport { computed } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Calendar',\n  setup(__props) {\n\nconst router = useRouter();\nconst { id } = useId();\n\n// Calendar info\nconst { result: calendarWidgetResult, refetch: updateCalendar } = useQuery(\n  UserAvailabilityDocument,\n  {\n    id,\n    from: dayjs().startOf(\"M\").format(\"YYYY-MM-DD HH:mm:ss\"),\n    to: dayjs().endOf(\"M\").add(1, \"M\").format(\"YYYY-MM-DD HH:mm:ss\"),\n  }\n);\n\nconst monthChanged = (date: any) => {\n  if (date.date) return;\n  updateCalendar({\n    id,\n    from: dayjs()\n      .month(date.month - 1)\n      .startOf(\"M\")\n      .format(\"YYYY-MM-DD HH:mm:ss\"),\n    to: dayjs()\n      .month(date.month - 1)\n      .year(date.year)\n      .endOf(\"M\")\n      .add(1, \"M\")\n      .format(\"YYYY-MM-DD HH:mm:ss\"),\n  });\n};\n\nconst bookings = computed(() => {\n  const availability = [];\n  if (calendarWidgetResult && calendarWidgetResult?.value) {\n    const userAvailability = calendarWidgetResult?.value?.userAvailability;\n\n    if (userAvailability && userAvailability?.events) {\n      const { events } = userAvailability;\n      const bookedEvents = events.map((event: any) => {\n        return {\n          start_date: event?.start_date || null,\n        };\n      });\n\n      availability.push(...bookedEvents);\n    }\n    if (userAvailability && userAvailability?.trainings) {\n      const { trainings } = userAvailability;\n      const bookedTrainings = trainings.map((training: any) => {\n        return {\n          start_date: training?.start_date || null,\n        };\n      });\n      availability.push(...bookedTrainings);\n    }\n  }\n  return availability;\n});\n\nconst calendarOption = computed(() => {\n  const tmp = bookings.value.map((date) => new Date(date.start_date));\n  return [\n    {\n      key: \"today\",\n      highlight: {\n        style: {\n          backgroundColor: \"var(--gold)\",\n        },\n      },\n      dates: [new Date()],\n    },\n    {\n      dot: {\n        style: {\n          backgroundColor: \"var(--gold)\",\n        },\n      },\n      dates: tmp,\n    },\n  ];\n});\n\n// const calendarOption = [\n//   {\n//     key: \"today\",\n//     highlight: {\n//       style: {\n//         backgroundColor: \"var(--gold)\",\n//       },\n//     },\n//     dates: [new Date()],\n//   },\n//   {\n//     dot: {\n//       style: {\n//         backgroundColor: \"var(--gold)\",\n//       },\n//     },\n//     dates: [...aaa.value],\n//   },\n// ];\n\nconst onBack = () => {\n  router.go(-1);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, null, {\n    header: _withCtx(() => [\n      _createVNode(PageHeader, {\n        \"back-btn\": \"\",\n        title: \"Calendar\",\n        onBack: onBack\n      })\n    ]),\n    content: _withCtx(() => [\n      _createVNode(BaseCalendar, {\n        class: \"calendar\",\n        attributes: calendarOption.value,\n        onMonthChanged: monthChanged\n      }, null, 8, [\"attributes\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Calendar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Calendar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Calendar.vue?vue&type=style&index=0&id=8092ba6a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8092ba6a\"]])\n\nexport default __exports__"],"names":["__default__","name","_defineComponent","props","attrs","default","key","highlight","style","backgroundColor","dates","Date","emits","setup","__props","emit","date","ref","now","dateChanged","event","_ctx","_cache","_component_v_calendar","_resolveComponent","_openBlock","_createBlock","class","modelValue","value","$event","rows","__exports__","__name","router","useRouter","id","useId","result","calendarWidgetResult","refetch","updateCalendar","useQuery","UserAvailabilityDocument","from","dayjs","startOf","format","to","endOf","add","monthChanged","month","year","bookings","computed","availability","userAvailability","events","bookedEvents","map","start_date","push","trainings","bookedTrainings","training","calendarOption","tmp","dot","onBack","go","BaseLayout","header","_withCtx","_createVNode","PageHeader","title","content","BaseCalendar","attributes","onMonthChanged","_"],"sourceRoot":""}