"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[7891],{63547:function(e,a,t){t.d(a,{k:function(){return l}});const l=[{featureType:"all",elementType:"all",stylers:[{visibility:"simplified"},{saturation:"-100"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#7e7e7e"},{weight:"5.10"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{weight:"3"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2e2e2e"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#474747"},{visibility:"simplified"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},{color:"#fdfdfd"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{lightness:"-62"},{saturation:"-18"},{color:"#151515"}]}]},24509:function(e,a,t){t.d(a,{s:function(){return s}});var l=t(2262);const s=()=>{const e=(0,l.iH)(!1),a=()=>{e.value=!1},t=()=>{e.value=!0};return{showConfirmationModal:e,hideModal:a,showModal:t}}},37891:function(e,a,t){t.d(a,{Z:function(){return U}});var l=t(66252),s=t(2262),o=t(3577),n=t(31810),i=t(29895),d=t(19239),r=t(61081),u=t(63547),c=t(36874),v=t(87794),m=t(49316),p=t(24509),_=t(73226);const g={class:"ion-padding select-button",slot:"fixed"},f={class:"center-marker"},y={key:0,class:"ion-padding select-button select-button--filled",slot:"fixed"};var h=(0,l.aZ)({__name:"ChooseAddressModal",emits:["cancel","select"],setup(e,{expose:a,emit:t}){const h=(0,s.iH)(null),b=(0,s.iH)(null),w=(0,s.iH)(),U=(0,s.iH)(),S=(0,s.iH)(),T=(0,s.iH)({lat:Number({NODE_ENV:"production",VUE_APP_API_URL:"https://api.spotterfitness.com/graphql",VUE_APP_GOOGLE_AUTH_CLIENT_ID:"",BASE_URL:"/"}.VUE_APP_DEFAULT_POSITION_LAT),lng:Number({NODE_ENV:"production",VUE_APP_API_URL:"https://api.spotterfitness.com/graphql",VUE_APP_GOOGLE_AUTH_CLIENT_ID:"",BASE_URL:"/"}.VUE_APP_DEFAULT_POSITION_LNG)}),k=(0,s.iH)(),C=(0,s.iH)(""),N=(0,s.iH)(),A=(0,s.iH)(),I=()=>{t("cancel"),F()},W=async()=>{if(A.value===r.N.Address)return void P();const e={state:A.value===r.N.State?V.value.find((e=>e.id===S.value)):z.value,city:A.value===r.N.City?V.value.find((e=>e.id===S.value)):G.value,address:U.value||null};t("select",e),F()},{showConfirmationModal:H,hideModal:L,showModal:P}=(0,p.s)(),x=()=>{const e={state:A.value===r.N.State?V.value.find((e=>e.id===S.value)):z.value,city:A.value===r.N.City?V.value.find((e=>e.id===S.value)):G.value,address:U.value||null};t("select",e),F(),L()},E=e=>{A.value=e.type,N.value=e.title,O(),R(),A.value===r.N.State&&(S.value=e.selected,B({first:15,page:M.value,name:C.value})),A.value===r.N.City&&(z.value=e.state,S.value=e.selected,q({first:15,page:M.value,name:C.value,country_id:"1",state_id:z.value?.id})),A.value===r.N.Address&&(z.value=e.state,G.value=e.city,!e.selected&&e.city&&e.city.name&&e.state&&e.state.name?c.d.forwardGeocode(`${e.state.name}, ${e.city.name}`).then((e=>{e[0]&&(T.value={lat:Number(e[0]?.latitude),lng:Number(e[0]?.longitude)},X.zoom=15)})).catch((e=>{U.value=void 0,console.log(e)})):e.selected?(X.zoom=15,T.value=e.selected):X.zoom=10),h?.value?.$el.present()},M=(0,s.iH)(1),V=(0,s.iH)([]),D=(0,s.iH)(0),z=(0,s.iH)(),G=(0,s.iH)(),{load:O,refetch:B,onResult:Y,loading:Z}=(0,m.td)(v.to,{first:15,page:M.value,name:C.value}),{load:R,refetch:q,onResult:$,loading:j}=(0,m.td)(v.Oo,{first:15,page:M.value,name:C.value,country_id:"1",state_id:z.value?.id});Y((e=>{A.value===r.N.State&&(D.value=e.data.states.paginatorInfo.total,e.data&&-1===V.value.findIndex((a=>a.id===e.data.states.data[0].id))&&(V.value=[...V.value,...e.data.states.data]))})),$((e=>{A.value===r.N.City&&(D.value=e.data?.cities.paginatorInfo.total||0,e.data&&-1===V.value.findIndex((a=>a.id===e.data.cities.data[0].id))&&(V.value=[...V.value,...e.data.cities.data]))}));const K=e=>{V.value.length<D.value&&(M.value++,A.value===r.N.State?B({first:15,page:M.value,name:C.value})?.then((()=>{e.target.complete()})):q({first:15,page:M.value,name:C.value,country_id:"1",state_id:z.value?.id})?.then((()=>{e.target.complete()})))},F=()=>{S.value=void 0,C.value="",V.value=[],h?.value?.$el.dismiss()},Q=async()=>{M.value=1,V.value=[],A.value===r.N.State?B({first:15,page:M.value,name:C.value}):q({first:15,page:M.value,name:C.value,country_id:"1",state_id:z.value?.id})};a({present:E});const X={zoom:15,styles:u.k,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,backgroundColor:"var(--gray-800)",disableDefaultUI:!1,padding:{bottom:150}},J=e=>{k.value={lat:e.lat(),lng:e.lng()}},ee=async(e,a)=>{navigator.geolocation&&b.value?.$mapPromise.then((async()=>{let t=await new window.google.maps.Geocoder,l=await new window.google.maps.LatLng(e,a),s={latLng:l};await t.geocode(s,((t,l)=>{if(console.log("results, status",t,l),l==window.google.maps.GeocoderStatus.OK){let l="",s="";const o=t[0],n={latitude:e.toString(),longitude:a.toString(),countryCode:"",countryName:"",postalCode:"",administrativeArea:"",subAdministrativeArea:"",locality:"",subLocality:"",thoroughfare:"",subThoroughfare:"",areasOfInterest:[]};for(let e=0;e<o.address_components.length;e++)o.address_components[e].types.includes("postal_code")&&(n.postalCode=o.address_components[e].long_name),o.address_components[e].types.includes("locality")&&(n.locality=o.address_components[e].long_name),o.address_components[e].types.includes("subLocality")&&(n.subLocality=o.address_components[e].long_name),o.address_components[e].types.includes("country")&&(n.countryName=o.address_components[e].long_name,n.countryCode=o.address_components[e].short_name),o.address_components[e].types.includes("administrative_area_level_1")&&(n.administrativeArea=o.address_components[e].short_name),o.address_components[e].types.includes("administrative_area_level_2")&&(n.subAdministrativeArea=o.address_components[e].long_name),o.address_components[e].types.includes("street_number")&&(l=o.address_components[e].long_name),o.address_components[e].types.includes("route")&&(s=o.address_components[e].long_name);n.thoroughfare=l+" "+s,U.value=n,console.log("OK--\x3e",U)}else U.value=void 0}))}))},ae=()=>{if(w.value=!1,console.log("addressSelected--",k),k.value?.lat&&k.value?.lng){console.log("mapPosition--",k.value?.lat,k.value?.lng);const e=k.value?.lat>0?k.value?.lat-180*Math.floor(Math.abs(k.value?.lat)/180):k.value?.lat+180*Math.floor(Math.abs(k.value?.lat)/180),a=k.value?.lng>0?k.value?.lng-180*Math.floor(Math.abs(k.value?.lng)/180):k.value?.lng+180*Math.floor(Math.abs(k.value?.lng)/180);i.dV.isNativePlatform()?(console.log("Native platform"),c.d.reverseGeocode(e,a,{useLocale:!1,maxResults:5}).then((e=>{console.log("addresses--",e),console.log("chosenAddress--",U);const a=e[0];U.value=a?.thoroughfare?.length?a:void 0})).catch((()=>{console.log("undefined-chosenAddress--",U),U.value=void 0}))):(console.log("Web platform"),ee(k.value?.lat,k.value?.lng))}};return(e,a)=>{const t=(0,l.up)("GMapMap");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)((0,s.SU)(n.ki),{ref_key:"chooseModal",ref:h},{default:(0,l.w5)((()=>[(0,l.Wm)(d.Z,{onBack:I,"back-btn":"",title:N.value},null,8,["title"]),A.value!==(0,s.SU)(r.N).Address?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)((0,s.SU)(n.Ie),{class:"filters"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,s.SU)(n.VI),{ref:"searchBar",modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),class:"search-control","show-clear-button":"never",onIonChange:Q,placeholder:"Enter to filter...","search-icon":"assets/icon/search.svg"},null,8,["modelValue"])])),_:1}),1===M.value&&(A.value===(0,s.SU)(r.N).State&&(0,s.SU)(Z)||A.value===(0,s.SU)(r.N).City&&(0,s.SU)(j))?((0,l.wg)(),(0,l.j4)((0,s.SU)(n.PQ),{key:0,name:"lines",class:"spinner"})):(0,l.kq)("",!0),(0,l.Wm)((0,s.SU)(n.W2),{class:"ion-padding content"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,s.SU)(n.se),{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(V.value,(e=>((0,l.wg)(),(0,l.j4)((0,s.SU)(n.Ie),{lines:"none",key:e.id,class:(0,o.C_)(["radiobutton",{"radiobutton--checked":S.value===e.id}])},{default:(0,l.w5)((()=>[(0,l.Wm)((0,s.SU)(n.Q$),null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.name),1)])),_:2},1024),(0,l.Wm)((0,s.SU)(n.B7),{slot:"end",value:e.id},null,8,["value"])])),_:2},1032,["class"])))),128))])),_:1},8,["modelValue"]),V.value.length<D.value?((0,l.wg)(),(0,l.j4)((0,s.SU)(n.ju),{key:0,threshold:"100px",class:"infinite-scroll",onIonInfinite:K},{default:(0,l.w5)((()=>[(0,l.Wm)((0,s.SU)(n.MB),{"loading-spinner":"lines","loading-text":"Loading more data..."})])),_:1})):(0,l.kq)("",!0),(0,l._)("div",g,[(0,l.Wm)((0,s.SU)(n.YG),{onClick:W,expand:"block"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Select ")])),_:1})])])),_:1})],64)):A.value===(0,s.SU)(r.N).Address?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,o.C_)(["map-holder",{"map-holder--dragging":w.value}])},[(0,l.Wm)(t,{ref_key:"map",ref:b,class:"map",center:T.value,options:X,onDragend:ae,onCenter_changed:J,onDragstart:a[2]||(a[2]=e=>w.value=!0)},null,8,["center"]),(0,l._)("div",f,[(0,l.Wm)((0,s.SU)(n.gu),{icon:"assets/icon/flag.svg"})]),U.value?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("p",null,(0,o.zw)(U.value.thoroughfare)+" "+(0,o.zw)(U.value.subThoroughfare),1),(0,l.Wm)((0,s.SU)(n.YG),{onClick:W,expand:"block",disabled:!U.value?.thoroughfare?.length},{default:(0,l.w5)((()=>[(0,l.Uk)(" Select ")])),_:1},8,["disabled"])])):(0,l.kq)("",!0)],2)):(0,l.kq)("",!0)])),_:1},512),(0,l.Wm)(_.Z,{"is-visible":(0,s.SU)(H),title:"Are you sure you select the right address?",description:"","button-text":"Yes, I'm sure",onDiscard:x,onDecline:(0,s.SU)(L)},null,8,["is-visible","onDecline"])],64)}}}),b=t(83744);const w=(0,b.Z)(h,[["__scopeId","data-v-0e792798"]]);var U=w},73226:function(e,a,t){t.d(a,{Z:function(){return _}});var l=t(66252),s=t(2262),o=t(3577),n=t(31810);const i={class:"wrapper"},d={class:"ion-padding-horizontal"},r={class:"modal__title"},u={class:"modal__content"},c={class:"modal__footer"};var v=(0,l.aZ)({__name:"Confirmation",props:{title:{},description:{},buttonText:{},isVisible:{type:Boolean},cancelButtonText:{default:"Cancel"}},emits:["decline","discard"],setup(e,{emit:a}){const t=()=>{a("decline",!1)},v=()=>{a("discard",!0)};return(e,a)=>((0,l.wg)(),(0,l.j4)((0,s.SU)(n.ki),{ref:"modal","is-open":e.isVisible,"backdrop-dismiss":!1},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)((0,s.SU)(n.gu),{src:"assets/icon/close.svg",onClick:t,class:"close-btn"}),(0,l.Wm)((0,s.SU)(n.Xz),{class:"modal__img",src:"assets/dumbbells.png"}),(0,l._)("div",d,[(0,l._)("strong",r,(0,o.zw)(e.title),1),(0,l._)("div",u,[(0,l.Wm)((0,s.SU)(n.yW),{color:"secondary",class:"modal__text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.description),1)])),_:1})]),(0,l._)("div",c,[(0,l.Wm)((0,s.SU)(n.YG),{onClick:t,class:"modal__button"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.cancelButtonText),1)])),_:1}),(0,l.Wm)((0,s.SU)(n.YG),{onClick:v,class:"modal__button secondary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.buttonText),1)])),_:1})])])])])),_:1},8,["is-open"]))}}),m=t(83744);const p=(0,m.Z)(v,[["__scopeId","data-v-d596bdc6"]]);var _=p}}]);
//# sourceMappingURL=7891.1bda5221.js.map