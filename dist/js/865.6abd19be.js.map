{"version":3,"file":"js/865.6abd19be.js","mappings":"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","sources":["webpack://spotter/./node_modules/@capacitor-community/stripe/dist/esm/shared/platform.js","webpack://spotter/./node_modules/@capacitor-community/stripe/dist/esm/web.js"],"sourcesContent":["/**\n * @url https://github.com/ionic-team/ionic-framework/blob/main/core/src/utils/platform.ts\n * So `@typescript-eslint/no-explicit-any` `@typescript-eslint/no-non-null-assertion` is disabled here\n */\nexport const getPlatforms = (win) => setupPlatforms(win);\nexport const isPlatform = (winOrPlatform, platform) => {\n    if (typeof winOrPlatform === 'string') {\n        platform = winOrPlatform;\n        winOrPlatform = undefined;\n    }\n    return getPlatforms(winOrPlatform).includes(platform);\n};\nexport const setupPlatforms = (win = window) => {\n    if (typeof win === 'undefined') {\n        return [];\n    }\n    win.Ionic = win.Ionic || {};\n    let platforms = win.Ionic.platforms;\n    if (platforms == null) {\n        platforms = win.Ionic.platforms = detectPlatforms(win);\n        platforms.forEach(p => win.document.documentElement.classList.add(`plt-${p}`));\n    }\n    return platforms;\n};\nconst detectPlatforms = (win) => Object.keys(PLATFORMS_MAP).filter(p => PLATFORMS_MAP[p](win));\nconst isMobileWeb = (win) => isMobile(win) && !isHybrid(win);\nconst isIpad = (win) => {\n    // iOS 12 and below\n    if (testUserAgent(win, /iPad/i)) {\n        return true;\n    }\n    // iOS 13+\n    if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\n        return true;\n    }\n    return false;\n};\nconst isIphone = (win) => testUserAgent(win, /iPhone/i);\nconst isIOS = (win) => testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\nconst isAndroid = (win) => testUserAgent(win, /android|sink/i);\nconst isAndroidTablet = (win) => {\n    return isAndroid(win) && !testUserAgent(win, /mobile/i);\n};\nconst isPhablet = (win) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n    return (smallest > 390 && smallest < 520) &&\n        (largest > 620 && largest < 800);\n};\nconst isTablet = (win) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n    return (isIpad(win) ||\n        isAndroidTablet(win) ||\n        ((smallest > 460 && smallest < 820) &&\n            (largest > 780 && largest < 1400)));\n};\nconst isMobile = (win) => matchMedia(win, '(any-pointer:coarse)');\nconst isDesktop = (win) => !isMobile(win);\nconst isHybrid = (win) => isCordova(win) || isCapacitorNative(win);\nconst isCordova = (win) => !!(win['cordova'] || win['phonegap'] || win['PhoneGap']);\nconst isCapacitorNative = (win) => {\n    const capacitor = win['Capacitor'];\n    return !!(capacitor === null || capacitor === void 0 ? void 0 : capacitor.isNative);\n};\nconst isElectron = (win) => testUserAgent(win, /electron/i);\nconst isPWA = (win) => !!(win.matchMedia('(display-mode: standalone)').matches || win.navigator.standalone);\nexport const testUserAgent = (win, expr) => expr.test(win.navigator.userAgent);\nconst matchMedia = (win, query) => win.matchMedia(query).matches;\nconst PLATFORMS_MAP = {\n    'ipad': isIpad,\n    'iphone': isIphone,\n    'ios': isIOS,\n    'android': isAndroid,\n    'phablet': isPhablet,\n    'tablet': isTablet,\n    'cordova': isCordova,\n    'capacitor': isCapacitorNative,\n    'electron': isElectron,\n    'pwa': isPWA,\n    'mobile': isMobile,\n    'mobileweb': isMobileWeb,\n    'desktop': isDesktop,\n    'hybrid': isHybrid\n};\n//# sourceMappingURL=platform.js.map","import { WebPlugin } from '@capacitor/core';\nimport { ApplePayEventsEnum, GooglePayEventsEnum, PaymentFlowEventsEnum, PaymentSheetEventsEnum } from './definitions';\nimport { isPlatform } from './shared/platform';\nexport class StripeWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Stripe',\n            platforms: ['web'],\n        });\n    }\n    async initialize(options) {\n        if (typeof options.publishableKey !== 'string' || options.publishableKey.trim().length === 0) {\n            throw new Error('you must provide a valid key');\n        }\n        this.publishableKey = options.publishableKey;\n        if (options.stripeAccount) {\n            this.stripeAccount = options.stripeAccount;\n        }\n    }\n    async createPaymentSheet(options) {\n        var _a;\n        if (!this.publishableKey) {\n            this.notifyListeners(PaymentSheetEventsEnum.FailedToLoad, null);\n            return;\n        }\n        this.paymentSheet = document.createElement('stripe-payment-sheet');\n        (_a = document.querySelector('body')) === null || _a === void 0 ? void 0 : _a.appendChild(this.paymentSheet);\n        await customElements.whenDefined('stripe-payment-sheet');\n        this.paymentSheet.publishableKey = this.publishableKey;\n        if (this.stripeAccount) {\n            this.paymentSheet.stripeAccount = this.stripeAccount;\n        }\n        this.paymentSheet.applicationName = '@capacitor-community/stripe';\n        this.paymentSheet.intentClientSecret = options.paymentIntentClientSecret;\n        this.paymentSheet.intentType = 'payment';\n        if (options.withZipCode !== undefined) {\n            this.paymentSheet.zip = options.withZipCode;\n        }\n        this.notifyListeners(PaymentSheetEventsEnum.Loaded, null);\n    }\n    async presentPaymentSheet() {\n        if (!this.paymentSheet) {\n            throw new Error();\n        }\n        const props = await this.paymentSheet.present();\n        if (props === undefined) {\n            this.notifyListeners(PaymentSheetEventsEnum.Canceled, null);\n            return {\n                paymentResult: PaymentSheetEventsEnum.Canceled,\n            };\n        }\n        const { detail: { stripe, cardNumberElement }, } = props;\n        const result = await stripe.createPaymentMethod({\n            type: 'card',\n            card: cardNumberElement,\n        });\n        this.paymentSheet.updateProgress('success');\n        this.paymentSheet.remove();\n        if (result.error !== undefined) {\n            this.notifyListeners(PaymentSheetEventsEnum.Failed, null);\n            return {\n                paymentResult: PaymentSheetEventsEnum.Failed,\n            };\n        }\n        this.notifyListeners(PaymentSheetEventsEnum.Completed, null);\n        return {\n            paymentResult: PaymentSheetEventsEnum.Completed,\n        };\n    }\n    async createPaymentFlow(options) {\n        var _a;\n        if (!this.publishableKey) {\n            this.notifyListeners(PaymentFlowEventsEnum.FailedToLoad, null);\n            return;\n        }\n        this.paymentSheet = document.createElement('stripe-payment-sheet');\n        (_a = document.querySelector('body')) === null || _a === void 0 ? void 0 : _a.appendChild(this.paymentSheet);\n        await customElements.whenDefined('stripe-payment-sheet');\n        this.paymentSheet.publishableKey = this.publishableKey;\n        if (this.stripeAccount) {\n            this.paymentSheet.stripeAccount = this.stripeAccount;\n        }\n        this.paymentSheet.applicationName = '@capacitor-community/stripe';\n        // eslint-disable-next-line no-prototype-builtins\n        if (options.hasOwnProperty('paymentIntentClientSecret')) {\n            this.paymentSheet.intentType = 'payment';\n            this.paymentSheet.intentClientSecret = options.paymentIntentClientSecret;\n        }\n        else {\n            this.paymentSheet.intentType = 'setup';\n            this.paymentSheet.intentClientSecret = options.setupIntentClientSecret;\n        }\n        if (options.withZipCode !== undefined) {\n            this.paymentSheet.zip = options.withZipCode;\n        }\n        if (isPlatform(window, 'ios')) {\n            this.paymentSheet.buttonLabel = 'Add card';\n            this.paymentSheet.sheetTitle = 'Add a card';\n        }\n        else {\n            this.paymentSheet.buttonLabel = 'Add';\n        }\n        this.notifyListeners(PaymentFlowEventsEnum.Loaded, null);\n    }\n    async presentPaymentFlow() {\n        if (!this.paymentSheet) {\n            throw new Error();\n        }\n        this.notifyListeners(PaymentFlowEventsEnum.Opened, null);\n        const props = await this.paymentSheet.present().catch(() => undefined);\n        if (props === undefined) {\n            this.notifyListeners(PaymentFlowEventsEnum.Canceled, null);\n            throw new Error();\n        }\n        const { detail: { stripe, cardNumberElement }, } = props;\n        const { token } = await stripe.createToken(cardNumberElement);\n        if (token === undefined || token.card === undefined) {\n            throw new Error();\n        }\n        this.flowStripe = stripe;\n        this.flowCardNumberElement = cardNumberElement;\n        this.notifyListeners(PaymentFlowEventsEnum.Created, {\n            cardNumber: token.card.last4,\n        });\n        return {\n            cardNumber: token.card.last4,\n        };\n    }\n    async confirmPaymentFlow() {\n        if (!this.paymentSheet || !this.flowStripe || !this.flowCardNumberElement) {\n            throw new Error();\n        }\n        const result = await this.flowStripe.createPaymentMethod({\n            type: 'card',\n            card: this.flowCardNumberElement,\n        });\n        if (result.error !== undefined) {\n            this.notifyListeners(PaymentFlowEventsEnum.Failed, null);\n        }\n        this.paymentSheet.updateProgress('success');\n        this.paymentSheet.remove();\n        this.notifyListeners(PaymentFlowEventsEnum.Completed, null);\n        return {\n            paymentResult: PaymentFlowEventsEnum.Completed,\n        };\n    }\n    isApplePayAvailable() {\n        return this.isAvailable('applePay');\n    }\n    async createApplePay(createApplePayOption) {\n        if (!this.publishableKey) {\n            this.notifyListeners(ApplePayEventsEnum.FailedToLoad, null);\n            return;\n        }\n        this.requestApplePay = await this.createPaymentRequestButton();\n        this.requestApplePayOptions = createApplePayOption;\n        this.notifyListeners(ApplePayEventsEnum.Loaded, null);\n    }\n    presentApplePay() {\n        return this.presentPaymentRequestButton('applePay', this.requestApplePay, this.requestApplePayOptions, ApplePayEventsEnum);\n    }\n    isGooglePayAvailable() {\n        return this.isAvailable('googlePay');\n    }\n    async createGooglePay(createGooglePayOption) {\n        if (!this.publishableKey) {\n            this.notifyListeners(GooglePayEventsEnum.FailedToLoad, null);\n            return;\n        }\n        this.requestGooglePay = await this.createPaymentRequestButton();\n        this.requestGooglePayOptions = createGooglePayOption;\n        this.notifyListeners(GooglePayEventsEnum.Loaded, null);\n    }\n    presentGooglePay() {\n        return this.presentPaymentRequestButton('googlePay', this.requestGooglePay, this.requestGooglePayOptions, GooglePayEventsEnum);\n    }\n    async isAvailable(type) {\n        var _a;\n        const requestButton = document.createElement('stripe-payment-request-button');\n        requestButton.id = `isAvailable-${type}`;\n        (_a = document.querySelector('body')) === null || _a === void 0 ? void 0 : _a.appendChild(requestButton);\n        await customElements.whenDefined('stripe-payment-request-button');\n        if (this.publishableKey) {\n            requestButton.publishableKey = this.publishableKey;\n        }\n        if (this.stripeAccount) {\n            requestButton.stripeAccount = this.stripeAccount;\n        }\n        requestButton.applicationName = '@capacitor-community/stripe';\n        return await requestButton.isAvailable(type).finally(() => requestButton.remove());\n    }\n    async createPaymentRequestButton() {\n        var _a;\n        const requestButton = document.createElement('stripe-payment-request-button');\n        (_a = document.querySelector('body')) === null || _a === void 0 ? void 0 : _a.appendChild(requestButton);\n        await customElements.whenDefined('stripe-payment-request-button');\n        if (this.publishableKey) {\n            requestButton.publishableKey = this.publishableKey;\n        }\n        if (this.stripeAccount) {\n            requestButton.stripeAccount = this.stripeAccount;\n        }\n        requestButton.applicationName = '@capacitor-community/stripe';\n        return requestButton;\n    }\n    async presentPaymentRequestButton(type, requestButton, requestButtonOptions, EventsEnum) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve) => {\n            if (requestButton === undefined || requestButtonOptions === undefined || this.publishableKey === undefined) {\n                this.notifyListeners(EventsEnum.Failed, null);\n                return resolve({\n                    paymentResult: EventsEnum.Failed,\n                });\n            }\n            await requestButton.setPaymentRequestOption({\n                country: requestButtonOptions.countryCode.toUpperCase(),\n                currency: requestButtonOptions.currency.toLowerCase(),\n                total: requestButtonOptions.paymentSummaryItems[requestButtonOptions.paymentSummaryItems.length - 1],\n                disableWallets: type === 'applePay' ? ['googlePay', 'browserCard'] : ['applePay', 'browserCard'],\n                requestPayerName: true,\n                requestPayerEmail: true,\n            });\n            // await this.requestButton.setPaymentRequestShippingAddressEventHandler(async (event, stripe) => {});\n            const intentClientSecret = requestButtonOptions.paymentIntentClientSecret;\n            await requestButton.setPaymentMethodEventHandler(async (event, stripe) => {\n                const { paymentIntent, error: confirmError } = await stripe.confirmCardPayment(intentClientSecret, {\n                    payment_method: event.paymentMethod.id,\n                }, { handleActions: false });\n                if (confirmError) {\n                    event.complete('fail');\n                    this.notifyListeners(EventsEnum.Failed, confirmError);\n                    return resolve({\n                        paymentResult: EventsEnum.Failed,\n                    });\n                }\n                if ((paymentIntent === null || paymentIntent === void 0 ? void 0 : paymentIntent.status) === 'requires_action') {\n                    const { error: confirmError } = await stripe.confirmCardPayment(intentClientSecret);\n                    if (confirmError) {\n                        event.complete('fail');\n                        this.notifyListeners(EventsEnum.Failed, confirmError);\n                        return resolve({\n                            paymentResult: EventsEnum.Failed,\n                        });\n                    }\n                }\n                event.complete('success');\n                this.notifyListeners(EventsEnum.Completed, null);\n                return resolve({\n                    paymentResult: EventsEnum.Completed,\n                });\n            });\n            await requestButton.initStripe(this.publishableKey, {\n                stripeAccount: this.stripeAccount,\n                showButton: false,\n            });\n        });\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["getPlatforms","win","setupPlatforms","isPlatform","winOrPlatform","platform","undefined","includes","window","Ionic","platforms","detectPlatforms","forEach","p","document","documentElement","classList","add","Object","keys","PLATFORMS_MAP","filter","isMobileWeb","isMobile","isHybrid","isIpad","testUserAgent","isIphone","isIOS","isAndroid","isAndroidTablet","isPhablet","width","innerWidth","height","innerHeight","smallest","Math","min","largest","max","isTablet","matchMedia","isDesktop","isCordova","isCapacitorNative","capacitor","isNative","isElectron","isPWA","matches","navigator","standalone","expr","test","userAgent","query","StripeWeb","constructor","super","name","async","options","publishableKey","trim","length","Error","this","stripeAccount","_a","paymentSheet","createElement","querySelector","appendChild","customElements","whenDefined","applicationName","intentClientSecret","paymentIntentClientSecret","intentType","withZipCode","zip","notifyListeners","Loaded","FailedToLoad","props","present","Canceled","paymentResult","detail","stripe","cardNumberElement","result","createPaymentMethod","type","card","updateProgress","remove","error","Failed","Completed","hasOwnProperty","setupIntentClientSecret","buttonLabel","sheetTitle","Opened","catch","token","createToken","flowStripe","flowCardNumberElement","Created","cardNumber","last4","isApplePayAvailable","isAvailable","createApplePayOption","requestApplePay","createPaymentRequestButton","requestApplePayOptions","presentApplePay","presentPaymentRequestButton","isGooglePayAvailable","createGooglePayOption","requestGooglePay","requestGooglePayOptions","presentGooglePay","requestButton","id","finally","requestButtonOptions","EventsEnum","Promise","resolve","setPaymentRequestOption","country","countryCode","toUpperCase","currency","toLowerCase","total","paymentSummaryItems","disableWallets","requestPayerName","requestPayerEmail","setPaymentMethodEventHandler","event","paymentIntent","confirmError","confirmCardPayment","payment_method","paymentMethod","handleActions","complete","status","initStripe","showButton"],"sourceRoot":""}