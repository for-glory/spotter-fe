(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[3890],{10285:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,a=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,u={},o=function(e){return(e=+e)+(e>68?1900:2e3)},i=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],l=function(e){var t=u[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var n,a=u.meridiem;if(a){for(var r=1;r<=24;r+=1)if(e.indexOf(a(r,0,t))>-1){n=r>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[r,function(e){this.afternoon=c(e,!1)}],a:[r,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[a,i("seconds")],ss:[a,i("seconds")],m:[a,i("minutes")],mm:[a,i("minutes")],H:[a,i("hours")],h:[a,i("hours")],HH:[a,i("hours")],hh:[a,i("hours")],D:[a,i("day")],DD:[n,i("day")],Do:[r,function(e){var t=u.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var a=1;a<=31;a+=1)t(a).replace(/\[|\]/g,"")===e&&(this.day=a)}],M:[a,i("month")],MM:[n,i("month")],MMM:[r,function(e){var t=l("months"),n=(l("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[r,function(e){var t=l("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,i("year")],YY:[n,function(e){this.year=o(e)}],YYYY:[/\d{4}/,i("year")],Z:s,ZZ:s};function m(n){var a,r;a=n,r=u&&u.formats;for(var o=(n=a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,a){var u=a&&a.toUpperCase();return n||r[a]||e[a]||r[u].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),i=o.length,s=0;s<i;s+=1){var l=o[s],c=d[l],m=c&&c[0],f=c&&c[1];o[s]=f?{regex:m,parser:f}:l.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,a=0;n<i;n+=1){var r=o[n];if("string"==typeof r)a+=r.length;else{var u=r.regex,s=r.parser,l=e.slice(a),c=u.exec(l)[0];s.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var a=t.prototype,r=a.parse;a.parse=function(e){var t=e.date,a=e.utc,o=e.args;this.$u=a;var i=o[1];if("string"==typeof i){var s=!0===o[2],l=!0===o[3],c=s||l,d=o[2];l&&(d=o[2]),u=this.$locale(),!s&&d&&(u=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var a=m(t)(e),r=a.year,u=a.month,o=a.day,i=a.hours,s=a.minutes,l=a.seconds,c=a.milliseconds,d=a.zone,f=new Date,v=o||(r||u?1:f.getDate()),h=r||f.getFullYear(),p=0;r&&!u||(p=u>0?u-1:f.getMonth());var y=i||0,g=s||0,b=l||0,w=c||0;return d?new Date(Date.UTC(h,p,v,y,g,b,w+60*d.offset*1e3)):n?new Date(Date.UTC(h,p,v,y,g,b,w)):new Date(h,p,v,y,g,b,w)}catch(e){return new Date("")}}(t,i,a),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),c&&t!=this.format(i)&&(this.$d=new Date("")),u={}}else if(i instanceof Array)for(var f=i.length,v=1;v<=f;v+=1){o[1]=i[v-1];var h=n.apply(this,o);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}v===f&&(this.$d=new Date(""))}else r.call(this,e)}}}))},62705:function(e,t,n){var a=n(55639),r=a.Symbol;e.exports=r},44239:function(e,t,n){var a=n(62705),r=n(89607),u=n(2333),o="[object Null]",i="[object Undefined]",s=a?a.toStringTag:void 0;function l(e){return null==e?void 0===e?i:o:s&&s in Object(e)?r(e):u(e)}e.exports=l},27561:function(e,t,n){var a=n(67990),r=/^\s+/;function u(e){return e?e.slice(0,a(e)+1).replace(r,""):e}e.exports=u},31957:function(e,t,n){var a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=a},89607:function(e,t,n){var a=n(62705),r=Object.prototype,u=r.hasOwnProperty,o=r.toString,i=a?a.toStringTag:void 0;function s(e){var t=u.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(s){}var r=o.call(e);return a&&(t?e[i]=n:delete e[i]),r}e.exports=s},2333:function(e){var t=Object.prototype,n=t.toString;function a(e){return n.call(e)}e.exports=a},55639:function(e,t,n){var a=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,u=a||r||Function("return this")();e.exports=u},67990:function(e){var t=/\s/;function n(e){var n=e.length;while(n--&&t.test(e.charAt(n)));return n}e.exports=n},23279:function(e,t,n){var a=n(13218),r=n(7771),u=n(14841),o="Expected a function",i=Math.max,s=Math.min;function l(e,t,n){var l,c,d,m,f,v,h=0,p=!1,y=!1,g=!0;if("function"!=typeof e)throw new TypeError(o);function b(t){var n=l,a=c;return l=c=void 0,h=t,m=e.apply(a,n),m}function w(e){return h=e,f=setTimeout($,t),p?b(e):m}function x(e){var n=e-v,a=e-h,r=t-n;return y?s(r,d-a):r}function T(e){var n=e-v,a=e-h;return void 0===v||n>=t||n<0||y&&a>=d}function $(){var e=r();if(T(e))return M(e);f=setTimeout($,x(e))}function M(e){return f=void 0,g&&l?b(e):(l=c=void 0,m)}function Y(){void 0!==f&&clearTimeout(f),h=0,l=v=c=f=void 0}function S(){return void 0===f?m:M(r())}function k(){var e=r(),n=T(e);if(l=arguments,c=this,v=e,n){if(void 0===f)return w(v);if(y)return clearTimeout(f),f=setTimeout($,t),b(v)}return void 0===f&&(f=setTimeout($,t)),m}return t=u(t)||0,a(n)&&(p=!!n.leading,y="maxWait"in n,d=y?i(u(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),k.cancel=Y,k.flush=S,k}e.exports=l},13218:function(e){function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=t},37005:function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},33448:function(e,t,n){var a=n(44239),r=n(37005),u="[object Symbol]";function o(e){return"symbol"==typeof e||r(e)&&a(e)==u}e.exports=o},7771:function(e,t,n){var a=n(55639),r=function(){return a.Date.now()};e.exports=r},14841:function(e,t,n){var a=n(27561),r=n(13218),u=n(33448),o=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;function d(e){if("number"==typeof e)return e;if(u(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?o:+e}e.exports=d},55951:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});n(57658);const a=12,r=()=>[...Array(a)].map(((e,t)=>t)).reduce(((e,t)=>(e.push({text:t.toString(),value:t.toString()}),e)),[])},14446:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});n(57658);const a=(e,t,n)=>[...Array((t||60)/(e||1))].map(((e,t)=>t)).reduce(((t,a)=>{const r=a*(e||1)+(n??1);return t.push({text:r<10?`0${r}`:r.toString(),value:r.toString()}),t}),[])},46989:function(e,t,n){"use strict";n.d(t,{c8:function(){return a},fD:function(){return u},np:function(){return r}});const a={monday:[],tuesday:[],friday:[],thursday:[],wednesday:[],sunday:[],saturday:[]},r={monday:[],tuesday:[],friday:[],sunday:[],saturday:[],thursday:[],wednesday:[]},u={monday:!0,tuesday:!0,friday:!0,sunday:!1,saturday:!1,thursday:!0,wednesday:!0}},13936:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(66252),r=n(31810),u=(0,a.aZ)({__name:"WheelPicker",props:{options:{},name:{default:""},values:{}},setup(e){const t=e,n=async()=>{const e=t.values,n=t.options.columns.map(((t,n)=>{const a=t.options.map((e=>({value:e.value,text:e.text})));return{name:t.name,options:a,selectedIndex:e?t.options.findIndex((t=>t.value===e[n])):-1}})),a=await r._E.create({buttons:t.options.buttons,mode:"ios",columns:n});await a.present()},u=(0,a.f3)("emitter");return u?.on("open-picker",(e=>{e===t.name&&n()})),(0,a.Ah)((()=>{u?.off("open-picker")})),(e,t)=>(0,a.WI)(e.$slots,"button")}});const o=u;var i=o},93890:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});n(57658);var a=n(66252),r=n(2262),u=n(3577),o=n(10121),i=n(19239),s=n(22201),l=n(13936),c=n(87042),d=n(14446),m=n(55951),f=n(23728),v=n(31810);const h=[{label:"SUN",value:"sunday"},{label:"MON",value:"monday"},{label:"TUE",value:"tuesday"},{label:"WED",value:"wednesday"},{label:"THU",value:"thursday"},{label:"FRI",value:"friday"},{label:"SAT",value:"saturday"}];var p=n(27484),y=n.n(p),g=n(49316),b=n(87794),w=n(43173),x=n(10285),T=n.n(x),$=n(23279),M=n.n($),Y=n(46989);const S={class:"ion-padding-horizontal"},k={class:"schedule"};var D=(0,a.aZ)({__name:"WorkingSchedule",setup(e){y().extend(T());const t=(0,s.tv)(),n=()=>{t.go(-1)},p=(0,r.iH)(null),x=(0,r.iH)(y()(new Date).format("DD MMMM YYYY")),$=(0,r.iH)(y()().format("dddd").toLowerCase()),D=(0,r.qj)(Y.np),_=(0,r.qj)(Y.fD),A=(0,r.iH)(""),U=(0,r.qj)(Y.c8),{id:H}=(0,w.Z)(),j=(0,m.F)(),W=(0,d.A)(30,60,0),O=(e,t)=>U[$.value][e]&&U[$.value][e][t]?U[$.value][e][t]:"",L=(e,t)=>{const n=O(e,t),a=n?n.split(":")[0]:"",r=n?n.split(":")[1]?.split(" ")[0]:"",u=n?n.split(" ")[1]:"";return{hour:a,minutes:r,text:u}},C=async(e,t,n)=>{const a=await v.Mn.create({message:e,duration:2e3,icon:`assets/icon/${n}.svg`,cssClass:`${t}-toast`});return a.present()},Z=(e,t)=>{const n=y()(e,"h:mm A"),a=y()(t,"h:mm A");return a.diff(n,"minute")<=0},N=M()((()=>{z({id:H,input:{opening_hours:JSON.stringify(X())}}).then((()=>{E(),C("Time succesfully updated","success","success")})).catch((()=>{C("Something went wrong. Try again.","danger","info")}))}),1e3),{onResult:P,refetch:E,loading:I}=(0,g.aM)(b.en,{id:H},{fetchPolicy:"no-cache"}),{mutate:z,loading:F}=(0,g.Db)(b.ft);P((({data:e})=>{const t=JSON.parse(e?.me?.opening_hours);t&&Object.keys(t).forEach((e=>{_[e]=!!t[e].length,D[e]=[...Array(t[e]?.length||1)],U[e]=t[e].map((e=>{const[t,n]=e.split("-");return{startTime:y()(t,"HH:mm").format("h:mm A"),endTime:y()(n,"HH:mm").format("h:mm A")}}))}))}));const Q=async(e,t,n)=>{const a=n.columns.map((e=>{const n=e.options.map((e=>({value:e.value,text:e.text})));return{name:e.name,options:n,selectedIndex:t?e.options.findIndex((e=>e.value===t.split(":")[0])):-1}})),r=await v._E.create({buttons:n.buttons,mode:"ios",columns:a});A.value=e.split("-")[2],await r.present()},V=e=>{_[$.value]=e,!e&&U[$.value].length&&B()},q=()=>{U[$.value][A.value]&&U[$.value][A.value].startTime&&U[$.value][A.value].endTime&&N()},G=[{name:"hours",options:j},{name:"minutes",options:W},{name:"time",options:[{text:"AM",value:"AM"},{text:"PM",value:"PM"}]}],J={columns:G,buttons:[{text:"Cancel",role:"cancel"},{text:"Choose time",handler:e=>{const t=e.minutes?.value&&Number(e.minutes.value)<10?"0"+e.minutes?.value:e.minutes?.value;if(U[$.value][A.value]?.endTime){const n=Z(`${e.hours?.value}:${t} ${e.time?.value}`,U[$.value][A.value].endTime);if(n)return void C("Please specify the correct time ","danger","info");U[$.value][A.value]={...U[$.value][A.value],startTime:`${e.hours?.value}:${t} ${e.time?.value}`}}else U[$.value][A.value]={...U[$.value][A.value],startTime:`${e.hours?.value}:${t} ${e.time?.value}`};q()}}]},R={columns:G,buttons:[{text:"Cancel",role:"cancel"},{text:"Choose time",handler:e=>{const t=e.minutes?.value&&Number(e.minutes.value)<10?"0"+e.minutes?.value:e.minutes?.value;if(U[$.value][A.value]?.startTime){const n=Z(U[$.value][A.value]?.startTime,`${e.hours?.value}:${t} ${e.time?.value}`);if(n)return void C("Please specify the correct time ","danger","info");U[$.value][A.value]={...U[$.value][A.value],endTime:`${e.hours?.value}:${t} ${e.time?.value}`}}else U[$.value][A.value]={...U[$.value][A.value],endTime:`${e.hours?.value}:${t} ${e.time?.value}`};q()}}]},K=()=>{D[$.value]=[...Array(Number(D[$.value].length)+1)]},X=()=>Object.keys(U).reduce(((e,t)=>(e={...e,[t]:U[t].reduce(((e,t)=>(e.push(`${y()(t.startTime,"h:mm A").format("HH:mm")}-${y()(t.endTime,"h:mm A").format("HH:mm")}`),e)),[])},e)),{}),B=()=>{D[$.value]=[...Array(1)],U[$.value]=[],N()},ee=()=>{B()};return(e,t)=>((0,a.wg)(),(0,a.j4)((0,r.SU)(v._i),{ref_key:"page",ref:p},{default:(0,a.w5)((()=>[(0,a.Wm)(o.Z,{"hide-navigation-menu":""},{header:(0,a.w5)((()=>[(0,a.Wm)(i.Z,{"back-btn":"",title:"Working schedule",onBack:n})])),content:(0,a.w5)((()=>[(0,r.SU)(I)||(0,r.SU)(F)?((0,a.wg)(),(0,a.j4)((0,r.SU)(v.PQ),{key:0,class:"spinner"})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",S,[(0,a.Wm)((0,r.SU)(v.Q$),{class:"schedule__label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Today, "+(0,u.zw)(x.value),1)])),_:1}),(0,a.Wm)((0,r.SU)(v.cJ),{class:"job-day",modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,r.SU)(h),(e=>((0,a.wg)(),(0,a.j4)((0,r.SU)(v.GO),{value:e.value,key:e.value,class:(0,u.C_)({"active-day":_[e.value]})},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(v.Q$),null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.label),1)])),_:2},1024)])),_:2},1032,["value","class"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",k,[(0,a.Wm)((0,r.SU)(v.Q$),{class:"schedule__label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Are you working on this day? ")])),_:1}),(0,a.Wm)(f.Z,{class:"schedule__toggle",content:"Working day",value:_[$.value],onChange:V},null,8,["value"]),(0,a.Wm)((0,r.SU)(v.Q$),{class:"schedule__label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Set your work hours")])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D[$.value],((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"date-range"},[(0,a.Wm)(l.Z,{options:J,name:`startTime-${$.value}-${t}`,values:[L(t,"startTime")?.hour,L(t,"startTime")?.minutes,L(t,"startTime")?.text]},{button:(0,a.w5)((()=>[(0,a.Wm)(c.Z,{title:"From",value:O(Number(t),"startTime"),onHandleClick:e=>Q(`startTime-${$.value}-${t}`,O(t,"startTime"),J),class:"workout-type",disabled:!_[$.value]},null,8,["value","onHandleClick","disabled"])])),_:2},1032,["name","values"]),(0,a.Wm)(l.Z,{options:R,name:`endTime-${$.value}-${t}`,values:[L(t,"endTime")?.hour,L(t,"endTime")?.minutes,L(t,"endTime")?.text]},{button:(0,a.w5)((()=>[(0,a.Wm)(c.Z,{title:"To",value:O(t,"endTime"),onHandleClick:e=>Q(`endTime-${$.value}-${t}`,O(t,"endTime"),R),class:"workout-type",disabled:!_[$.value]},null,8,["value","onHandleClick","disabled"])])),_:2},1032,["name","values"])])))),128)),(0,a.Wm)((0,r.SU)(v.YG),{class:"secondary",expand:"block",onClick:ee},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reset set hours ")])),_:1}),(0,a.Wm)((0,r.SU)(v.YG),{class:"secondary",expand:"block",onClick:K},{default:(0,a.w5)((()=>[(0,a.Uk)(" Add additional hours ")])),_:1})])],64))])),_:1})])),_:1},512))}}),_=n(83744);const A=(0,_.Z)(D,[["__scopeId","data-v-73dabe96"]]);var U=A}}]);
//# sourceMappingURL=3890.4b377be9.js.map