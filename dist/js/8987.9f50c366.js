"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[8987],{95267:function(e,t,s){s.d(t,{d:function(){return o}});s(57658);var a=s(26089);const o=(0,a.Q_)("new-facility",{state:()=>({photos:[],title:"",description:"",address:{state:null,city:null,address:null},equipments:[],amenities:[]}),actions:{addPhoto(e,t){t?this.photos[t]=e:this.photos.push(e)},deletePhoto(e){this.photos.splice(e,1)},setTitle(e){this.title=e},setDescription(e){this.description=e},setEquipments(e){this.equipments=e},setAmenities(e){this.amenities=e},setAddress(e,t,s){this.address={state:e,city:t,address:s}},clear(){this.photos=[],this.title="",this.description="",this.address={state:null,city:null,address:null},this.equipments=[],this.amenities=[]}},getters:{getEquipments:e=>e.equipments,getAmenities:e=>e.amenities}})},87394:function(e,t,s){s.d(t,{Z:function(){return W}});s(57658);var a=s(66252),o=s(3577),n=s(2262),l=s(31810),i=s(47209),d=s(61081),r=s(22201),c=s(37891),u=s(87794),m=s(25934),p=s(16025),_=s(49316),v=s(95267),h=s(65277);const g={class:"form-row"},f={class:"form-row"},y={class:"form-row"},b={class:"form-row"},w={class:"address-container"},k={class:"form-row"};var U=(0,a.aZ)({__name:"GymForm",props:{buttonText:{default:"Save"},previewButton:{type:Boolean},footerFixed:{type:Boolean},edit:{type:Boolean}},emits:["submit","on-delete-media"],setup(e,{expose:t,emit:s}){const U=e,{load:C,refetch:S}=(0,_.td)(u.Oo,{first:15,name:"",state_code:""});C();const W=(0,r.tv)(),A=(0,v.d)(),q=(0,a.Fl)((()=>A.photos)),x=(0,a.Fl)((()=>A.title)),D=e=>{A.setTitle(e)},F=(0,a.Fl)((()=>A.description)),Z=e=>{A.setDescription(e)},B=(0,a.Fl)((()=>A.equipments)),P=(0,a.Fl)((()=>A.amenities)),E=(0,n.iH)(null),$=e=>{A.setEquipments(e.equipments||[]),A.setAmenities(e.amenities||[])},z=(0,a.Fl)((()=>A.address.state)),H=(0,a.Fl)((()=>A.address.city)),I=(0,a.Fl)((()=>A.address.address)),N=()=>{E.value?.present({title:"Amenities",equipments:A.getEquipments.map((e=>e.id)),amenities:A.getAmenities.map((e=>e.id))})},L=(0,n.iH)(null),O=e=>{let t="",s="";const a={latitude:e.geometry.location.lat().toString(),longitude:e.geometry.location.lng().toString(),countryCode:"",countryName:"",postalCode:"",administrativeArea:"",subAdministrativeArea:"",locality:"",subLocality:"",thoroughfare:"",subThoroughfare:"",areasOfInterest:[]};for(let o=0;o<e.address_components.length;o++)e.address_components[o].types.includes("postal_code")&&(a.postalCode=e.address_components[o].long_name),e.address_components[o].types.includes("locality")&&(a.locality=e.address_components[o].long_name),e.address_components[o].types.includes("subLocality")&&(a.subLocality=e.address_components[o].long_name),e.address_components[o].types.includes("country")&&(a.countryName=e.address_components[o].long_name,a.countryCode=e.address_components[o].short_name),e.address_components[o].types.includes("administrative_area_level_1")&&(a.administrativeArea=e.address_components[o].short_name),e.address_components[o].types.includes("administrative_area_level_2")&&(a.subAdministrativeArea=e.address_components[o].long_name),e.address_components[o].types.includes("street_number")&&(t=e.address_components[o].long_name),e.address_components[o].types.includes("route")&&(s=e.address_components[o].long_name);return a.thoroughfare=t+" "+s,a},T=e=>{if(e){console.log("selected place",z.value,H.value,I.value);const t=O(e);t.locality&&S({first:15,name:t.locality,state_code:t.administrativeArea})?.then((async e=>{const s=e.data.cities.data[0];console.log("selected city",s),A.setAddress(s.state,s,t)}))}},G=e=>{A.setAddress(e.state,e.city,e.address)},Y=(0,n.iH)(!1),j=(0,n.iH)(),M=async(e,t)=>{const s=(0,p.U)(e,(0,m.Z)());Y.value=!0,j.value=0,await X({file:s}).then((e=>{A.addPhoto({path:e?.data.filePreload.path,url:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${e?.data.filePreload.path}`},t),Y.value=!1,j.value=void 0})).catch((e=>{console.error(e),Q(),Y.value=!1,j.value=void 0}))};let Q;const{mutate:X}=(0,_.Db)(u.nu,{context:{fetchOptions:{useUpload:!0,onProgress:e=>{j.value=e.loaded/e.total*100},onAbortPossible:e=>{Q=e}}}}),R=(e,t)=>{A.deletePhoto(e),U.edit&&t&&s("on-delete-media",t)},V=()=>{W.push({name:d.N.FacilityPreview})},J=()=>{console.log("selected address",z.value,H.value,I.value),s("submit",{title:x.value,description:F.value,photos:q.value,address:{state:z.value,city:H.value,address:I.value},equipments:B.value,amenities:P.value})},K=()=>{A.clear()};return t({clearStore:K}),(e,t)=>{const s=(0,a.up)("base-input"),d=(0,a.up)("ion-text"),r=(0,a.up)("GMapAutocomplete"),u=(0,a.up)("choose-block");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,o.C_)(["inputs-form",{"inputs-form--footer-fixed":e.footerFixed}])},[(0,a._)("div",g,[(0,a.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Choose photos for gym ")])),_:1}),(0,a.Wm)(i.Z,{onUpload:M,onDelete:R,onChange:M,"circle-shape":!1,photos:q.value,loading:Y.value,progress:j.value},null,8,["photos","loading","progress"])]),(0,a._)("div",f,[(0,a.Wm)(s,{required:"",onChange:D,value:x.value,"onUpdate:value":t[0]||(t[0]=e=>x.value=e),placeholder:"Enter title for gym",label:"What’s the name of your gym"},null,8,["value"])]),(0,a._)("div",y,[(0,a.Wm)(s,{rows:3,maxlength:150,label:"Describe your gym",onChange:Z,value:F.value,"onUpdate:value":t[1]||(t[1]=e=>F.value=e),placeholder:"Enter description for gym"},null,8,["value"])]),(0,a._)("div",b,[(0,a.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Choose your gym location ")])),_:1}),(0,a._)("div",w,[(0,a.Wm)(d,{class:"address-content"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Address ")])),_:1}),I.value?.thoroughfare?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"address-content"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(`${I.value?.thoroughfare} ${I.value?.subThoroughfare}`)+", "+(0,o.zw)(`${H.value?.name}`)+", "+(0,o.zw)(`${H.value?.state?.name}`),1)])),_:1})):(0,a.kq)("",!0)]),(0,a.Wm)(r,{placeholder:"Enter your address",class:(0,o.C_)(["search-form__control",{"search-form__control--on-focus":e.isFocused}]),onPlace_changed:T},null,8,["class"])]),(0,a._)("div",k,[(0,a.Wm)((0,n.SU)(l.Q$),{class:"label"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Choose equipment and amenitites ")])),_:1}),(0,a.Wm)(u,{title:"Equipment and amenities",onHandleClick:N,value:B.value?.length+P.value?.length||""},null,8,["value"])]),(0,a._)("div",{class:(0,o.C_)(["actions-wrapper",{"actions-wrapper--fixed":e.footerFixed}])},[e.previewButton?((0,a.wg)(),(0,a.j4)((0,n.SU)(l.YG),{key:0,expand:"block",class:"secondary",onClick:V,disabled:!x.value?.length||!q.value?.length||!I.value},{default:(0,a.w5)((()=>[(0,a.Uk)(" Preview ")])),_:1},8,["disabled"])):(0,a.kq)("",!0),(0,a.Wm)((0,n.SU)(l.YG),{expand:"block",onClick:J,disabled:!x.value?.length||!q.value?.length||!I.value},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.buttonText),1)])),_:1},8,["disabled"])],2)],2),(0,a.Wm)(c.Z,{ref_key:"chooseAddressModal",ref:L,onSelect:G},null,512),(0,a.Wm)(h.Z,{ref_key:"equipmentAndAmenitiessModal",ref:E,onCancel:$},null,512)],64)}}}),C=s(83744);const S=(0,C.Z)(U,[["__scopeId","data-v-27bb06a6"]]);var W=S},45042:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});s(57658);var a=s(66252),o=s(2262),n=s(31810),l=s(22201),i=s(87394),d=s(49316),r=s(87794),c=s(61081),u=s(59205),m=s(43173),p=s(19648),_=s(75333);const v={class:"content"},h={class:"head"};var g=(0,a.aZ)({__name:"CreateFacility",setup(e){const t=(0,l.tv)(),s=(0,o.iH)(!1),g=()=>{s.value=!0},f=e=>{s.value=!1,e&&(y.value?.clearStore(),t.go(-1))},y=(0,o.iH)(null),{mutate:b,onDone:w}=(0,d.Db)(r.ZX),k=e=>{const{registration_code:t}=JSON.parse(localStorage.getItem("organization")||"{}");b({input:{name:e.title,description:e.description,address:{lat:Number(e.address.address?.latitude),lng:Number(e.address.address?.longitude),street:`${e.address.address?.thoroughfare||""}, ${e.address.address?.subThoroughfare||""}`,city_id:e.address.city?.id},media:e.photos.map(((t,s)=>({title:`${e.title}-${s}`,file:t.path}))),equipments:e.equipments.map((e=>e.id)),amenities:e.amenities.map((e=>e.id)),registration_code:t}})};w((()=>{y.value?.clearStore(),S()}));const{mutate:U,onDone:C}=(0,d.Db)(r.PO),S=()=>{(0,u.I2)([{isFacilitySetUp:!0}]);const{id:e}=(0,m.Z)(),t=localStorage.getItem(p.LX.UserSettings);U({id:e,front_settings:t})};return C((()=>{localStorage.removeItem("organization"),t.push({name:c.N.Profile})})),(e,t)=>{const l=(0,a.up)("page-header"),d=(0,a.up)("base-layout");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{"header-fixed":!1,"hide-navigation-menu":""},{header:(0,a.w5)((()=>[(0,a.Wm)(l,{onBack:g,"back-btn":"",transparent:"","buttons-transparent":""})])),content:(0,a.w5)((()=>[(0,a._)("div",v,[(0,a._)("div",h,[(0,a.Wm)((0,o.SU)(n.wd),{class:"title",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Let’s create gym profile! ")])),_:1}),(0,a.Wm)((0,o.SU)(n.yW),{color:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" To give you a better experience we need to know more about your gym ")])),_:1})]),(0,a.Wm)(i.Z,{ref_key:"gymForm",ref:y,"button-text":"Let's start!","preview-button":"",onSubmit:k},null,512)])])),_:1}),(0,a.Wm)(_.Z,{"is-open":s.value,onClose:f,title:"Do you want to discard changes?",text:"Changes will not be saved",cancelButton:"Cancel",button:"Discard changes"},null,8,["is-open"])],64)}}}),f=s(83744);const y=(0,f.Z)(g,[["__scopeId","data-v-256c417c"]]);var b=y},75333:function(e,t,s){s.d(t,{Z:function(){return _}});var a=s(66252),o=s(2262),n=s(3577),l=s(31810);const i={class:"wrapper"},d={class:"ion-padding-horizontal"},r={class:"modal__content"},c={class:"modal__footer"};var u=(0,a.aZ)({__name:"DiscardChanges",props:{isOpen:{type:Boolean},title:{default:"Do you want to discard changes?"},text:{default:"Changes will not be saved"},button:{default:"Discard changes"},cancelButton:{default:"Cancel"},hideButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e=>{t("close",Boolean(e))};return(e,t)=>((0,a.wg)(),(0,a.j4)((0,o.SU)(l.ki),{ref:"modal","is-open":e.isOpen,"backdrop-dismiss":!1},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)((0,o.SU)(l.gu),{src:"assets/icon/close.svg",onClick:t[0]||(t[0]=e=>s()),class:"close-btn"}),(0,a.Wm)((0,o.SU)(l.Xz),{class:"modal__img",src:"assets/dumbbells.png"}),(0,a._)("div",d,[(0,a.Wm)((0,o.SU)(l.wd),{class:"modal__title"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.title),1)])),_:1}),(0,a._)("div",r,[(0,a.Wm)((0,o.SU)(l.yW),{color:"secondary",class:"modal__text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.text),1)])),_:1})]),(0,a._)("div",c,[(0,a.Wm)((0,o.SU)(l.YG),{onClick:t[1]||(t[1]=e=>s()),class:"modal__button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.cancelButton),1)])),_:1}),e.hideButton?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,o.SU)(l.YG),{key:0,onClick:t[2]||(t[2]=e=>s(!0)),class:"modal__button secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.button),1)])),_:1}))])])])])),_:1},8,["is-open"]))}}),m=s(83744);const p=(0,m.Z)(u,[["__scopeId","data-v-e8a157da"]]);var _=p}}]);
//# sourceMappingURL=8987.9f50c366.js.map