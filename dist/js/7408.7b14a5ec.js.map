{"version":3,"file":"js/7408.7b14a5ec.js","mappings":"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","sources":["webpack://spotter/./src/users/views/trainers/Reviews.vue?748e","webpack://spotter/./src/users/views/trainers/Reviews.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-a5565e1e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"rating ion-padding-horizontal\" }\nconst _hoisted_2 = { class: \"rating-star\" }\nconst _hoisted_3 = { class: \"rating-star__title\" }\nconst _hoisted_4 = { class: \"tabs-holder\" }\nconst _hoisted_5 = { class: \"content ion-padding-horizontal\" }\nconst _hoisted_6 = { key: 1 }\n\nimport { IonButton, IonText, IonSpinner } from \"@ionic/vue\";\nimport { Review as UserReview } from \"@/ts/types/user\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport StarRating from \"@/users/components/StarRating.vue\";\nimport LikeRating from \"@/users/components/LikeRating.vue\";\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageTabs from \"@/general/components/PageTabs.vue\";\nimport ReviewItem from \"@/general/components/blocks/ratings/ReviewItem.vue\";\nimport GymFixed from \"@/general/components/blocks/GymFixed.vue\";\nimport { ref, computed } from \"vue\";\nimport { TabItem } from \"@/interfaces/TabItem\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport router from \"@/router\";\nimport { useQuery } from \"@vue/apollo-composable\";\nimport {\n  FeedbackEntityEnum,\n  Query,\n  Review,\n  ReviewsDocument,\n  ReviewTypeEnum,\n  UserDocument,\n} from \"@/generated/graphql\";\nimport { useRoute } from \"vue-router\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Reviews',\n  setup(__props) {\n\nconst route = useRoute();\n\nconst tabs: TabItem[] = [\n  {\n    name: ReviewTypeEnum.Recent,\n    label: \"Recent\",\n  },\n  {\n    name: ReviewTypeEnum.Positive,\n    label: \"Positive\",\n  },\n  {\n    name: ReviewTypeEnum.Negative,\n    label: \"Negative\",\n  },\n];\n\nconst activeTab = ref<ReviewTypeEnum>(ReviewTypeEnum.Recent);\n\nconst tabsChanged = (newTab: ReviewTypeEnum) => {\n  activeTab.value = newTab;\n};\n\nconst onAddReview = () => {\n  router.push({ name: EntitiesEnum.TrainingReview });\n};\n\nconst handleBack = () => {\n  router.go(-1);\n};\n\nconst { result: reviewsResult, loading: reviewLoading } = useQuery(\n  ReviewsDocument,\n  () => ({\n    id: route.params.id,\n    type: FeedbackEntityEnum.User,\n    review_type: activeTab.value,\n  })\n);\n\nconst reviews = computed(() =>\n  reviewsResult?.value?.reviews?.data.reduce(\n    (acc: UserReview[], cur: Review) => {\n      acc.push({\n        id: cur.id,\n        date: cur.created_at,\n        rating: cur.score || 0,\n        text: cur.review,\n        avatarUrl: cur.author?.avatarUrl || \"\",\n        fullName: `${cur.author?.first_name} ${cur.author?.last_name}`,\n      });\n      return acc;\n    },\n    []\n  )\n);\n\nconst { result, loading } = useQuery<Pick<Query, \"user\">>(UserDocument, {\n  id: route.params.id,\n});\n\nconst trainer = computed(() => result.value?.user);\n\nconst isAbleToAddReview = computed(\n  () => trainer.value?.was_visited_by_me && !trainer.value?.was_commented_by_me\n);\n\nconst trainerName = computed(\n  () =>\n    `${result.value?.user?.first_name} ${result.value?.user?.last_name}` || \"\"\n);\nconst trainerLocation = computed(\n  () => result.value?.user?.facilities[0]?.address?.street || \"\"\n);\n\nconst progressValue = computed(() => {\n  if (\n    trainer.value?.positive_reviews_count &&\n    trainer.value?.negative_reviews_count &&\n    trainer.value?.score\n  ) {\n    return (\n      ((trainer.value?.positive_reviews_count +\n        trainer.value?.negative_reviews_count) /\n        trainer.value?.score) *\n      100\n    );\n  } else {\n    return 0;\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, null, {\n    header: _withCtx(() => [\n      _createVNode(PageHeader, {\n        onBack: handleBack,\n        \"back-btn\": \"\",\n        title: \"Reviews\"\n      })\n    ]),\n    content: _withCtx(() => [\n      (_unref(loading))\n        ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n            key: 0,\n            name: \"lines\",\n            class: \"spinner\"\n          }))\n        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            _createElementVNode(\"div\", _hoisted_1, [\n              _createElementVNode(\"div\", _hoisted_2, [\n                _createElementVNode(\"span\", _hoisted_3, _toDisplayString(trainer.value?.score), 1),\n                _createVNode(StarRating, {\n                  \"model-value\": trainer.value?.score || 0,\n                  size: \"medium\"\n                }, null, 8, [\"model-value\"]),\n                _createVNode(_unref(IonText), {\n                  color: \"medium\",\n                  class: \"rating-star__reviews\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" based on \" + _toDisplayString(trainer.value?.reviews_count) + \" reviews \", 1)\n                  ]),\n                  _: 1\n                })\n              ]),\n              _createVNode(LikeRating, {\n                likes: trainer.value?.positive_reviews_count || 0,\n                total: trainer.value?.reviews_count || 0,\n                dislikes: trainer.value?.negative_reviews_count || 0,\n                progressValue: progressValue.value\n              }, null, 8, [\"likes\", \"total\", \"dislikes\", \"progressValue\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createVNode(PageTabs, {\n                tabs: tabs,\n                class: \"page-tabs ion-padding-horizontal\",\n                value: activeTab.value,\n                onChange: tabsChanged\n              }, null, 8, [\"value\"]),\n              _createElementVNode(\"div\", _hoisted_5, [\n                (_unref(reviewLoading))\n                  ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n                      key: 0,\n                      name: \"lines\",\n                      class: \"spinner\"\n                    }))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(reviews.value, (review) => {\n                        return (_openBlock(), _createBlock(ReviewItem, {\n                          key: review.id,\n                          class: \"review-item\",\n                          \"avatar-url\": review.avatarUrl,\n                          \"full-name\": review.fullName,\n                          date: review.date,\n                          rating: review.rating,\n                          text: review.text\n                        }, null, 8, [\"avatar-url\", \"full-name\", \"date\", \"rating\", \"text\"]))\n                      }), 128))\n                    ]))\n              ])\n            ])\n          ], 64))\n    ]),\n    footer: _withCtx(() => [\n      _createVNode(GymFixed, {\n        loading: _unref(loading),\n        title: trainerName.value,\n        location: trainerLocation.value\n      }, {\n        button: _withCtx(() => [\n          (isAbleToAddReview.value)\n            ? (_openBlock(), _createBlock(_unref(IonButton), {\n                key: 0,\n                expand: \"block\",\n                color: \"primary\",\n                class: \"fixed-holder__button\",\n                onClick: onAddReview\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\" Add review \")\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      }, 8, [\"loading\", \"title\", \"location\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Reviews.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Reviews.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Reviews.vue?vue&type=style&index=0&id=a5565e1e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a5565e1e\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","key","_defineComponent","__name","setup","__props","route","useRoute","tabs","name","ReviewTypeEnum","Recent","label","Positive","Negative","activeTab","ref","tabsChanged","newTab","value","onAddReview","router","push","EntitiesEnum","TrainingReview","handleBack","go","result","reviewsResult","loading","reviewLoading","useQuery","ReviewsDocument","id","params","type","FeedbackEntityEnum","User","review_type","reviews","computed","data","reduce","acc","cur","date","created_at","rating","score","text","review","avatarUrl","author","fullName","first_name","last_name","UserDocument","trainer","user","isAbleToAddReview","was_visited_by_me","was_commented_by_me","trainerName","trainerLocation","facilities","address","street","progressValue","positive_reviews_count","negative_reviews_count","_ctx","_cache","_openBlock","_createBlock","BaseLayout","header","_withCtx","_createVNode","PageHeader","onBack","title","content","_unref","IonSpinner","_createElementBlock","_Fragment","_createElementVNode","_toDisplayString","StarRating","size","IonText","color","default","_createTextVNode","reviews_count","_","LikeRating","likes","total","dislikes","PageTabs","onChange","_renderList","ReviewItem","footer","GymFixed","location","button","IonButton","expand","onClick","_createCommentVNode","__exports__"],"sourceRoot":""}