"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[3068],{57806:function(e,a,t){t.d(a,{A:function(){return l}});var i=t(29895);const l=(0,i.fo)("Browser",{web:()=>t.e(3805).then(t.bind(t,93805)).then((e=>new e.BrowserWeb))})},64406:function(e,a,t){t.d(a,{fy:function(){return s}});var i,l,o=t(29895);(function(e){e["Documents"]="DOCUMENTS",e["Data"]="DATA",e["Library"]="LIBRARY",e["Cache"]="CACHE",e["External"]="EXTERNAL",e["ExternalStorage"]="EXTERNAL_STORAGE"})(i||(i={})),function(e){e["UTF8"]="utf8",e["ASCII"]="ascii",e["UTF16"]="utf16"}(l||(l={}));const s=(0,o.fo)("Filesystem",{web:()=>t.e(3176).then(t.bind(t,33176)).then((e=>new e.FilesystemWeb))})},56664:function(e,a,t){var i,l,o,s;t.d(a,{GW:function(){return l},dk:function(){return o},oK:function(){return i},pA:function(){return s}}),function(e){e["Prompt"]="PROMPT",e["Camera"]="CAMERA",e["Photos"]="PHOTOS"}(i||(i={})),function(e){e["Rear"]="REAR",e["Front"]="FRONT"}(l||(l={})),function(e){e["Uri"]="uri",e["Base64"]="base64",e["DataUrl"]="dataUrl"}(o||(o={})),function(e){e["Prompt"]="PROMPT",e["Camera"]="CAMERA",e["Library"]="LIBRARY"}(s||(s={}))},79973:function(e,a,t){t.d(a,{IZ:function(){return o},dk:function(){return l.dk},oK:function(){return l.oK},pA:function(){return l.pA}});var i=t(29895),l=t(56664);const o=(0,i.fo)("CameraPro",{web:()=>t.e(4111).then(t.bind(t,24111)).then((e=>new e.CameraProWeb))})},38747:function(e,a,t){t.d(a,{s:function(){return l}});var i=t(26089);const l=(0,i.Q_)("seleted-address",{state:()=>({assignedFacility:null,hourlyRate:null,remoteHourlyRate:null,travelRadius:null,useTrainerLocation:!1,workingInGym:!1,edit:!1}),actions:{setEdit(e){this.edit=e},setAssignedFacility(e){this.assignedFacility=e},setWorkinginGym(e){this.workingInGym=e},setHourlyRate(e){this.hourlyRate=e},setRemoteHourlyRate(e){this.remoteHourlyRate=e},setTravelRadius(e){this.travelRadius=e},setUseTrainerLocation(e){this.useTrainerLocation=e},clearState(){this.assignedFacility=null,this.hourlyRate=null,this.remoteHourlyRate=null,this.travelRadius=null,this.useTrainerLocation=!1},clearAssignedFacility(){this.assignedFacility=null}}})},47209:function(e,a,t){t.d(a,{Z:function(){return _}});var i=t(66252),l=t(2262),o=t(31810),s=t(45241),n=t(79973),r=t(19312),u=t(34840);const d={class:"add-photo"},c={key:0,class:"add-photo__file__loader"};var v,p;(function(e){e["MakeAPhoto"]="MAKE_A_PHOTO",e["PhotoLibrary"]="PHOTO_LIBRARY"})(v||(v={})),function(e){e["DeletePhoto"]="DELETE_PHOTO",e["EditPhoto"]="EDIT_PHOTO"}(p||(p={}));var m=(0,i.aZ)({__name:"PhotosLoader",props:{circleShape:{type:Boolean,default:!0},photos:{},loading:{type:Boolean},progress:{},disabled:{type:Boolean,default:!1}},emits:["upload","change","delete"],setup(e,{emit:a}){const t=async(e,a)=>{const t=await o.BO.create({mode:"ios",buttons:[{text:"Take photo",data:{type:v.MakeAPhoto}},{text:"Photo library",data:{type:v.PhotoLibrary}},{text:"Cancel",role:"cancel"}]});await t.present();const{data:i}=await t.onWillDismiss(),l=i?.type,s={[v.MakeAPhoto]:()=>m(n.oK.Camera,e,a),[v.PhotoLibrary]:()=>m(n.oK.Photos,e,a)};s[l]&&s[l]()},m=async(e,a,t)=>{if((0,s.a)("capacitor")){const a=await n.IZ.requestPermissions();if(e===n.oK.Camera&&"denied"===a.camera||e===n.oK.Photos&&"denied"===a.photos){const a=await o.Cl.create({header:"Permissions denied",message:e===n.oK.Camera?"You have denied the app from using the camera":"You have denied the app access to your photos",buttons:["OK"]});return void await a.present()}}const i=await n.IZ.getPhoto({width:1e3,height:1e3,quality:100,allowEditing:!1,resultType:n.dk.Base64,source:e});_.value=`data:image/jpeg;base64,${i.base64String}`,g.value=a,y.value=t,U.value=!0},h=async(e,a)=>{const i=await o.BO.create({mode:"ios",buttons:[{text:"Delete Photo",role:"destructive",data:{type:p.DeletePhoto}},{text:"Edit Photo",data:{type:p.EditPhoto}},{text:"Cancel",role:"cancel"}]});await i.present();const{data:l}=await i.onWillDismiss(),s=l?.type,n={[p.DeletePhoto]:()=>f(e,a),[p.EditPhoto]:()=>t(e,a)};n[s]&&n[s]()},f=(e,t)=>{a("delete",e,t)},_=(0,l.iH)(""),g=(0,l.iH)(void 0),y=(0,l.iH)(void 0),U=(0,l.iH)(!1),w=e=>{U.value=e},b=e=>{void 0!==g.value?a("change",e,g.value,y.value):a("upload",e),g.value=y.value=void 0};return(e,a)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",d,[(0,i.Wm)((0,l.SU)(o.YG),{onClick:a[0]||(a[0]=e=>t()),class:"add-photo__file",expand:"block",disabled:e.loading},{default:(0,i.w5)((()=>[(0,i.Wm)((0,l.SU)(o.gu),{src:"assets/icon/payment/plus.svg",class:"add-icon"}),e.loading?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(u.Z,{percent:e.progress,class:"add-photo__img__progress"},null,8,["percent"])])):(0,i.kq)("",!0)])),_:1},8,["disabled"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.photos,((a,t)=>((0,i.wg)(),(0,i.j4)((0,l.SU)(o.YG),{key:t,class:"add-photo__img",disabled:e.loading},{default:(0,i.w5)((()=>[(0,i.Wm)((0,l.SU)(o.Xz),{onClick:e=>h(t,a.id),src:a.url},null,8,["onClick","src"])])),_:2},1032,["disabled"])))),128))]),(0,i.Wm)(r.Z,{"is-open":U.value,onSetOpen:w,file:_.value,onGetUploadedImg:b,"circle-shape":e.circleShape},null,8,["is-open","file","circle-shape"])],64))}}),h=t(83744);const f=(0,h.Z)(m,[["__scopeId","data-v-de1ede2a"]]);var _=f},55618:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});t(57658);var i=t(66252),l=t(2262),o=t(3577),s=t(31810),n=t(10121),r=t(19239),u=t(47209),d=t(67273),c=t(22201),v=t(87794),p=t(57806),m=t(43173),h=t(49316),f=t(61081),_=t(38747),g=t(8373),y=t(12954),U=t(16025),w=t(29895);const b=(0,w.fo)("FilePicker",{web:()=>t.e(593).then(t.bind(t,10593)).then((e=>new e.FilePickerWeb))});var S=t(25934),k=t(64406),E=t(47330);const P={key:1,class:"edit"},R={class:"cards__container"},W={class:"form-row"},A={key:0,class:"form-row"},D={key:1,class:"form-row"},C={key:2,class:"form-row"},L={class:"certificate-controls"},F={class:"holder-button"};var O;(function(e){e["UploadFile"]="UPLOAD_FILE",e["ViewFile"]="VIEW_FILE",e["DeleteEvent"]="DELETE_EVENT"})(O||(O={}));var H=(0,i.aZ)({__name:"EditTrainer",setup(e){const a=(0,_.s)(),t=(0,c.tv)(),{id:w}=(0,m.Z)(),H=(0,l.iH)(),N=(0,l.iH)(!1),I=(0,l.iH)(),$=(0,l.iH)([]),T=(0,l.iH)([]),Z=(0,l.iH)([]),B=(0,i.Fl)((()=>a.$state.workingInGym)),{value:M,errorMessage:q}=(0,y.U$)("firstName",g.pW),{value:G,errorMessage:x}=(0,y.U$)("lastName",g.pW),{value:V,errorMessage:Y}=(0,y.U$)("hourlyRate",g.pW),{value:K,errorMessage:j}=(0,y.U$)("remoteHourlyRate",g.pW),{mutate:Q,loading:z}=(0,h.Db)(v.ft),{mutate:X}=(0,h.Db)(v.Ck),{mutate:J}=(0,h.Db)(v.O9),{onResult:ee,refetch:ae,loading:te,result:ie}=(0,h.aM)(v.en,{id:w});(0,c.iS)(((e,t,i)=>{e.name===f.N.ChooseGymAccount?(a.setEdit(!0),i()):i()}));const{type:le}=(0,E.Z)(),oe=(0,i.Fl)((()=>a.assignedFacility)),se=()=>{t.push({name:f.N.ChooseGymAccount})},ne=async e=>{const a=(0,U.U)(e,(0,S.Z)());N.value=!0,I.value=0,await Se({file:a}).then((e=>{$.value=[{path:e?.data.filePreload.path,url:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${e?.data.filePreload.path}`,id:`_${(0,S.Z)()}`,title:(0,S.Z)()},...$.value],N.value=!1,I.value=void 0})).catch((e=>{console.error(e),be(),N.value=!1,I.value=void 0}))},re=(e,a)=>{$.value=$.value?.reduce(((e,t)=>(t.id.toString()!==a.toString()&&e.push(t),e)),[]);const t=ce.value?.find((e=>e.id.toString()===a.toString()));t&&J({id:a})};ee((async({data:e})=>{const t=a=>{const t=e?.me?.settings?.find((e=>e.setting?.code===a));return t?.value?(t.value/100).toFixed(2):"0.00"};M.value=e?.me?.first_name||"",G.value=e?.me?.last_name||"",V.value=t(v.Lm.HourlyRate),K.value=t(v.Lm.RemoteHourlyRate),e?.me?.trainer_type!==v.w3.WorkingInGym&&e?.me?.trainer_type!==v.w3.Both||a.edit||a.setAssignedFacility(e?.me?.facilities[0]),a.setWorkinginGym(e?.me?.trainer_type===v.w3.WorkingInGym||e?.me?.trainer_type===v.w3.Both),$.value=e?.me?.media?e?.me?.media.reduce(((e,a)=>(e.push({...a,url:a.pathUrl}),e)),[]):[],T.value=e?.me?.certificates?.length?[...e.me.certificates]:[],Z.value=e?.me?.weiver_and_labilities?.length?[...e.me.weiver_and_labilities]:[]}));const ue=(0,i.Fl)((()=>ie.value?.me?.certificates?[...ie.value.me.certificates]:[])),de=(0,i.Fl)((()=>ie.value?.me?.weiver_and_labilities?[...ie.value.me.weiver_and_labilities]:[])),ce=(0,i.Fl)((()=>ie.value?.me?.media?ie.value?.me?.media.reduce(((e,a)=>(e.push({...a,url:a.pathUrl}),e)),[]):[])),ve=(0,i.Fl)((()=>ie.value?.me.trainer_type)),pe=(0,i.Fl)((()=>!(q.value||x.value||!M.value||!G.value))),me=(e,a)=>e.reduce(((e,t)=>{const i=a?.filter((e=>e.id===t.id));return i?.length||e.push({file:t.path,title:t.title}),e}),[]),he=e=>e.reduce(((e,a)=>(/^_/.test(a.id)?e.push({file:a.path,title:a.title}):e.push({file:a.path,title:a.title,id:a.id}),e)),[]),fe=()=>{const e=[];return B.value?e.push({code:v.Lm.HourlyRate,value:100*Number(V.value)}):e.push({code:v.Lm.RemoteHourlyRate,value:100*Number(K.value)}),e},_e=()=>{if(pe.value){const e=me($.value,ce.value);Q({id:w,input:{avatar:e&&me($.value,ce.value)?.pop()?.file,first_name:M.value,last_name:G.value,certificates:he(T.value),weiver_and_labilities:he(Z.value),media:e&&me($.value,ce.value),settings:fe(),facility_id:oe.value?.id}}).then((async()=>{const e=await s.Mn.create({message:"Updated successfully",duration:2e3,icon:"assets/icon/success.svg",cssClass:"success-toast"});e.present(),ae()})).catch((async e=>{const a=await s.Mn.create({message:"Something went wrong. Please try again.",icon:"assets/icon/info.svg",cssClass:"danger-toast"});throw a.present(),new Error(e)}))}},ge=async(e,a="")=>{const t=await b.pickFiles({types:["application/pdf"],multiple:!1}),i=t.files[0],l=await k.fy.readFile({path:i.path}),o=(0,U.U)(`data:application/pdf;base64,${l.data}`,(0,S.Z)());te.value=!0,await Se({file:o}).then((t=>{a?e===v.ON.Certificate?T.value.map(((e,i)=>{e.id===a&&(T.value[i]={...e,path:t?.data?.filePreload?.path,pathUrl:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${t?.data.filePreload.path}`})})):Z.value.map(((e,i)=>{e.id===a&&(Z.value[i]={...e,path:t?.data?.filePreload?.path,pathUrl:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${t?.data.filePreload.path}`})})):e===v.ON.Certificate?T.value.push({path:t?.data?.filePreload?.path,pathUrl:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${t?.data.filePreload.path}`,title:i.name.split(".")[0],id:`_${(0,S.Z)()}`}):Z.value.push({path:t?.data?.filePreload?.path,pathUrl:`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${t?.data.filePreload.path}`,title:i.name.split(".")[0],id:`_${(0,S.Z)()}`})})).catch((e=>{console.error(e)})).finally((()=>{te.value=!1}))},ye=()=>{a.clearState(),t.go(-1)},Ue=(e,a)=>{if(e===v.ON.Certificate){T.value.filter((e=>e.id!==a));const e=ue.value.find((e=>e.id===a));e&&p.A.open({url:e.pathUrl})}else{Z.value.filter((e=>e.id!==a));const e=de.value.find((e=>e.id===a));e&&p.A.open({url:e.pathUrl})}},we=(e,a)=>{if(e===v.ON.Certificate){T.value.filter((e=>e.id!==a));const e=ue.value.find((e=>e.id===a));e&&X({id:a}).then((()=>{ae()}))}else{Z.value.filter((e=>e.id!==a));const e=de.value.find((e=>e.id===a));e&&X({id:a}).then((()=>{ae()}))}};let be;const{mutate:Se}=(0,h.Db)(v.nu,{context:{fetchOptions:{useUpload:!0,onProgress:e=>{H.value=e.loaded/e.total*100},onAbortPossible:e=>{be=e}}}}),ke=async(e,a)=>{const t=await s.BO.create({mode:"ios",buttons:[{text:"Upload file",data:{type:O.UploadFile}},{text:"View file",data:{type:O.ViewFile}},{text:"Delete file",role:"destructive",data:{type:O.DeleteEvent}},{text:"Cancel",role:"cancel"}]});await t.present();const{data:i}=await t.onWillDismiss(),l=i.type,o={[O.UploadFile]:()=>ge(e,a),[O.ViewFile]:()=>Ue(e,a),[O.DeleteEvent]:()=>we(e,a)};o[l]&&o[l]()};return(e,a)=>{const t=(0,i.up)("choose-block");return(0,i.wg)(),(0,i.j4)((0,l.SU)(s._i),{ref:"page"},{default:(0,i.w5)((()=>[(0,i.Wm)(n.Z,{"hide-navigation-menu":""},{header:(0,i.w5)((()=>[(0,i.Wm)(r.Z,{"back-btn":"",onBack:ye,title:"Edit trainer"})])),content:(0,i.w5)((()=>[(0,l.SU)(te)||(0,l.SU)(z)?((0,i.wg)(),(0,i.j4)((0,l.SU)(s.PQ),{key:0,name:"lines",class:"spinner"})):((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",R,[(0,i.Wm)(u.Z,{onUpload:ne,onDelete:re,onChange:ne,"circle-shape":!1,photos:$.value,loading:N.value,progress:I.value,disabled:(0,l.SU)(te)||(0,l.SU)(z)},null,8,["photos","loading","progress","disabled"])]),(0,i._)("div",W,[(0,i.Wm)(d.Z,{label:"What’s your full name",value:(0,l.SU)(M),"onUpdate:value":a[0]||(a[0]=e=>(0,l.dq)(M)?M.value=e:null),"error-message":(0,l.SU)(q),placeholder:"First Name",name:"firstName",class:"form-row__control",required:""},null,8,["value","error-message"]),(0,i.Wm)(d.Z,{value:(0,l.SU)(G),"onUpdate:value":a[1]||(a[1]=e=>(0,l.dq)(G)?G.value=e:null),"error-message":(0,l.SU)(x),placeholder:"Last Name",name:"lastName",class:"form-row__control",required:""},null,8,["value","error-message"])]),ve.value===(0,l.SU)(v.w3).WorkingInGym||ve.value===(0,l.SU)(v.w3).Both?((0,i.wg)(),(0,i.iD)("div",A,[(0,i.Wm)(d.Z,{label:"Set the hourly rate (USD $)",value:(0,l.SU)(V),"onUpdate:value":a[2]||(a[2]=e=>(0,l.dq)(V)?V.value=e:null),"error-message":(0,l.SU)(Y),placeholder:"Hourly Rate",name:"hourlyRate",required:""},null,8,["value","error-message"])])):(0,i.kq)("",!0),ve.value===(0,l.SU)(v.w3).Freelancer||ve.value===(0,l.SU)(v.w3).Both?((0,i.wg)(),(0,i.iD)("div",D,[(0,i.Wm)(d.Z,{label:"Set the remote hourly rate (USD $)",value:(0,l.SU)(K),"onUpdate:value":a[3]||(a[3]=e=>(0,l.dq)(K)?K.value=e:null),"error-message":(0,l.SU)(j),placeholder:"Remote Hourly Rate",name:"remoteHourlyRate",required:""},null,8,["value","error-message"])])):(0,i.kq)("",!0),ve.value===(0,l.SU)(v.w3).WorkingInGym?((0,i.wg)(),(0,i.iD)("div",C,[(0,i.Wm)((0,l.SU)(s.Q$),{class:"label"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Choose the gym if you work in it ")])),_:1}),(0,i.Wm)(t,{title:"Choose gym",value:oe.value?.name,onHandleClick:se,disabled:!B.value},null,8,["value","disabled"])])):(0,i.kq)("",!0),T.value.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:3},(0,i.Ko)(T.value,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"form-row",key:e.id},[(0,i.Wm)(d.Z,{class:"form-row__control",value:e.title,"onUpdate:value":a=>e.title=a,placeholder:"Enter your certification name",label:"Add certification",required:""},null,8,["value","onUpdate:value"]),(0,i.Wm)((0,l.SU)(s.Ie),{onClick:a=>ke((0,l.SU)(v.ON).Certificate,e.id),class:"form-row__control certificate-item"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,l.SU)(s.Q$),null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.path.split("/")[1])+" ",1),(0,i.Wm)((0,l.SU)(s.yW),{color:"medium"})])),_:2},1024),(0,i.Wm)((0,l.SU)(s.gu),{src:"assets/icon/pencil.svg",class:"edit__edit-icon"}),(0,i.Wm)((0,l.SU)(s.gu),{src:"assets/icon/eye.svg",color:"light",class:"edit__edit-icon"}),(0,i.Wm)((0,l.SU)(s.gu),{src:"assets/icon/trash.svg",class:"edit__edit-icon"})])),_:2},1032,["onClick"])])))),128)):(0,i.kq)("",!0),Z.value.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:4},(0,i.Ko)(Z.value,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"form-row",key:e.id},[(0,i.Wm)(d.Z,{class:"form-row__control",value:e.title,"onUpdate:value":a=>e.title=a,placeholder:"Enter your certification name",label:"Add weiver and labilities",required:"",disabled:(0,l.SU)(le)===(0,l.SU)(v.b$).Basic},null,8,["value","onUpdate:value","disabled"]),(0,i.Wm)((0,l.SU)(s.Ie),{onClick:a=>ke((0,l.SU)(v.ON).WaiverAndLabilities,e.id),class:"form-row__control certificate-item"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,l.SU)(s.Q$),null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.path.split("/")[1])+" ",1),(0,i.Wm)((0,l.SU)(s.yW),{color:"medium"})])),_:2},1024),(0,l.SU)(le)!==(0,l.SU)(v.b$).Basic?((0,i.wg)(),(0,i.j4)((0,l.SU)(s.gu),{key:0,src:"assets/icon/pencil.svg",class:"edit__edit-icon"})):(0,i.kq)("",!0),(0,i.Wm)((0,l.SU)(s.gu),{src:"assets/icon/eye.svg",color:"light",class:"edit__edit-icon"}),(0,i.Wm)((0,l.SU)(s.gu),{src:"assets/icon/trash.svg",class:"edit__edit-icon"})])),_:2},1032,["onClick"])])))),128)):(0,i.kq)("",!0),(0,i._)("div",L,[(0,i.Wm)((0,l.SU)(s.YG),{class:"secondary",expand:"block",onClick:a[4]||(a[4]=e=>ge((0,l.SU)(v.ON).Certificate))},{default:(0,i.w5)((()=>[(0,i.Uk)(" Upload certificate ")])),_:1}),(0,i.Wm)((0,l.SU)(s.YG),{class:"secondary",expand:"block",onClick:a[5]||(a[5]=e=>ge((0,l.SU)(v.ON).WaiverAndLabilities)),disabled:(0,l.SU)(le)===(0,l.SU)(v.b$).Basic},{default:(0,i.w5)((()=>[(0,i.Uk)(" Add waiver or liability ")])),_:1},8,["disabled"])]),(0,i._)("div",F,[(0,i.Wm)((0,l.SU)(s.YG),{class:"button--submit",expand:"block",onClick:_e,disabled:!pe.value},{default:(0,i.w5)((()=>[(0,i.Uk)(" Save ")])),_:1},8,["disabled"])])]))])),_:1})])),_:1},512)}}}),N=t(83744);const I=(0,N.Z)(H,[["__scopeId","data-v-070d5b0a"]]);var $=I}}]);
//# sourceMappingURL=3068.02dcf8ec.js.map