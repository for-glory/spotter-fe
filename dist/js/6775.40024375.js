"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[6775],{12432:function(e,a,t){t.d(a,{y:function(){return r}});const r=(e,a=!1)=>a?(Number(e)/100).toFixed(2):100*Number(e)},35294:function(e,a,t){t.d(a,{Z:function(){return c}});var r=t(66252),s=t(3577),i=t(2262),l=t(31810),d=(0,r.aZ)({__name:"AddressItem",props:{large:{type:Boolean,default:!1}},setup(e){return(e,a)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,s.C_)([{"address--large":e.large},"address"])},[(0,r.Wm)((0,i.SU)(l.gu),{class:(0,s.C_)([{"address__icon--large":e.large},"address__icon"]),src:"assets/icon/location.svg"},null,8,["class"]),(0,r.WI)(e.$slots,"default")],2))}}),n=t(83744);const o=(0,n.Z)(d,[["__scopeId","data-v-1aaae496"]]);var c=o},64193:function(e,a,t){t.d(a,{Z:function(){return c}});var r=t(66252),s=t(2262),i=t(3577),l=t(31810),d=(0,r.aZ)({__name:"RatingNumber",props:{color:{default:"primary"}},setup(e){return(e,a)=>((0,r.wg)(),(0,r.j4)((0,s.SU)(l.yW),{color:e.color,class:(0,i.C_)(["rating-number",`rating-number--${e.color}`]),style:(0,i.j5)({"--border-color":`var(--ion-color-${e.color})`})},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["color","class","style"]))}}),n=t(83744);const o=(0,n.Z)(d,[["__scopeId","data-v-436066f8"]]);var c=o},36775:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});t(57658);var r=t(66252),s=t(2262),i=t(3577),l=t(31810),d=t(10121),n=t(19239),o=t(35294),c=t(64193);const u=["src"],_={class:"item__holder"},v={key:0,class:"item__end"};var g=(0,r.aZ)({__name:"BaseItem",props:{title:{},avatarUrl:{},address:{},date:{},rating:{}},setup(e){return(e,a)=>((0,r.wg)(),(0,r.j4)((0,s.SU)(l.Ie),{lines:"none",class:"item"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,s.SU)(l.Bs),{class:"item__photo"},{default:(0,r.w5)((()=>[e.avatarUrl?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.avatarUrl,class:"item__img"},null,8,u)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,i.zw)(e.title.charAt(0)),1)],64))])),_:1}),(0,r._)("div",_,[(0,r._)("div",{class:(0,i.C_)(["item__header",{"item__header--offset":e.$slots.end}])},[(0,r.Wm)((0,s.SU)(l.Q$),{class:"item__title"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.title),1)])),_:1}),e.rating?((0,r.wg)(),(0,r.j4)(c.Z,{key:0},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.rating),1)])),_:1})):(0,r.kq)("",!0)],2),e.$slots.end?((0,r.wg)(),(0,r.iD)("div",v,[(0,r.WI)(e.$slots,"end")])):(0,r.kq)("",!0),e.date?((0,r.wg)(),(0,r.j4)((0,s.SU)(l.yW),{key:1,class:"item__date"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.date),1)])),_:1})):(0,r.kq)("",!0),e.address?((0,r.wg)(),(0,r.j4)(o.Z,{key:2,class:"item__address"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.address),1)])),_:1})):(0,r.kq)("",!0)])])),_:3}))}}),p=t(83744);const f=(0,p.Z)(g,[["__scopeId","data-v-35c74582"]]);var m=f,w=t(22201),k=t(49316),y=t(87794),U=t(12432),h=t(27484),b=t.n(h);const I=(e,a)=>{const t=[];switch(e?.__typename){case"TrainerRate":e.user&&t.push({id:e.user.id,date:b()(e.user.created_at).format("DD MMM"),rating:e.user.score?.toFixed(1),title:`${e.user?.first_name} ${e.user?.last_name}`,previewUrl:e.user?.avatarUrl,address:e.user?.facilities?.length?e.user?.facilities[0]?.address?.street:"Training at client's location",price:e.front_price});break;case"FacilityItem":t.push({id:e.facility.id,title:e.facility.name||"",rating:e.facility.score?.toFixed(1),date:e.facility.productItems?.length?b()(e.facility.productItems[0]?.created_at).format("DD MMM"):"",previewUrl:e?.facility?.media?.length?e?.facility?.media[0]?.pathUrl:"",address:e?.facility?.address?.street||"",price:(0,U.y)(a,!0)});break;case"Event":t.push({id:e.id,title:e.title,rating:"0.0",date:b()(e.start_date).format("DD MMM"),previewUrl:e.media?.length?e.media[0]?.pathUrl:"",address:e.address?.street,price:(0,U.y)(a,!0)});break;case"Workout":t.push({id:e.id,title:e.title,previewUrl:e.previewUrl,price:(0,U.y)(a,!0)});break;default:break}return t};var D=t(12712);const Z={key:1,class:"booking-items"};var M=(0,r.aZ)({__name:"BookingHistory",setup(e){const a=(0,w.tv)(),t=(0,s.iH)([]),o=(0,s.iH)(50),c=(0,s.iH)(1),u=(0,s.iH)(!0),{role:_}=(0,D.Z)(),v=()=>{a.go(-1)},{result:g,onResult:p,refetch:f}=(0,k.aM)(y.Ry,{first:o.value,page:c.value,state:[y.y6.Canceled]},(()=>({enabled:_===y.g8.User}))),{result:U,onResult:h}=(0,k.aM)(y.wt,{first:o.value,page:c.value,states:[y.Z3.Finished],orderBy:[{column:y.Wf.StartDate,order:y.As.Desc}]},(()=>({enabled:_===y.g8.Trainer}))),M=(0,r.Fl)((()=>g.value?.orders?.paginatorInfo.total)),W=(0,r.Fl)((()=>U.value?.trainerTrainings?.paginatorInfo?.total)),$=(0,r.Fl)((()=>M.value||W.value));p((({data:e})=>{const a=[];e?.orders?.data?.forEach((e=>{e.items.forEach((e=>{a.push(...I(e.orderable,e.price))}))})),t.value=[...t.value,...a],u.value=!1})),h((({data:e})=>{const a=[];e?.trainerTrainings?.data?.forEach((e=>{a.push({id:e.id,date:b()(e.start_date).format("DD MMM"),rating:"",title:`${e.user?.first_name} ${e.user?.last_name}`,previewUrl:e.user?.avatarUrl,address:e?.address_string||"",price:e.order?.total/100})})),t.value=[...t.value,...a],u.value=!1}));const j=e=>{c.value*o.value<Number($.value)&&(c.value=c.value+1,f({first:o.value,page:c.value}),e.target.complete())};return(e,a)=>((0,r.wg)(),(0,r.j4)(d.Z,{"hide-navigation-menu":""},{header:(0,r.w5)((()=>[(0,r.Wm)(n.Z,{"back-btn":"",title:"Booking history",onBack:v})])),content:(0,r.w5)((()=>[u.value?((0,r.wg)(),(0,r.j4)((0,s.SU)(l.PQ),{key:0,class:"spinner"})):((0,r.wg)(),(0,r.iD)("div",Z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.value,(e=>((0,r.wg)(),(0,r.j4)(m,{key:e.id,title:e.title,rating:e.rating,date:e.date,avatarUrl:e.previewUrl,address:e.address,price:e.price},{end:(0,r.w5)((()=>[(0,r.Wm)((0,s.SU)(l.yW),{class:"booking-item__price"},{default:(0,r.w5)((()=>[(0,r.Uk)(" $"+(0,i.zw)(e.price),1)])),_:2},1024)])),_:2},1032,["title","rating","date","avatarUrl","address","price"])))),128)),c.value*o.value<Number($.value)?((0,r.wg)(),(0,r.j4)((0,s.SU)(l.ju),{key:0,threshold:"100px",onIonInfinite:j},{default:(0,r.w5)((()=>[(0,r.Wm)((0,s.SU)(l.MB),{"loading-spinner":"lines","loading-text":"Loading more data..."})])),_:1})):(0,r.kq)("",!0)]))])),_:1}))}});const W=(0,p.Z)(M,[["__scopeId","data-v-55ae42e3"]]);var $=W}}]);
//# sourceMappingURL=6775.40024375.js.map