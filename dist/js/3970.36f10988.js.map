{"version":3,"file":"js/3970.36f10988.js","mappings":"qPAGA,MACMA,EAAa,CAAEC,MAAO,iBACtBC,EAAa,CACjBC,IAAK,EACLF,MAAO,WAEHG,EAAa,CAAEH,MAAO,gBACtBI,EAAa,CAAEJ,MAAO,SACtBK,EAAa,CAAEL,MAAO,UACtBM,EAAa,CAAEN,MAAO,WAa5B,OAA4BO,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,cACRC,MAAMC,GAER,MAAMC,GAASC,EAAAA,EAAAA,OAEPC,SAAUC,EAAkB,QAAEC,IAAYC,EAAAA,EAAAA,IACjDC,EAAAA,GACA,CAAC,EACD,CACCC,YAAa,aAGfJ,GAAmBK,UAClB,GAA8C,WAA1CC,EAASC,MAAMC,iBAAiBC,MAAmB,CACtD,MAAMC,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,SAAW,MAC/DD,aAAaE,QACZ,OACAJ,KAAKK,UAAU,IACXN,EACHO,gBAAiBX,EAASC,MAAMC,iBAAiBU,WACjDC,mBAAoBb,EAASC,MAAMC,iBAAiBC,SAGtDZ,EAAOuB,KAAK,CAAEC,KAAMC,EAAAA,EAAaC,sB,KAKnC,MAAMC,EAAiBA,KACTC,GAAqB,GAG3BC,OAAQD,EAAqBE,OAAQC,EAAmB3B,QAAS4B,IAAgBC,EAAAA,EAAAA,IACvFC,EAAAA,IAQF,OALAH,GAAmBI,IACfA,EAAIzB,MAAM0B,MAAMC,MACnBC,OAAOC,SAASC,KAAOL,EAAIzB,KAAK0B,MAAMC,IAAG,IAGnC,CAACI,EAAUC,KAChB,MAAMC,GAAyBC,EAAAA,EAAAA,IAAkB,eAEjD,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO1D,EAAY,EAC1D2D,EAAAA,EAAAA,IAAO3C,KAAY2C,EAAAA,EAAAA,IAAOf,KACtBa,EAAAA,EAAAA,OAAcG,EAAAA,EAAAA,KAAaD,EAAAA,EAAAA,IAAOE,EAAAA,IAAa,CAC9C1D,IAAK,EACLiC,KAAM,QACNnC,MAAO,eAERwD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOxD,EAAY,EACpD4D,EAAAA,EAAAA,IAAaP,EAAwB,CAAEQ,GAAI,KAAO,CAChDC,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBH,EAAAA,EAAAA,KAAaH,EAAAA,EAAAA,IAAOO,EAAAA,IAAS,CAC3BC,IAAK,gCACLlE,MAAO,OACPmE,IAAK,YAGTC,EAAG,KAELC,EAAAA,EAAAA,GAAoB,MAAOlE,EAAY,EACrCkE,EAAAA,EAAAA,GAAoB,MAAOjE,EAAY,EACrCyD,EAAAA,EAAAA,KAAaH,EAAAA,EAAAA,IAAOY,EAAAA,IAAU,CAAEC,MAAO,WAAa,CAClDR,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBQ,EAAAA,EAAAA,IAAiB,oDAEnBJ,EAAG,OAGPC,EAAAA,EAAAA,GAAoB,MAAOhE,EAAY,EACrCwD,EAAAA,EAAAA,KAAaH,EAAAA,EAAAA,IAAOY,EAAAA,IAAU,KAAM,CAClCP,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBQ,EAAAA,EAAAA,IAAiB,mIAEnBJ,EAAG,SAITC,EAAAA,EAAAA,GAAoB,MAAO/D,EAAY,EACrCuD,EAAAA,EAAAA,KAAaH,EAAAA,EAAAA,IAAOe,EAAAA,IAAY,CAC9BC,OAAQ,QACRC,QAASrC,GACR,CACDyB,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBQ,EAAAA,EAAAA,IAAiB,mCAEnBJ,EAAG,UAIb,CAEJ,I,WClHA,MAAMQ,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://spotter/./src/general/views/SuccessPage.vue?e99e","webpack://spotter/./src/general/views/SuccessPage.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4707f410\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"scrolled-page\" }\nconst _hoisted_2 = {\n  key: 1,\n  class: \"content\"\n}\nconst _hoisted_3 = { class: \"message-text\" }\nconst _hoisted_4 = { class: \"title\" }\nconst _hoisted_5 = { class: \"detail\" }\nconst _hoisted_6 = { class: \"buttons\" }\n\nimport { IonText, IonImg, IonButton, IonSpinner } from \"@ionic/vue\";\nimport { useRouter } from \"vue-router\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport { useMutation, useQuery } from \"@vue/apollo-composable\";\nimport {\n  MyStripeConnectDocument,\n  LinksDocument,\n} from \"@/generated/graphql\";\nimport { onMounted } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SuccessPage',\n  setup(__props) {\n\nconst router = useRouter();\n\nconst { onResult: gotMyStripeConnect, loading } = useQuery(\n\tMyStripeConnectDocument,\n\t{},\n\t{\n\t\tfetchPolicy: \"no-cache\",\n\t}\n);\ngotMyStripeConnect(async (response) => {\n\tif (response.data?.myStripeConnect?.state === \"ACTIVE\"){\n\t\tconst currentUser = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n\t\tlocalStorage.setItem(\n\t\t\t\"user\",\n\t\t\tJSON.stringify({\n\t\t\t\t...currentUser,\n\t\t\t\tstripeAccountId: response.data?.myStripeConnect?.account_id,\n\t\t\t\tstripeAccountState: response.data?.myStripeConnect?.state\n\t\t\t})\n\t\t);\n\t\trouter.push({ name: EntitiesEnum.SuccessStripeConnect });\n\t}\n});\n\n\nconst handleContinue = () => {\n\tconst link = createStripeConnect();\n};\n\nconst { mutate: createStripeConnect, onDone: goToStripeConnect, loading: linkLoading } = useMutation(\n  LinksDocument\n);\n\ngoToStripeConnect((res) => {\n\tif(res.data?.links.url)\n\twindow.location.href = res.data.links.url\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_unref(loading) || _unref(linkLoading))\n      ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n          key: 0,\n          name: \"lines\",\n          class: \"spinner\"\n        }))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createVNode(_component_router_link, { to: \"/\" }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(IonImg), {\n                src: \"assets/icon/logo-complete.png\",\n                class: \"logo\",\n                alt: \"logo\"\n              })\n            ]),\n            _: 1\n          }),\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createVNode(_unref(IonText), { color: \"primary\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\" You have successfully set up a subscription \")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createVNode(_unref(IonText), null, {\n                default: _withCtx(() => [\n                  _createTextVNode(\" Your 30 days trial is now active, you can cancel anytime before 30 days, you will not be charged until the 30 days expire. \")\n                ]),\n                _: 1\n              })\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createVNode(_unref(IonButton), {\n              expand: \"block\",\n              onClick: handleContinue\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Connect your payout method \")\n              ]),\n              _: 1\n            })\n          ])\n        ]))\n  ]))\n}\n}\n\n})","import script from \"./SuccessPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SuccessPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SuccessPage.vue?vue&type=style&index=0&id=4707f410&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4707f410\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_defineComponent","__name","setup","__props","router","useRouter","onResult","gotMyStripeConnect","loading","useQuery","MyStripeConnectDocument","fetchPolicy","async","response","data","myStripeConnect","state","currentUser","JSON","parse","localStorage","getItem","setItem","stringify","stripeAccountId","account_id","stripeAccountState","push","name","EntitiesEnum","SuccessStripeConnect","handleContinue","createStripeConnect","mutate","onDone","goToStripeConnect","linkLoading","useMutation","LinksDocument","res","links","url","window","location","href","_ctx","_cache","_component_router_link","_resolveComponent","_openBlock","_createElementBlock","_unref","_createBlock","IonSpinner","_createVNode","to","default","_withCtx","IonImg","src","alt","_","_createElementVNode","IonText","color","_createTextVNode","IonButton","expand","onClick","__exports__"],"sourceRoot":""}