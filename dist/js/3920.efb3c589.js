"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[3920],{97439:function(e,a,o){var t,n,i;o.d(a,{GW:function(){return n},dk:function(){return i},oK:function(){return t}}),function(e){e["Prompt"]="PROMPT",e["Camera"]="CAMERA",e["Photos"]="PHOTOS"}(t||(t={})),function(e){e["Rear"]="REAR",e["Front"]="FRONT"}(n||(n={})),function(e){e["Uri"]="uri",e["Base64"]="base64",e["DataUrl"]="dataUrl"}(i||(i={}))},96826:function(e,a,o){o.d(a,{V1:function(){return i},dk:function(){return n.dk},oK:function(){return n.oK}});var t=o(29895),n=o(97439);const i=(0,t.fo)("Camera",{web:()=>o.e(6806).then(o.bind(o,66806)).then((e=>new e.CameraWeb))})},75664:function(e,a,o){o.d(a,{Z:function(){return w}});var t=o(66252),n=o(3577),i=o(2262),s=o(31810),r=o(45241),l=o(96826),c=o(19312),u=o(34840);const d={key:0,class:"photo-preview"},p=["src"],g={class:"photo-preview__icon"},m=["src"],f={key:2,class:"photo-area__loader"};var h;(function(e){e["Delete"]="DELETE",e["MakeAPhoto"]="MAKE_A_PHOTO",e["PhotoLibrary"]="PHOTO_LIBRARY"})(h||(h={}));var v=(0,t.aZ)({__name:"PhotoLoader",props:{photo:{},icon:{default:"person"},circleShape:{type:Boolean,default:!1},type:{default:"default"},loading:{type:Boolean},progress:{}},emits:["change"],setup(e,{emit:a}){const o=e,v=(0,i.iH)(o.photo),P=(0,i.iH)(""),y=(0,i.iH)(!1);(0,t.YP)((()=>o.photo),(e=>{v.value=e}));const w=async()=>{const e=await s.BO.create({mode:"ios",buttons:[...v.value?[{text:"Delete photo",role:"destructive",data:{type:h.Delete}}]:[],{text:"Take photo",data:{type:h.MakeAPhoto}},{text:"Photo library",data:{type:h.PhotoLibrary}},{text:"Cancel",role:"cancel"}]});await e.present();const{data:a}=await e.onWillDismiss(),o=a.type,t={[h.Delete]:()=>b(),[h.MakeAPhoto]:()=>_(l.oK.Camera),[h.PhotoLibrary]:()=>_(l.oK.Photos)};t[o]&&t[o]()},_=async e=>{if((0,r.a)("capacitor")){const a=await l.V1.requestPermissions();if(e===l.oK.Camera&&"denied"===a.camera||e===l.oK.Photos&&"denied"===a.photos){const a=await s.Cl.create({header:"Permissions denied",message:e===l.oK.Camera?"You have denied the app from using the camera":"You have denied the app access to your photos",buttons:["OK"]});return void await a.present()}}const a=await l.V1.getPhoto({width:750,height:750,quality:100,allowEditing:!1,resultType:l.dk.Base64,source:e});P.value=`data:image/jpeg;base64,${a.base64String}`,y.value=!0},b=e=>{v.value=e,a("change",v.value)},k=e=>{y.value=e},C=e=>{b(e),y.value=!1};return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",{class:"photo-loader",onClick:w},["avatar"===e.type?((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("img",{class:(0,n.C_)(["photo-preview__img",{"photo-preview__img--empty":!v.value}]),src:v.value||`assets/icon/${e.icon}.svg`},null,10,p),(0,t._)("span",g,[(0,t.Wm)((0,i.SU)(s.gu),{src:"assets/icon/change-photo.svg"})])])):((0,t.wg)(),(0,t.j4)((0,i.SU)(s.Ie),{key:1,class:(0,n.C_)(["photo-area",{"photo-area--empty":!v.value}])},{default:(0,t.w5)((()=>[v.value?((0,t.wg)(),(0,t.iD)("img",{key:0,src:v.value,class:"photo-area__img"},null,8,m)):e.loading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)((0,i.SU)(s.gu),{key:1,src:"assets/icon/add-media.svg",class:"photo-area__add-icon"})),e.loading?((0,t.wg)(),(0,t.iD)("div",f,[(0,t.Wm)(u.Z,{percent:e.progress,class:"photo-area__progress"},null,8,["percent"])])):(0,t.kq)("",!0)])),_:1},8,["class"]))]),(0,t.Wm)(c.Z,{"is-open":y.value,onSetOpen:k,file:P.value,onGetUploadedImg:C,"circle-shape":e.circleShape},null,8,["is-open","file","circle-shape"])],64))}}),P=o(83744);const y=(0,P.Z)(v,[["__scopeId","data-v-4b607562"]]);var w=y},28768:function(e,a,o){o.r(a),o.d(a,{default:function(){return E}});o(57658);var t=o(66252),n=o(2262),i=o(10121),s=o(19239),r=o(75664),l=o(31810),c=o(61081),u=o(87042),d=o(22201),p=o(12712);const g={USER:[{name:c.N.ProfileEmail,label:"Change email"},{name:c.N.ProfilePassword,label:"Change password"},{name:c.N.ProfilePreferences,label:"Preferences"},{name:c.N.ProfileLocation,label:"Location"}],TRAINER:[{name:c.N.ProfileEditTrainer,label:"Edit trainer information"},{name:c.N.ProfileEmail,label:"Change email"},{name:c.N.ProfilePassword,label:"Change password"},{name:c.N.ProfilePronounce,label:"Pronounce"},{name:c.N.ProfileLocation,label:"Location"},{name:c.N.ProfileOrderConfirmation,label:"Order confirmation"}],FACILITY:[{name:c.N.ProfileEditGym,label:"Edit gym information"},{name:c.N.ProfileEmail,label:"Change email"},{name:c.N.ProfilePassword,label:"Change password"},{name:c.N.ProfileLocation,label:"Location"},{name:c.N.ProfileOrderConfirmation,label:"Order confirmation"}]};var m=o(16025),f=o(25934),h=o(43173),v=o(49316),P=o(87794),y=o(47330);const w={class:"profile-edit"},_={key:0,class:"profile-edit__photo"},b={class:"profile-edit__options"};var k=(0,t.aZ)({__name:"Edit",setup(e){const a=(0,n.iH)(!1),o=(0,n.iH)(""),k=(0,n.iH)(""),C=(0,n.iH)(),U=(0,d.tv)(),E=(0,d.yj)(),{type:N}=(0,y.Z)(),{id:O}=(0,h.Z)();let S;const{mutate:D}=(0,v.Db)(P.nu,{context:{fetchOptions:{useUpload:!0,onProgress:e=>{C.value=e.loaded/e.total*100},onAbortPossible:e=>{S=e}}}}),{mutate:A}=(0,v.Db)(P.ft),I=()=>{o.value=""},L=async e=>{if(!e?.length)return void M();const t=(0,m.U)(e,(0,f.Z)());a.value=!0,C.value=0,await D({file:t}).then((e=>{k.value=e?.data.filePreload.path,o.value=`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_MEDIA_URL}${e?.data.filePreload.path}`,A({id:O,input:{avatar:e?.data.filePreload.path}}).then((async()=>{const e=await l.Mn.create({message:"Image uploaded!",duration:2e3,icon:"assets/icon/success.svg",cssClass:"success-toast"});e.present(),R()})).catch((async e=>{const a=await l.Mn.create({message:"Image upload failed!",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});a.present(),console.error(e)})),a.value=!1,C.value=void 0})).catch((async e=>{const o=await l.Mn.create({message:"Image upload failed!",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});o.present(),console.error(e),S(),a.value=!1,C.value=void 0}))},M=()=>{A({id:O,input:{avatar:null}}).then((async()=>{const e=await l.Mn.create({message:"Profile Image was deleted!",duration:2e3,icon:"assets/icon/success.svg",cssClass:"success-toast"});e.present(),I(),R()})).catch((async e=>{const a=await l.Mn.create({message:"Action failed!",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});a.present(),console.error(e)}))},{onResult:Z,refetch:R,result:H,loading:T}=(0,v.aM)(P.en,{},{fetchPolicy:"network-only"});Z((({data:e})=>{o.value=e.me.avatarUrl}));const K=()=>{U.go(-1)},{role:q}=(0,p.Z)(),W=q===P.g8.OrganizationOwner||q===P.g8.FacilityOwner||q===P.g8.Manager?c.N.Facility:q,B=g[W],Y=e=>{E.query.facilityId?U.push({name:e,query:{facilityId:E.query.facilityId}}):U.push({name:e})},j={[c.N.Language]:"English",[c.N.AppMode]:"Dark mode"},F=(0,t.Fl)((()=>q===P.g8.User||q===P.g8.Trainer)),x=(0,t.Fl)((()=>H.value?.me.trainer_type));return(e,l)=>{const d=(0,t.up)("ion-spinner");return(0,t.wg)(),(0,t.j4)(i.Z,{"hide-navigation-menu":""},{header:(0,t.w5)((()=>[(0,t.Wm)(s.Z,{"back-btn":"",title:F.value?"Edit Profile":"Edit gym profile",onBack:K},null,8,["title"])])),content:(0,t.w5)((()=>[(0,t._)("div",w,[(0,n.SU)(q)===(0,n.SU)(P.g8).User?((0,t.wg)(),(0,t.iD)("div",_,[(0,t.Wm)(r.Z,{"circle-shape":"",type:"avatar",progress:C.value,loading:a.value,photo:o.value,onChange:L},null,8,["progress","loading","photo"])])):(0,t.kq)("",!0),(0,t._)("div",b,[(0,n.SU)(T)?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"spinner",name:"lines"})):((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)((0,n.SU)(B),(e=>((0,t.wg)(),(0,t.iD)(t.HY,{key:e.name},[(0,n.SU)(q)!==(0,n.SU)(P.g8).Trainer||e.name!==(0,n.SU)(c.N).ProfileLocation||x.value!==(0,n.SU)(P.w3).WorkingInGym?((0,t.wg)(),(0,t.j4)(u.Z,{key:0,title:e.label,value:j[e.value],onClick:a=>Y(e.name),class:"profile-edit__option",disabled:e.name===(0,n.SU)(c.N).ProfileOrderConfirmation&&(0,n.SU)(N)!==(0,n.SU)(P.b$).Gold},null,8,["title","value","onClick","disabled"])):(0,t.kq)("",!0)],64)))),128))])])])),_:1})}}}),C=o(83744);const U=(0,C.Z)(k,[["__scopeId","data-v-261e0bf6"]]);var E=U}}]);
//# sourceMappingURL=3920.efb3c589.js.map