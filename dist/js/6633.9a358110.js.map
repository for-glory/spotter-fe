{"version":3,"file":"js/6633.9a358110.js","mappings":"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","sources":["webpack://spotter/./src/general/components/forms/RegistrationForm.vue?3e28","webpack://spotter/./src/general/components/forms/RegistrationForm.vue","webpack://spotter/./src/general/views/Register.vue?2a4a","webpack://spotter/./src/general/views/Register.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, isRef as _isRef, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withModifiers as _withModifiers, createElementVNode as _createElementVNode, Fragment as _Fragment, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-167e328f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"mt-2\" }\n\nimport BaseInput from \"@/general/components/base/BaseInput.vue\";\nimport BaseForm from \"@/general/components/base/BaseForm.vue\";\nimport { IonButton, IonText } from \"@ionic/vue\";\nimport { EntitiesEnum } from \"@/const/routes\";\nimport { useField } from \"vee-validate\";\nimport { computed } from \"vue\";\nimport { RegisterInput } from \"@/generated/graphql\";\nimport { passwordSchema, userNameSchema, requiredFieldSchema } from \"@/validations/authValidations\";\nimport { ApolloError } from \"@apollo/client\";\nimport { humanizeString } from \"@/utils/textUtils\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RegistrationForm',\n  props: {\n    error: {},\n    isLoading: { type: Boolean }\n  },\n  emits: [\"handle-submit\"],\n  setup(__props: any, { emit: emits }) {\n\nconst props = __props;\n\n\n\n\n\nconst { value: emailInput, errorMessage: emailInputError } = useField<string>(\n  \"email\",\n  userNameSchema\n);\n\nconst { value: firstNameInput, errorMessage: firstNameInputError } = useField<string>(\n  \"first name\", requiredFieldSchema\n);\n\nconst { value: lastNameInput, errorMessage: lastNameInputError } = useField<string>(\n  \"last name\", requiredFieldSchema\n);\n\nconst { value: passwordInput, errorMessage: passwordInputError } =\n  useField<string>(\"password\", passwordSchema);\n\nconst {\n  value: passwordConfirmationInput,\n  errorMessage: passwordConfirmationError,\n} = useField<string>(\n  \"password confirmation\",\n  (inputValue) => inputValue === passwordInput.value\n);\n\nconst errorMessage = computed(() => {\n  return props.error ? humanizeString(props.error.message) : null;\n});\n\nconst isValidForm = computed(\n  () =>\n    !emailInputError.value &&\n    // !firstNameInputError.value &&\n    // !lastNameInputError.value &&\n    !passwordInputError.value &&\n    !passwordConfirmationError.value &&\n    passwordInput.value &&\n    passwordConfirmationInput.value &&\n    emailInput.value\n    // firstNameInput.value &&\n    // lastNameInput.value\n);\n\nconst onSubmit = () => {\n  if (isValidForm.value) {\n    emits(\"handle-submit\", {\n      email: emailInput.value,\n      first_name: firstNameInput.value?lastNameInput.value:\"default\",\n      last_name: lastNameInput.value?lastNameInput.value:\"default\",\n      password: passwordInput.value,\n      password_confirmation: passwordConfirmationInput.value,\n    });\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_unref(IonText), null, {\n      default: _withCtx(() => [\n        _createTextVNode(\" Already A Member? \"),\n        _createVNode(_component_router_link, {\n          to: { name: _unref(EntitiesEnum).Login }\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\" Log In \")\n          ]),\n          _: 1\n        }, 8, [\"to\"])\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(BaseForm, {\n        class: \"authentication-form\",\n        onSubmit: _withModifiers(onSubmit, [\"prevent\"])\n      }, {\n        default: _withCtx(() => [\n          _createVNode(BaseInput, {\n            value: _unref(emailInput),\n            \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(emailInput) ? (emailInput).value = $event : null)),\n            \"error-message\": _unref(emailInputError),\n            disabled: _ctx.isLoading,\n            type: \"email\",\n            placeholder: \"Enter your email\"\n          }, null, 8, [\"value\", \"error-message\", \"disabled\"]),\n          _createVNode(BaseInput, {\n            value: _unref(passwordInput),\n            \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(passwordInput) ? (passwordInput).value = $event : null)),\n            \"error-message\": _unref(passwordInputError),\n            disabled: _ctx.isLoading,\n            type: \"password\",\n            placeholder: \"Enter your password\"\n          }, null, 8, [\"value\", \"error-message\", \"disabled\"]),\n          _createVNode(BaseInput, {\n            value: _unref(passwordConfirmationInput),\n            \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(passwordConfirmationInput) ? (passwordConfirmationInput).value = $event : null)),\n            \"error-message\": _unref(passwordConfirmationError),\n            disabled: _ctx.isLoading,\n            type: \"password\",\n            placeholder: \"Enter your password again\"\n          }, null, 8, [\"value\", \"error-message\", \"disabled\"]),\n          _createVNode(_unref(IonButton), {\n            disabled: _ctx.isLoading,\n            class: \"button--submit\",\n            type: \"submit\",\n            expand: \"block\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\" Sign Up \")\n            ]),\n            _: 1\n          }, 8, [\"disabled\"]),\n          _createVNode(_Transition, null, {\n            default: _withCtx(() => [\n              (errorMessage.value)\n                ? (_openBlock(), _createBlock(_unref(IonText), {\n                    key: 0,\n                    class: \"error\",\n                    color: \"danger\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(errorMessage.value), 1)\n                    ]),\n                    _: 1\n                  }))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"onSubmit\"])\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./RegistrationForm.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RegistrationForm.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RegistrationForm.vue?vue&type=style&index=0&id=167e328f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-167e328f\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ad4aebf2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"register__container\" }\nconst _hoisted_2 = { class: \"welcome-text\" }\n\nimport { IonText } from '@ionic/vue';\nimport RegistrationForm from \"@/general/components/forms/RegistrationForm.vue\";\nimport Socials from \"@/general/components/Socials.vue\";\nimport { RegisterDocument } from \"@/graphql/documents/authDocuments\";\nimport { LoginDocument, LoginMutationVariables } from \"@/generated/graphql\";\nimport { RegisterInput, RoleEnum } from \"@/generated/graphql\";\nimport { useMutation } from \"@vue/apollo-composable\";\nimport { useRouter } from \"vue-router\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport { setAuthItems } from \"@/router/middleware/auth\";\nimport navigationAfterAuth from \"../helpers/navigationAfterLogin\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Register',\n  setup(__props) {\n\nconst {\n  mutate: register,\n  onDone,\n  loading,\n  error,\n} = useMutation(RegisterDocument);\n\nlet {\n  mutate: login,\n  onDone: loginDone,\n  onError,\n} = useMutation(LoginDocument);\n\nconst handleSubmit = async (\n  form: Pick<RegisterInput, \"email\" | \"first_name\" | \"last_name\" | \"password\" | \"password_confirmation\">\n) => {\n  await register({ ...form, role: RoleEnum.User });\n  localStorage.setItem(\"temporary_email\", JSON.stringify(form.email));\n  await login({ username: form.email, password: form.password });\n};\n\nconst router = useRouter();\n\nonDone(({ data, errors }) => {\n\n  if(data){\n    // router.push({\n    //   name: EntitiesEnum.CheckEmail,\n    // });\n  } else if(errors){\n    let error :any = errors\n    \n    if(error[0].extensions.validation == 'unique'){\n      throw new Error(error[0].message)\n    }\n  }\n});\n\nloginDone(({ data, errors }) => {\n  if(!data && errors){\n    throw new Error(String(errors[0].extensions.reason))\n  }\n  setAuthItems(data.login);\n\n  router.push({\n    name: EntitiesEnum.CheckEmail,\n  });\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(IonText), null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Sign up and Create Your Profile\")\n        ]),\n        _: 1\n      })\n    ]),\n    _createVNode(RegistrationForm, {\n      \"is-loading\": _unref(loading),\n      error: _unref(error),\n      onHandleSubmit: handleSubmit\n    }, null, 8, [\"is-loading\", \"error\"]),\n    _createVNode(Socials)\n  ]))\n}\n}\n\n})","import script from \"./Register.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Register.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=ad4aebf2&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ad4aebf2\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_defineComponent","__name","props","error","isLoading","type","Boolean","emits","setup","__props","emit","value","emailInput","errorMessage","emailInputError","useField","userNameSchema","firstNameInput","firstNameInputError","requiredFieldSchema","lastNameInput","lastNameInputError","passwordInput","passwordInputError","passwordSchema","passwordConfirmationInput","passwordConfirmationError","inputValue","computed","humanizeString","message","isValidForm","onSubmit","email","first_name","last_name","password","password_confirmation","_ctx","_cache","_component_router_link","_resolveComponent","_openBlock","_createElementBlock","_Fragment","_createVNode","_unref","IonText","default","_withCtx","_createTextVNode","to","name","EntitiesEnum","Login","_","_createElementVNode","BaseForm","_withModifiers","BaseInput","$event","_isRef","disabled","placeholder","IonButton","expand","_Transition","_createBlock","key","color","_toDisplayString","_createCommentVNode","__exports__","_hoisted_2","mutate","register","onDone","loading","useMutation","RegisterDocument","login","loginDone","onError","LoginDocument","handleSubmit","async","form","role","RoleEnum","User","localStorage","setItem","JSON","stringify","username","router","useRouter","data","errors","extensions","validation","Error","String","reason","setAuthItems","push","CheckEmail","RegistrationForm","onHandleSubmit","Socials"],"sourceRoot":""}