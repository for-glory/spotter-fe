{"version":3,"file":"js/1303.3d79bc1a.js","mappings":"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","sources":["webpack://spotter/./src/users/views/orders/PaymentSuccessfull.vue?3667","webpack://spotter/./src/users/views/orders/PaymentSuccessfull.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createVNode as _createVNode, withCtx as _withCtx, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-555d119b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"order__head\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"order__title\" }, \" Payment Complete! \", -1))\nconst _hoisted_3 = { class: \"order__description\" }\nconst _hoisted_4 = { class: \"buttons__container\" }\n\nimport { useRouter, useRoute } from \"vue-router\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport OrderItem from \"@/users/components/Order.vue\";\nimport { IonButton, toastController } from \"@ionic/vue\";\nimport { useQuery } from \"@vue/apollo-composable\";\nimport {\n  EventDocument,\n  FacilityDocument,\n  GetCartDocument,\n  UserDocument,\n} from \"@/generated/graphql\";\nimport { computed } from \"vue\";\nimport { IonSpinner } from \"@ionic/vue\";\nimport { paymentGatewaysStore } from \"@/users/store/paymentGatewaysStore\";\nimport dayjs from \"dayjs\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PaymentSuccessfull',\n  setup(__props) {\n\nconst router = useRouter();\nconst route = useRoute();\nconst store = paymentGatewaysStore();\n\nconst { result, loading: getCartLoading } = useQuery(GetCartDocument, {\n  id: route?.query?.cartId,\n});\n\nconst item = computed(() => result.value?.getCart?.items[0]?.productable);\n\nconst sessionQuantity = computed(() =>\n  result.value?.getCart?.items[0]?.productable?.is_unlimited_checkin\n    ? \"Unlimit Sessions\"\n    : `${result.value?.getCart?.items[0]?.productable?.checkin_counter} Session`\n);\n\nconst isFacility = computed(\n  () => route.query.session === EntitiesEnum.Facility.toLowerCase()\n);\n\nconst orderDate = computed(() =>\n  isFacility.value ? result.value?.getCart?.start_date : item.value?.start_date\n);\n\nconst { result: facilityResult } = useQuery(\n  FacilityDocument,\n  {\n    id: route.params.id,\n  },\n  () => ({\n    enabled: route?.query?.session === EntitiesEnum.Facility.toLowerCase(),\n  })\n);\n\nconst { result: userResult, loading } = useQuery(\n  UserDocument,\n  {\n    id: route.params.id,\n  },\n  () => ({\n    enabled: route?.query?.session === EntitiesEnum.Trainer.toLowerCase(),\n  })\n);\n\nconst curSession =\n  route.query.session === EntitiesEnum.Trainer.toLowerCase()\n    ? route.query.session\n    : \"session\";\n\nconst order = computed(() => {\n  let result;\n\n  switch (route?.query?.session) {\n    case EntitiesEnum.Trainer.toLowerCase():\n      result = userResult.value?.user;\n      break;\n    case EntitiesEnum.Facility.toLowerCase():\n      result = facilityResult.value?.facility;\n      break;\n    case EntitiesEnum.Event.toLowerCase():\n      result = eventResult.value?.event;\n      break;\n    default:\n      break;\n  }\n  return result;\n});\n\nconst { result: eventResult } = useQuery(EventDocument, {\n  id: route.params.id,\n});\n\nconst time = computed(() =>\n  dayjs(new Date(item.value?.start_date)).format(\"hh:mm A\")\n);\n\nconst handleClick = () => {\n  store.clearCart();\n  router.push({\n    name: EntitiesEnum.Facilities,\n  });\n};\n\nconst handleRemind = async () => {\n  const startDate = isFacility.value\n    ? new Date(result.value?.getCart?.start_date)\n    : new Date(item.value?.start_date);\n  const endDate = new Date(item.value?.end_date);\n  const title = item.value.title;\n  const eventLocation = order.value.address?.street;\n  const notes =\n    route?.query?.session === EntitiesEnum.Trainer.toLocaleLowerCase()\n      ? \"Upcoming training\"\n      : \"Upcoming event\";\n  const success = function () {\n    store.clearCart();\n    store.setValue(\"isOpenWaitingModal\", false);\n    router.push({\n      name: EntitiesEnum.Facilities,\n    });\n  };\n  const error = async function (message: string) {\n    const toast = await toastController.create({\n      message,\n      duration: 2000,\n      icon: \"assets/icon/info.svg\",\n      cssClass: \"danger-toast\",\n    });\n    toast.present();\n  };\n\n  window?.plugins?.calendar.createEventInteractively(\n    title,\n    eventLocation,\n    notes,\n    startDate,\n    endDate,\n    success,\n    error\n  );\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_unref(loading) || _unref(getCartLoading))\n    ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n        key: 0,\n        name: \"lines\",\n        class: \"spinner\"\n      }))\n    : (_openBlock(), _createBlock(BaseLayout, { key: 1 }, {\n        content: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _hoisted_2,\n            _createElementVNode(\"span\", _hoisted_3, \" You've successfully booked your \" + _toDisplayString(_unref(curSession)), 1),\n            _createTextVNode(\" \" + _toDisplayString(item.value.start_date), 1)\n          ]),\n          _createVNode(OrderItem, {\n            \"hide-price\": \"\",\n            \"hide-title\": \"\",\n            class: \"order\",\n            \"date-format\": \"D MMMM YYYY - dddd\",\n            type: _unref(route)?.query?.session?.toUpperCase(),\n            item: order.value,\n            \"time-section-title\": isFacility.value ? 'Session quantity' : 'Time',\n            \"order-date\": orderDate.value,\n            \"order-time\": isFacility.value ? sessionQuantity.value : time.value\n          }, null, 8, [\"type\", \"item\", \"time-section-title\", \"order-date\", \"order-time\"])\n        ]),\n        footer: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_4, [\n            (!isFacility.value)\n              ? (_openBlock(), _createBlock(_unref(IonButton), {\n                  key: 0,\n                  class: \"secondary\",\n                  onClick: handleRemind\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Remind me\")\n                  ]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_unref(IonButton), {\n              onClick: handleClick,\n              class: _normalizeClass([\"submit-btn\", { 'full-width-btn': isFacility.value }])\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"Got it\")\n              ]),\n              _: 1\n            }, 8, [\"class\"])\n          ])\n        ]),\n        _: 1\n      }))\n}\n}\n\n})","import script from \"./PaymentSuccessfull.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PaymentSuccessfull.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PaymentSuccessfull.vue?vue&type=style&index=0&id=555d119b&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-555d119b\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_defineComponent","__name","setup","__props","router","useRouter","route","useRoute","store","paymentGatewaysStore","result","loading","getCartLoading","useQuery","GetCartDocument","id","query","cartId","item","computed","value","getCart","items","productable","sessionQuantity","is_unlimited_checkin","checkin_counter","isFacility","session","EntitiesEnum","Facility","toLowerCase","orderDate","start_date","facilityResult","FacilityDocument","params","enabled","userResult","UserDocument","Trainer","curSession","order","user","facility","Event","eventResult","event","EventDocument","time","dayjs","Date","format","handleClick","clearCart","push","name","Facilities","handleRemind","async","startDate","endDate","end_date","title","eventLocation","address","street","notes","toLocaleLowerCase","success","setValue","error","message","toast","toastController","create","duration","icon","cssClass","present","window","plugins","calendar","createEventInteractively","_ctx","_cache","_unref","_openBlock","_createBlock","IonSpinner","key","BaseLayout","content","_withCtx","_toDisplayString","_createTextVNode","_createVNode","OrderItem","type","toUpperCase","footer","_createCommentVNode","IonButton","onClick","default","_","_normalizeClass","__exports__"],"sourceRoot":""}