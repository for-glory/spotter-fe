"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[7580],{48218:function(e,a,t){t.d(a,{E:function(){return i},T:function(){return n}});var s=t(61081);const n=[{name:s.N.ActivitiesNearby,label:"Nearby"},{name:s.N.MyTraining,label:"Events"}],i=[{name:s.N.Trainings,label:"Trainings"},{name:s.N.Events,label:"Events"}]},77314:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});t(57658);var s=t(66252),n=t(2262),i=t(3577),l=t(10121),r=t(19239),u=t(9913),o=t(31810),c=t(61081),v=t(54354),d=t(87794),m=t(49316),g=t(27893),_=t(99313),h=t(91389),p=t(27484),f=t.n(p),y=t(22201),k=t(48218),b=t(43173),w=t(82544);const S={class:"dashboard"},U={class:"dashboards-items"},N={class:"rating__container"},Y={class:"events__container"};var T=(0,s.aZ)({__name:"Index",setup(e){const a=(0,y.tv)(),{id:t}=(0,b.Z)(),{result:p,loading:T,refetch:H}=(0,m.aM)(d.jb,{page:0,first:4,created_by_trainer:t,start_date:{from:f()().format("YYYY-MM-DD HH:mm:ss"),to:f()().add(1,"M").format("YYYY-MM-DD HH:mm:ss")},orderBy:[{column:d.vA.StartDate,order:d.As.Asc}]},{fetchPolicy:"no-cache"}),{result:M,loading:Z,refetch:D}=(0,m.aM)(d.wt,{page:0,first:4,filters:{start_date:f()().format("YYYY-MM-DD HH:mm:ss"),states:[d.Z3.Accepted,d.Z3.Started]},orderBy:[{column:d.Wf.StartDate,order:d.As.Asc}]},{fetchPolicy:"no-cache"}),{result:W}=(0,m.aM)(d.o,{},{fetchPolicy:"no-cache"}),E=(0,s.Fl)((()=>W?.value?.me||[])),A=(0,s.Fl)((()=>[{value:`+$${E?.value?.trainer_dashboard_stats?.earn_last_thirty_days||0}`,description:"last 30 days"},{value:`+$${E?.value?.trainer_dashboard_stats?.total_earn||0}`,description:"total earnings"},{value:`${E?.value?.trainer_dashboard_stats?.total_bookings||0}`,description:"total bookings"}])),$=(0,s.Fl)((()=>[{value:E?.value?.reviews_count||0,description:"total feedbacks"},{value:`${5*E?.value?.positive_reviews_count/E?.value?.reviews_count||0} / 5`,description:"general rating"}])),{result:C}=(0,m.aM)(d.MF,{id:t,from:f()().startOf("w").format("YYYY-MM-DD HH:mm:ss"),to:f()().endOf("w").format("YYYY-MM-DD HH:mm:ss")},{fetchPolicy:"no-cache"}),F=(0,s.Fl)((()=>p?.value?.events?.data?p.value.events.data:[])),I=(0,s.Fl)((()=>M?.value?.trainerTrainings?.data?M.value.trainerTrainings.data.map((e=>({id:e.id,title:`${e.user.first_name} ${e.user.last_name}`,address:{street:e.user.address?.street},media:e.user.media,start_date:e.start_date,state:e.state,userId:e.user.id}))):[])),j=(0,s.Fl)((()=>{const e=[];if(C&&C?.value){const a=C?.value?.userAvailability;if(a&&a?.events){const{events:t}=a,s=t.map((e=>({start_date:e?.start_date||null})));e.push(...s)}if(a&&a?.trainings){const{trainings:t}=a,s=t.filter((e=>e.state===d.Z3.Accepted)).map((e=>({start_date:e?.start_date||null})));e.push(...s)}}return e})),P=k.E,V=(0,n.iH)(null),q=(0,n.iH)(localStorage.getItem("trainer_schedule_active_tab")??c.N.Trainings),x=e=>{e&&(q.value=e),localStorage.setItem("trainer_schedule_active_tab",q.value),q.value===c.N.Events?H():D()},z=(0,s.Fl)((()=>q.value===c.N.Events?"events":"trainings")),B=()=>{a.push({name:c.N.TrainersUpcomingTrainings})},K=()=>{a.push({name:c.N.TrainerScheduleCalendar})},O=(e,t,s)=>{if(t===d.Z3.Started)return a.push({name:c.N.Session,params:{id:e},query:{userId:s,type:c.N.Training}});a.push({name:c.N.Training,params:{id:e}})},Q=e=>{a.push({name:c.N.TrainersEventTraining,params:{id:e}})};return(e,a)=>((0,s.wg)(),(0,s.j4)(l.Z,null,{header:(0,s.w5)((()=>[(0,s.Wm)(r.Z,{title:"Schedule"})])),content:(0,s.w5)((()=>[(0,s._)("div",S,[(0,s._)("div",U,[(0,s.Wm)(u.Z,{items:A.value},{title:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.gu),{src:"assets/icon/activity.svg",class:"activity-icon"}),(0,s.Uk)(" Activity ")])),_:1},8,["items"]),(0,s.Wm)(u.Z,{items:$.value},{title:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.gu),{src:"assets/icon/trophy.svg",class:"trophy-icon"}),(0,s.Uk)(" Rating ")])),bottom:(0,s.w5)((()=>[(0,s._)("div",N,[(0,s.Wm)((0,n.SU)(o.yW),{class:"rating-likes"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(E.value?.positive_reviews_count||0)+" ",1),(0,s.Wm)((0,n.SU)(o.gu),{class:"like-icon",src:"assets/icon/like.svg"})])),_:1}),(0,s.Wm)((0,n.SU)(o.yW),{class:"rating-dislikes"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(E.value?.negative_reviews_count||0)+" ",1),(0,s.Wm)((0,n.SU)(o.gu),{class:"dislike-icon",src:"assets/icon/dislike.svg"})])),_:1})])])),_:1},8,["items"])]),(0,s.Wm)(h.Z,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),bookings:j.value,onHandleView:K},null,8,["modelValue","bookings"]),(0,s._)("div",Y,[(0,s.Wm)(_.Z,{title:"Upcoming "+(q.value===(0,n.SU)(c.N).Events?"events":"trainings"),onHandleView:B,"hide-view-more":(0,n.SU)(Z)||(0,n.SU)(T)||q.value===(0,n.SU)(c.N).Trainings&&!I.value?.length||q.value===(0,n.SU)(c.N).Events&&!F.value?.length},null,8,["title","hide-view-more"]),q.value===(0,n.SU)(c.N).Trainings&&(0,n.SU)(Z)||q.value===(0,n.SU)(c.N).Events&&(0,n.SU)(T)?((0,s.wg)(),(0,s.j4)((0,n.SU)(o.PQ),{key:0,name:"lines",class:"spinner"})):q.value===(0,n.SU)(c.N).Trainings&&!I.value.length||q.value===(0,n.SU)(c.N).Events&&!F.value.length?((0,s.wg)(),(0,s.j4)(w.Z,{key:1,"hide-button":"",icon:"assets/icon/empty.svg",title:`Sorry, no ${z.value} found`,text:`Currently you have no booked ${z.value}`},null,8,["title","text"])):((0,s.wg)(),(0,s.iD)(s.HY,{key:2},[q.value===(0,n.SU)(c.N).Trainings?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(I.value,(e=>((0,s.wg)(),(0,s.j4)(g.Z,{key:e.id,item:e,rounded:"",onClick:a=>O(e.id,e.state,e.userId)},null,8,["item","onClick"])))),128)):(0,s.kq)("",!0),q.value===(0,n.SU)(c.N).Events?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(F.value,(e=>((0,s.wg)(),(0,s.j4)(g.Z,{key:e.id,item:e,onClick:a=>Q(e.id)},null,8,["item","onClick"])))),128)):(0,s.kq)("",!0)],64))]),(0,s.Wm)(v.Z,{tabs:(0,n.SU)(P),class:"page-tabs",value:q.value,onChange:x},null,8,["tabs","value"])])])),_:1}))}}),H=t(83744);const M=(0,H.Z)(T,[["__scopeId","data-v-3ba849b3"]]);var Z=M}}]);
//# sourceMappingURL=7580.a3b9e5ad.js.map