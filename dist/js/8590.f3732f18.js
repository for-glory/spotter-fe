"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[8590],{9189:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(87794),s=a(12712);function l(){const{role:e}=(0,s.Z)();if(e!==n.g8.Manager&&e!==n.g8.FacilityOwner&&e!==n.g8.OrganizationOwner)return{};const{facilities:t,owned_facilities:a}=JSON.parse(localStorage.getItem("user")||"{}"),l=e===n.g8.Manager?t[0]:a[0];return{id:l?.id}}},35294:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(66252),s=a(3577),l=a(2262),i=a(31810),r=(0,n.aZ)({__name:"AddressItem",props:{large:{type:Boolean,default:!1}},setup(e){return(e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)([{"address--large":e.large},"address"])},[(0,n.Wm)((0,l.SU)(i.gu),{class:(0,s.C_)([{"address__icon--large":e.large},"address__icon"]),src:"assets/icon/location.svg"},null,8,["class"]),(0,n.WI)(e.$slots,"default")],2))}}),o=a(83744);const d=(0,o.Z)(r,[["__scopeId","data-v-1aaae496"]]);var c=d},82544:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(66252),s=a(2262),l=a(3577),i=a(31810);const r={class:"empty-block"},o={class:"empty-block__img"};var d=(0,n.aZ)({__name:"EmptyBlock",props:{title:{},text:{},buttonText:{},hideButton:{type:Boolean},icon:{default:"assets/icon/shore-run.svg"}},emits:["buttonClick"],setup(e,{emit:t}){return(e,a)=>((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",null,[(0,n._)("div",o,[(0,n.Wm)((0,s.SU)(i.gu),{src:e.icon},null,8,["src"])]),(0,n.Wm)((0,s.SU)(i.wd),{class:"empty-block__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.title),1)])),_:1}),(0,n.Wm)((0,s.SU)(i.yW),{color:"medium",class:"empty-block__text"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.text),1)])),_:1}),e.hideButton?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,s.SU)(i.YG),{key:0,class:"button",expand:"block",color:"primary",onClick:a[0]||(a[0]=e=>t("buttonClick"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.buttonText),1)])),_:1}))])]))}}),c=a(83744);const u=(0,c.Z)(d,[["__scopeId","data-v-776b8fd0"]]);var m=u},27893:function(e,t,a){a.d(t,{Z:function(){return p}});var n=a(66252),s=a(2262),l=a(3577),i=a(31810),r=a(35294),o=a(27484),d=a.n(o);const c=["src"],u={class:"event__holder"},m={key:0,class:"event__time"};var _=(0,n.aZ)({__name:"EventItem",props:{item:{},rounded:{type:Boolean,default:!1},dateRange:{type:Boolean},hideTime:{type:Boolean}},setup(e){const t=e,a=(0,n.Fl)((()=>d()(t.item.start_date).format(t.dateRange&&d()(t.item.start_date).year()!==d()(t.item.end_date).year()?"D MMM YYYY":"D MMMM"))),o=(0,n.Fl)((()=>d()(t.item.end_date).format(t.dateRange&&d()(t.item.start_date).year()!==d()(t.item.end_date).year()?"D MMM YYYY":"D MMMM"))),_=(0,n.Fl)((()=>d()(t.item.start_date).format("hh:mm A")));return(e,t)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(i.Ie),{lines:"none",class:(0,l.C_)(["event",{"event--time-hidden":e.hideTime}])},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(i.Bs),{class:(0,l.C_)([{"event__photo--rounded":e.rounded},"event__photo"])},{default:(0,n.w5)((()=>[e.item?.media?.length&&e.item.media[0]?.pathUrl?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.item.media[0].pathUrl,class:"event__img"},null,8,c)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)((0,l.zw)(e.item.title?.charAt(0)),1)],64))])),_:1},8,["class"]),(0,n._)("div",u,[(0,n.Wm)((0,s.SU)(i.Q$),{class:"event__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.item.title),1)])),_:1}),e.dateRange||e.hideTime?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)((0,s.SU)(i.gu),{src:"assets/icon/time.svg",class:"time-icon"}),(0,n.Uk)(" "+(0,l.zw)(_.value),1)])),e.hideTime?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,s.SU)(i.yW),{key:1,class:"event__date"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(a.value)+" ",1),e.dateRange?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)("- "+(0,l.zw)(o.value),1)],64)):(0,n.kq)("",!0)])),_:1})),e.item.address?.street?((0,n.wg)(),(0,n.j4)(r.Z,{key:2,class:"event__address"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.item.address?.street),1)])),_:1})):(0,n.kq)("",!0)])])),_:1},8,["class"]))}}),v=a(83744);const g=(0,v.Z)(_,[["__scopeId","data-v-39053960"]]);var p=g},58590:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});a(57658);var n=a(66252),s=a(2262),l=a(3577),i=a(31810),r=a(10121),o=a(19239),d=a(27893),c=a(61081),u=a(87794),m=a(49316),_=a(82544),v=a(22201),g=a(43173),p=a(9189),k=a(12712),w=(0,n.aZ)({__name:"Index",setup(e){const t=(0,s.iH)(1),a=(0,s.iH)(0),{id:w}=(0,g.Z)(),{id:f}=(0,p.Z)(),{role:h}=(0,k.Z)(),y=h===u.g8.Trainer?{created_by_trainer:w}:{created_by_facility:f},U={first:8,page:t.value,orderBy:[{column:u.vA.StartDate,order:u.As.Asc}],...y},{onResult:S,loading:Z,refetch:b}=(0,m.aM)(u.jb,U,{fetchPolicy:"no-cache"}),M=(0,s.iH)([]);S((e=>{a.value=e.data.events?.paginatorInfo.total??0,M.value?.length||(M.value=e.data.events?.data)}));const C=(0,v.tv)(),D=e=>{C.push({name:c.N.EventsDetailed,params:{id:e}})},Y=e=>{M.value.length<a.value&&(t.value++,b({first:8,page:t.value,orderBy:[{column:u.vA.StartDate,order:u.As.Asc}],...y})?.then((t=>{M.value=[...M.value,...t.data.events?.data??[]],e.target.complete()})))};return(e,u)=>((0,n.wg)(),(0,n.j4)(r.Z,null,{header:(0,n.w5)((()=>[(0,n.Wm)(o.Z,{title:"Events"},{"custom-btn":(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(i.YG),{class:"header-btn",onClick:u[0]||(u[0]=e=>(0,s.SU)(C).push({name:(0,s.SU)(c.N).CreateEvent}))},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(i.gu),{src:"assets/icon/plus.svg"})])),_:1})])),_:1})])),content:(0,n.w5)((()=>[(0,n._)("div",{class:(0,l.C_)(["holder-content ion-padding-horizontal",{"holder-content--empty":!(0,s.SU)(Z)&&!M.value.length}])},[1===t.value&&(0,s.SU)(Z)?((0,n.wg)(),(0,n.j4)((0,s.SU)(i.PQ),{key:0,name:"lines",class:"spinner"})):(0,n.kq)("",!0),(0,s.SU)(Z)||M.value.length?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(_.Z,{key:1,title:"Empty here","button-text":"Create first event",text:"You have not created any event yet...",onButtonClick:u[1]||(u[1]=e=>(0,s.SU)(C).push({name:(0,s.SU)(c.N).CreateEvent}))})),M.value.length?((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(M.value,(e=>((0,n.wg)(),(0,n.j4)(d.Z,{item:e,key:e.id,onClick:t=>D(e.id)},null,8,["item","onClick"])))),128)),M.value.length<a.value?((0,n.wg)(),(0,n.j4)((0,s.SU)(i.ju),{key:0,threshold:"100px",class:"infinite-scroll",onIonInfinite:Y},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(i.MB),{"loading-spinner":"lines","loading-text":"Loading more data..."})])),_:1})):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0)],2)])),_:1}))}}),f=a(83744);const h=(0,f.Z)(w,[["__scopeId","data-v-62e26ab8"]]);var y=h}}]);
//# sourceMappingURL=8590.f3732f18.js.map