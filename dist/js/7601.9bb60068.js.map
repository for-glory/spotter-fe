{"version":3,"file":"js/7601.9bb60068.js","mappings":"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","sources":["webpack://spotter/./src/general/views/profile/Preferences.vue?695b","webpack://spotter/./src/general/views/profile/Preferences.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-700d29ad\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"preferences\" }\nconst _hoisted_2 = {\n  key: 1,\n  class: \"radiobutton__group\"\n}\nconst _hoisted_3 = { class: \"radiobutton__container\" }\nconst _hoisted_4 = { class: \"radiobutton__container\" }\n\nimport {\n  IonRadioGroup,\n  IonItem,\n  IonRadio,\n  IonSpinner,\n  toastController,\n} from \"@ionic/vue\";\nimport { MeDocument } from \"@/generated/graphql\";\nimport BaseLayout from \"@/general/components/base/BaseLayout.vue\";\nimport PageHeader from \"@/general/components/blocks/headers/PageHeader.vue\";\nimport { useRouter } from \"vue-router\";\nimport { UpdateUserDocument, SettingsCodeEnum } from \"@/generated/graphql\";\nimport { ref } from \"vue\";\nimport { useMutation, useQuery } from \"@vue/apollo-composable\";\nimport { EntitiesEnum } from \"@/const/entities\";\nimport useId from \"@/hooks/useId\";\nimport {\n  IonRadioGroupCustomEvent,\n  RadioGroupChangeEventDetail,\n} from \"@ionic/core\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Preferences',\n  setup(__props) {\n\nconst selectedItem = ref(\"\");\nconst router = useRouter();\n\nconst { id } = useId();\n\nconst { onResult, refetch, loading } = useQuery(\n  MeDocument,\n  { id },\n  {\n    fetchPolicy: \"no-cache\",\n  }\n);\n\nonResult(({ data }) => {\n  selectedItem.value = data.me?.settings?.find(\n    (setting: any) =>\n      setting.setting.code === SettingsCodeEnum.DisplayPreference\n  )?.value;\n});\n\nconst { mutate } = useMutation(UpdateUserDocument);\n\nconst showToast = async (msg: string, key: string, icon: string) => {\n  const toast = await toastController.create({\n    message: msg,\n    duration: 2000,\n    icon: `assets/icon/${icon}.svg`,\n    cssClass: `${key}-toast`,\n  });\n  return toast.present();\n};\n\nconst onChange = (\n  ev: IonRadioGroupCustomEvent<RadioGroupChangeEventDetail<string>>\n) => {\n  selectedItem.value = ev.target.value;\n  mutate({\n    id,\n    input: {\n      settings: [\n        {\n          code: SettingsCodeEnum.DisplayPreference,\n          value: ev.target.value,\n        },\n      ],\n    },\n  })\n    .then(() => {\n      refetch();\n      showToast(\"Preferences succesfully updated\", \"success\", \"success\");\n    })\n    .catch(() => {\n      showToast(\"Something went wrong. Try again.\", \"danger\", \"info\");\n    });\n};\n\nconst onBack = () => {\n  router.go(-1);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(BaseLayout, { \"hide-navigation-menu\": \"\" }, {\n    header: _withCtx(() => [\n      _createVNode(PageHeader, {\n        \"back-btn\": \"\",\n        title: \"Preferences\",\n        onBack: onBack\n      })\n    ]),\n    content: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        (_unref(loading))\n          ? (_openBlock(), _createBlock(_unref(IonSpinner), {\n              key: 0,\n              class: \"spinner\"\n            }))\n          : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n              _createVNode(_unref(IonRadioGroup), {\n                onIonChange: _cache[0] || (_cache[0] = ($event: any) => (onChange($event))),\n                value: selectedItem.value\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createVNode(_unref(IonItem), { class: \"radiobutton\" }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\" Display gyms \"),\n                        _createVNode(_unref(IonRadio), {\n                          class: \"radiobutton__radio\",\n                          slot: \"end\",\n                          value: _unref(EntitiesEnum).Facilities\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(IonItem), { class: \"radiobutton\" }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\" Display trainers \"),\n                        _createVNode(_unref(IonRadio), {\n                          class: \"radiobutton__radio\",\n                          slot: \"end\",\n                          value: _unref(EntitiesEnum).Trainers\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    })\n                  ])\n                ]),\n                _: 1\n              }, 8, [\"value\"])\n            ]))\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./Preferences.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Preferences.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Preferences.vue?vue&type=style&index=0&id=700d29ad&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-700d29ad\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","key","_hoisted_3","_hoisted_4","_defineComponent","__name","setup","__props","selectedItem","ref","router","useRouter","id","useId","onResult","refetch","loading","useQuery","MeDocument","fetchPolicy","data","value","me","settings","find","setting","code","SettingsCodeEnum","DisplayPreference","mutate","useMutation","UpdateUserDocument","showToast","async","msg","icon","toast","toastController","create","message","duration","cssClass","present","onChange","ev","target","input","then","catch","onBack","go","_ctx","_cache","_openBlock","_createBlock","BaseLayout","header","_withCtx","_createVNode","PageHeader","title","content","_createElementVNode","_unref","IonSpinner","_createElementBlock","IonRadioGroup","onIonChange","$event","default","IonItem","_createTextVNode","IonRadio","slot","EntitiesEnum","Facilities","_","Trainers","__exports__"],"sourceRoot":""}