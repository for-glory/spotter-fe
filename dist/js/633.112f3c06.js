"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[633],{24509:function(e,t,a){a.d(t,{s:function(){return n}});var s=a(2262);const n=()=>{const e=(0,s.iH)(!1),t=()=>{e.value=!1},a=()=>{e.value=!0};return{showConfirmationModal:e,hideModal:t,showModal:a}}},48333:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(66252),n=a(2262),l=a(3577),o=a(31810),d=(0,s.aZ)({__name:"PaymentMethod",props:{id:{},icon:{},title:{}},setup(e){return(e,t)=>((0,s.wg)(),(0,s.j4)((0,n.SU)(o.YG),{id:`${e.icon}`,class:(0,l.C_)(["payment-method__btn",{"payment-method__btn--google-pay":"googlePay"===e.id}])},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.gu),{class:"payment-method__icon",src:`assets/icon/payment/${e.icon}.svg`},null,8,["src"]),(0,s.Wm)((0,n.SU)(o.yW),{class:"payment-method__title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.title),1)])),_:1})])),_:1},8,["id","class"]))}}),i=a(83744);const c=(0,i.Z)(d,[["__scopeId","data-v-a422b7f8"]]);var r=c},73226:function(e,t,a){a.d(t,{Z:function(){return v}});var s=a(66252),n=a(2262),l=a(3577),o=a(31810);const d={class:"wrapper"},i={class:"ion-padding-horizontal"},c={class:"modal__title"},r={class:"modal__content"},u={class:"modal__footer"};var _=(0,s.aZ)({__name:"Confirmation",props:{title:{},description:{},buttonText:{},isVisible:{type:Boolean},cancelButtonText:{default:"Cancel"}},emits:["decline","discard"],setup(e,{emit:t}){const a=()=>{t("decline",!1)},_=()=>{t("discard",!0)};return(e,t)=>((0,s.wg)(),(0,s.j4)((0,n.SU)(o.ki),{ref:"modal","is-open":e.isVisible,"backdrop-dismiss":!1},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s.Wm)((0,n.SU)(o.gu),{src:"assets/icon/close.svg",onClick:a,class:"close-btn"}),(0,s.Wm)((0,n.SU)(o.Xz),{class:"modal__img",src:"assets/dumbbells.png"}),(0,s._)("div",i,[(0,s._)("strong",c,(0,l.zw)(e.title),1),(0,s._)("div",r,[(0,s.Wm)((0,n.SU)(o.yW),{color:"secondary",class:"modal__text"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.description),1)])),_:1})]),(0,s._)("div",u,[(0,s.Wm)((0,n.SU)(o.YG),{onClick:a,class:"modal__button"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.cancelButtonText),1)])),_:1}),(0,s.Wm)((0,n.SU)(o.YG),{onClick:_,class:"modal__button secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.buttonText),1)])),_:1})])])])])),_:1},8,["is-open"]))}}),m=a(83744);const p=(0,m.Z)(_,[["__scopeId","data-v-d596bdc6"]]);var v=p},44707:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var s=a(66252),n=a(2262),l=a(3577),o=a(10121),d=a(19239),i=a(31810),c=a(48333),r=a(85638),u=a(73050),_=a(22201),m=a(68889),p=a(41419),v=a(24509),w=a(73226),f=a(87794),h=a(49316);const b={class:"cards"},y={key:0,class:"cards__container"},k={key:0,class:"separator"},g={key:1,class:"payment__methods"};var U=(0,s.aZ)({__name:"PaymentMethods",setup(e){const t=(0,_.tv)(),a=(0,n.iH)(""),U=(0,n.iH)(!1),S=(0,n.iH)([]),C=(0,n.iH)(""),W=(0,n.iH)(null),P=new m.R({NODE_ENV:"production",VUE_APP_API_URL:"https://api.spotterfitness.com/graphql",VUE_APP_GOOGLE_AUTH_CLIENT_ID:"",BASE_URL:"/"}.VUE_APP_STRIPE_PUBLIC_KEY||"");(0,s.Ah)((()=>{clearInterval(W.value)})),(0,s.bv)((()=>{Z(),P.init(),W.value=setInterval((()=>{Z()}),5e3)}));const{onResult:D,refetch:Z}=(0,h.aM)(f.Wd,{fetchPolicy:"no-cache"}),{mutate:E}=P.changePaymentMethod(),{mutate:I}=(0,h.Db)(f.t8);D((({data:e})=>{e?.cards?.data&&(S.value=e.cards.data)}));const x=()=>{I({card_id:C.value}).then((()=>{Z()})),z()},{showConfirmationModal:M,showModal:H,hideModal:z}=(0,v.s)(),T=async()=>{const{onResult:e}=P.createSetupIntent();e((e=>{let t=JSON.parse(e?.data?.setupIntent?.session);P.redirectToCardSaving(t.id,t.url)}))},Y=e=>{E({card_id:e}).then((()=>{Z()})).catch((e=>{throw a.value=e,new Error(e)}))},A=()=>{U.value=!U.value},G=()=>{t.go(-1)},B=e=>{U.value&&(C.value=e,H())};return(e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o.Z,{"hide-navigation-menu":""},{header:(0,s.w5)((()=>[(0,s.Wm)(d.Z,{"back-btn":"",onBack:G,title:"Payment methods"},{"custom-btn":(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(i.YG),{fill:"clear",class:"edit-btn",onClick:A},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(U.value?"Done":"Edit"),1)])),_:1})])),_:1})])),content:(0,s.w5)((()=>[(0,s._)("div",b,[S.value.length?((0,s.wg)(),(0,s.iD)("div",y,[(0,s.Wm)(u.Z,{"show-start":"",items:S.value,"slides-offset-after":16,"slides-offset-before":16},{start:(0,s.w5)((()=>[U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,n.SU)(i.YG),{key:0,onClick:T,class:"add-card"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(i.gu),{src:"assets/icon/payment/plus.svg",class:"add-icon"})])),_:1}))])),default:(0,s.w5)((e=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(r.Z,{deletable:U.value,key:e.id,"card-holder":e.card_holder,"card-number":e.pm_last_four,"exp-date":e.exp_month+"/"+e.exp_year,"is-default":e.is_default,class:"card-slide",onDelete:t=>B(e.id),onClick:t=>Y(e.id)},null,8,["deletable","card-holder","card-number","exp-date","is-default","onDelete","onClick"])))),128))])),_:1},8,["items"])])):((0,s.wg)(),(0,s.j4)(p.Z,{key:1,class:"add-card-btn",onClick:T}))]),U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)((0,n.SU)(i.yW),{class:"optional"},{default:(0,s.w5)((()=>[(0,s.Uk)("or other payment methods")])),_:1})])),U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(c.Z,{icon:"paypal",title:"PayPal"})]))])),_:1}),(0,s.Wm)(w.Z,{"is-visible":(0,n.SU)(M),title:"Do you want to delete this card?",description:"Card will be permanently deleted","button-text":"Delete card",onDiscard:x,onDecline:(0,n.SU)(z)},null,8,["is-visible","onDecline"])],64))}}),S=a(83744);const C=(0,S.Z)(U,[["__scopeId","data-v-92bb910c"]]);var W=C}}]);
//# sourceMappingURL=633.112f3c06.js.map