"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[8723],{40411:function(t,a,e){e.d(a,{b:function(){return l}});var n=e(29895);const l=(0,n.fo)("Geolocation",{web:()=>e.e(6642).then(e.bind(e,56642)).then((t=>new t.GeolocationWeb))})},48218:function(t,a,e){e.d(a,{E:function(){return i},T:function(){return l}});var n=e(61081);const l=[{name:n.N.ActivitiesNearby,label:"Nearby"},{name:n.N.MyTraining,label:"Events"}],i=[{name:n.N.Trainings,label:"Trainings"},{name:n.N.Events,label:"Events"}]},14602:function(t,a,e){e.d(a,{J:function(){return n}});const n=(t,a)=>{const e=3958.8,n=l(a.lat-t.lat),i=l(a.lng-t.lng),s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(l(t.lat))*Math.cos(l(a.lat))*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return e*o},l=t=>t*(Math.PI/180)},82544:function(t,a,e){e.d(a,{Z:function(){return v}});var n=e(66252),l=e(2262),i=e(3577),s=e(31810);const o={class:"empty-block"},c={class:"empty-block__img"};var r=(0,n.aZ)({__name:"EmptyBlock",props:{title:{},text:{},buttonText:{},hideButton:{type:Boolean},icon:{default:"assets/icon/shore-run.svg"}},emits:["buttonClick"],setup(t,{emit:a}){return(t,e)=>((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",null,[(0,n._)("div",c,[(0,n.Wm)((0,l.SU)(s.gu),{src:t.icon},null,8,["src"])]),(0,n.Wm)((0,l.SU)(s.wd),{class:"empty-block__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.title),1)])),_:1}),(0,n.Wm)((0,l.SU)(s.yW),{color:"medium",class:"empty-block__text"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.text),1)])),_:1}),t.hideButton?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,l.SU)(s.YG),{key:0,class:"button",expand:"block",color:"primary",onClick:e[0]||(e[0]=t=>a("buttonClick"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.buttonText),1)])),_:1}))])]))}}),u=e(83744);const d=(0,u.Z)(r,[["__scopeId","data-v-776b8fd0"]]);var v=d},54354:function(t,a,e){e.d(a,{Z:function(){return u}});var n=e(66252),l=e(2262),i=e(3577),s=e(31810),o=(0,n.aZ)({__name:"PageTabs",props:{tabs:{},value:{}},emits:["change"],setup(t,{emit:a}){const e=t=>{t.detail.value&&a("change",t.detail.value)};return(t,a)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,l.SU)(s.cJ),{id:"page-tabs",mode:"ios",class:"tabs",onIonChange:a[0]||(a[0]=t=>e(t)),value:t.value||t.tabs&&t.tabs[0].name},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.tabs,(t=>((0,n.wg)(),(0,n.j4)((0,l.SU)(s.GO),{key:t.name,value:t.name,class:"tabs__item",disabled:t.disabled},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.label),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"])]))}}),c=e(83744);const r=(0,c.Z)(o,[["__scopeId","data-v-6ea469ae"]]);var u=r},97010:function(t,a,e){e.d(a,{Z:function(){return h}});var n=e(66252),l=e(2262),i=e(3577),s=e(31810),o=e(64193),c=e(35294);const r={class:"activity-item__photo"},u={class:"activity-item__inner"},d={class:"activity-item__head"};var v=(0,n.aZ)({__name:"Activity",props:{activity:{}},setup(t){return(t,a)=>((0,n.wg)(),(0,n.j4)((0,l.SU)(s.Ie),{class:"activity-item"},{default:(0,n.w5)((()=>[(0,n._)("div",r,[t.activity.photo?.length?((0,n.wg)(),(0,n.j4)((0,l.SU)(s.Xz),{key:0,src:t.activity.photo},null,8,["src"])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)((0,i.zw)(t.activity.name?.charAt(0)),1)],64))]),(0,n._)("div",u,[(0,n._)("div",d,[(0,n.Wm)((0,l.SU)(s.Q$),{class:"activity-item__title"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.activity.name),1)])),_:1}),(0,n.Wm)(o.Z,{class:"activity-item__rating"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.activity.rating),1)])),_:1})]),t.activity.distance?((0,n.wg)(),(0,n.j4)(c.Z,{key:0,class:"activity-item__address"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(s.yW),{class:"activity-item__distance",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.activity.distance),1)])),_:1}),(0,n.Uk)(" far from you ")])),_:1})):(0,n.kq)("",!0)])])),_:1}))}}),g=e(83744);const m=(0,g.Z)(v,[["__scopeId","data-v-d2c419ce"]]);var h=m},69520:function(t,a,e){e.r(a),e.d(a,{default:function(){return k}});e(57658);var n=e(66252),l=e(2262),i=e(31810),s=e(10121),o=e(54354),c=e(62308),r=e(97010),u=e(61081),d=e(49316),v=e(87794),g=e(22201),m=e(48218),h=e(40411),_=e(14602),f=e(82544);const p={class:"holder-content ion-padding-horizontal"};var y=(0,n.aZ)({__name:"TrainersNearby",setup(t){const a=(0,g.tv)(),e=m.T,y=(0,l.iH)(!1),w=(0,l.iH)(1),b=(0,l.iH)(0),k=(0,l.iH)(""),U=(0,l.iH)({lat:0,lng:0}),S=t=>{a.push({name:t})},{onResult:Z}=(0,d.aM)(v.en,{},{fetchPolicy:"no-cache"});Z((async t=>{t.data.me.settings.find((t=>t.setting.code===v.Lm.UsePhoneLocation))?.value?(U.value=await W(),M()):(U.value={lat:t.data.me.address.lat,lng:t.data.me.address.lng},M())}));const W=async()=>new Promise(((t,a)=>{h.b.getCurrentPosition().then((a=>{t({lat:a.coords.latitude,lng:a.coords.longitude})})).catch((async()=>{const t=await i.Mn.create({message:"Failed to get your location. Check the permissions for the application.",duration:2e3,icon:"assets/icon/info.svg",cssClass:"warning-toast"});t.present(),await h.b.requestPermissions(),a()}))})),{load:I,refetch:x,onResult:C}=(0,d.td)(v.Sg,{first:6,page:w.value,role:v.g8.Trainer,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}},{fetchPolicy:"no-cache"}),M=()=>{I(v.Sg,{first:6,page:w.value,role:v.g8.Trainer,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}},{fetchPolicy:"no-cache"})},N=t=>{T.value&&T.value.length<b.value&&(w.value++,x({first:6,page:w.value,search:k.value?.length?k.value:void 0,near:{radius:10,lat:U.value.lat,lng:U.value.lng}})?.then((()=>{t.target.complete()})))};C((t=>{b.value=t.data.users?.paginatorInfo.total??0;const a=t.data?.users?.data.map((t=>({name:`${t.first_name} ${t.last_name}`,id:t.id,distance:`~${(0,_.J)({lat:t.address?.lat||0,lng:t.address?.lng||0},{lat:U.value.lat||0,lng:U.value.lng||0}).toFixed(1)}mi`,rating:String(t.score?.toFixed(1)),photo:t.avatarUrl??void 0})))??[];y.value&&T.value?.length&&T.value.findIndex((t=>a.length&&t.id===a[0].id))>-1||(y.value=!0,T.value=T.value&&null!==t.data.users?.paginatorInfo.firstItem&&1!==t.data.users?.paginatorInfo.firstItem?[...T.value,...a]:a)}));const T=(0,l.iH)(null),H=t=>{w.value=1,b.value=0,y.value=!1,k.value=t,M()},j=t=>{a.push({name:u.N.Trainer,params:{id:t}})},z=()=>{a.go(-1)};return(t,d)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s.Z,null,{header:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(i.Sm),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(i.oU),{class:"back-btn",icon:"assets/icon/arrow-back.svg",onClick:z})])),_:1}),(0,n.Wm)(c.Z,{"hide-results":"",onSearch:H})])),content:(0,n.w5)((()=>[(0,n._)("div",p,[y.value?T.value&&T.value.length?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Wm)((0,l.SU)(i.wd),{slot:"start",class:"title"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Trainers Nearby ")])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(T.value,(t=>((0,n.wg)(),(0,n.j4)(r.Z,{key:t.id,activity:t,onClick:a=>j(t.id)},null,8,["activity","onClick"])))),128)),T.value.length<b.value?((0,n.wg)(),(0,n.j4)((0,l.SU)(i.ju),{key:0,threshold:"100px",class:"infinite-scroll",onIonInfinite:N},{default:(0,n.w5)((()=>[(0,n.Wm)((0,l.SU)(i.MB),{"loading-spinner":"lines","loading-text":"Loading more..."})])),_:1})):(0,n.kq)("",!0)],64)):((0,n.wg)(),(0,n.j4)(f.Z,{key:2,title:"Empty here","button-text":"Explore more",text:"No trainers were found near you",onButtonClick:d[0]||(d[0]=t=>(0,l.SU)(a).push({name:(0,l.SU)(u.N).Facilities}))})):((0,n.wg)(),(0,n.j4)((0,l.SU)(i.PQ),{key:0,name:"lines",class:"spinner"}))])])),_:1}),(0,n.Wm)(o.Z,{tabs:(0,l.SU)(e),class:"page-tabs",value:(0,l.SU)(u.N).ActivitiesNearby,onChange:S},null,8,["tabs","value"])],64))}}),w=e(83744);const b=(0,w.Z)(y,[["__scopeId","data-v-b3950b78"]]);var k=b}}]);
//# sourceMappingURL=8723.0369e9c9.js.map