"use strict";(self["webpackChunkspotter"]=self["webpackChunkspotter"]||[]).push([[4207],{35294:function(e,a,t){t.d(a,{Z:function(){return u}});var s=t(66252),n=t(3577),l=t(2262),i=t(31810),r=(0,s.aZ)({__name:"AddressItem",props:{large:{type:Boolean,default:!1}},setup(e){return(e,a)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)([{"address--large":e.large},"address"])},[(0,s.Wm)((0,l.SU)(i.gu),{class:(0,n.C_)([{"address__icon--large":e.large},"address__icon"]),src:"assets/icon/location.svg"},null,8,["class"]),(0,s.WI)(e.$slots,"default")],2))}}),o=t(83744);const d=(0,o.Z)(r,[["__scopeId","data-v-1aaae496"]]);var u=d},82544:function(e,a,t){t.d(a,{Z:function(){return m}});var s=t(66252),n=t(2262),l=t(3577),i=t(31810);const r={class:"empty-block"},o={class:"empty-block__img"};var d=(0,s.aZ)({__name:"EmptyBlock",props:{title:{},text:{},buttonText:{},hideButton:{type:Boolean},icon:{default:"assets/icon/shore-run.svg"}},emits:["buttonClick"],setup(e,{emit:a}){return(e,t)=>((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",null,[(0,s._)("div",o,[(0,s.Wm)((0,n.SU)(i.gu),{src:e.icon},null,8,["src"])]),(0,s.Wm)((0,n.SU)(i.wd),{class:"empty-block__title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.title),1)])),_:1}),(0,s.Wm)((0,n.SU)(i.yW),{color:"medium",class:"empty-block__text"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.text),1)])),_:1}),e.hideButton?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,n.SU)(i.YG),{key:0,class:"button",expand:"block",color:"primary",onClick:t[0]||(t[0]=e=>a("buttonClick"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.buttonText),1)])),_:1}))])]))}}),u=t(83744);const c=(0,u.Z)(d,[["__scopeId","data-v-776b8fd0"]]);var m=c},27893:function(e,a,t){t.d(a,{Z:function(){return f}});var s=t(66252),n=t(2262),l=t(3577),i=t(31810),r=t(35294),o=t(27484),d=t.n(o);const u=["src"],c={class:"event__holder"},m={key:0,class:"event__time"};var v=(0,s.aZ)({__name:"EventItem",props:{item:{},rounded:{type:Boolean,default:!1},dateRange:{type:Boolean},hideTime:{type:Boolean}},setup(e){const a=e,t=(0,s.Fl)((()=>d()(a.item.start_date).format(a.dateRange&&d()(a.item.start_date).year()!==d()(a.item.end_date).year()?"D MMM YYYY":"D MMMM"))),o=(0,s.Fl)((()=>d()(a.item.end_date).format(a.dateRange&&d()(a.item.start_date).year()!==d()(a.item.end_date).year()?"D MMM YYYY":"D MMMM"))),v=(0,s.Fl)((()=>d()(a.item.start_date).format("hh:mm A")));return(e,a)=>((0,s.wg)(),(0,s.j4)((0,n.SU)(i.Ie),{lines:"none",class:(0,l.C_)(["event",{"event--time-hidden":e.hideTime}])},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(i.Bs),{class:(0,l.C_)([{"event__photo--rounded":e.rounded},"event__photo"])},{default:(0,s.w5)((()=>[e.item?.media?.length&&e.item.media[0]?.pathUrl?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.item.media[0].pathUrl,class:"event__img"},null,8,u)):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Uk)((0,l.zw)(e.item.title?.charAt(0)),1)],64))])),_:1},8,["class"]),(0,s._)("div",c,[(0,s.Wm)((0,n.SU)(i.Q$),{class:"event__title"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.item.title),1)])),_:1}),e.dateRange||e.hideTime?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)((0,n.SU)(i.gu),{src:"assets/icon/time.svg",class:"time-icon"}),(0,s.Uk)(" "+(0,l.zw)(v.value),1)])),e.hideTime?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)((0,n.SU)(i.yW),{key:1,class:"event__date"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.value)+" ",1),e.dateRange?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)("- "+(0,l.zw)(o.value),1)],64)):(0,s.kq)("",!0)])),_:1})),e.item.address?.street?((0,s.wg)(),(0,s.j4)(r.Z,{key:2,class:"event__address"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.item.address?.street),1)])),_:1})):(0,s.kq)("",!0)])])),_:1},8,["class"]))}}),g=t(83744);const _=(0,g.Z)(v,[["__scopeId","data-v-39053960"]]);var f=_},54354:function(e,a,t){t.d(a,{Z:function(){return u}});var s=t(66252),n=t(2262),l=t(3577),i=t(31810),r=(0,s.aZ)({__name:"PageTabs",props:{tabs:{},value:{}},emits:["change"],setup(e,{emit:a}){const t=e=>{e.detail.value&&a("change",e.detail.value)};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)((0,n.SU)(i.cJ),{id:"page-tabs",mode:"ios",class:"tabs",onIonChange:a[0]||(a[0]=e=>t(e)),value:e.value||e.tabs&&e.tabs[0].name},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tabs,(e=>((0,s.wg)(),(0,s.j4)((0,n.SU)(i.GO),{key:e.name,value:e.name,class:"tabs__item",disabled:e.disabled},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.label),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value"])]))}}),o=t(83744);const d=(0,o.Z)(r,[["__scopeId","data-v-6ea469ae"]]);var u=d},24207:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});t(57658);var s=t(66252),n=t(2262),l=t(10121),i=t(19239),r=t(54354),o=t(61081),d=t(27893),u=t(49316),c=t(87794),m=t(22201),v=t(31810),g=t(82544),_=t(27484),f=t.n(_);const y={class:"events__container"};var p=(0,s.aZ)({__name:"Events",setup(e){const a=(0,m.tv)(),t=[{name:o.N.Facilities,label:"Gyms"},{name:o.N.Trainings,label:"Trainings"},{name:o.N.Events,label:"Events"}],_=(0,n.iH)(1),{result:p,loading:h,refetch:k,onResult:w}=(0,u.aM)(c.jn,{page:_.value,first:6,orderBy:[{column:c.LP.StartDate,order:c.As.Asc}]},{fetchPolicy:"no-cache"}),{result:Y,loading:b,refetch:M,onResult:U}=(0,u.aM)(c.tM,{page:_.value,first:6,start_date:{from:f()().format("YYYY-MM-DD HH:mm:ss"),to:f()().add(1,"y").format("YYYY-MM-DD HH:mm:ss")},orderBy:[{column:c.Vy.StartDate,order:c.As.Asc}]},{fetchPolicy:"no-cache"}),{result:D,loading:S,refetch:H,onResult:I}=(0,u.aM)(c.VH,{page:_.value,first:6,start_date:{from:f()().format("YYYY-MM-DD HH:mm:ss"),to:f()().add(1,"M").format("YYYY-MM-DD HH:mm:ss")},orderBy:[{column:c.wL.StartDate,order:c.As.Asc}]},{fetchPolicy:"no-cache"}),N=(0,s.Fl)((()=>p?.value?.myFacilityItemPasses?.paginatorInfo?.total??0)),T=(0,s.Fl)((()=>Y?.value?.trainerTrainings?.paginatorInfo?.total??0)),B=(0,s.Fl)((()=>D?.value?.events?.paginatorInfo?.total??0)),Z=(0,n.iH)(),F=(0,n.iH)(),A=(0,n.iH)();w((e=>{const a=e.data?.myFacilityItemPasses?.data?.map((e=>({id:e.id,title:e.facilityItem.facility.name,end_date:e.end_date,start_date:f()(e.end_date).subtract(e.facilityItem.qr_code_lifetime_value??0,"d").format("YYYY-MM-DD HH:mm:ss"),media:e.facilityItem.facility.media,address:e.facilityItem.facility.address})))??[];Z.value?.length?-1===Z.value.findIndex((e=>e.id===a[0].id))&&(Z.value=[...Z.value,...a]):Z.value=a})),U((e=>{const a=e.data?.myTrainings?.data?.map((e=>({...e,title:`${e.trainer.first_name} ${e.trainer.last_name}`,address:e.trainer.address,media:[{pathUrl:e.trainer.avatarUrl}]})))??[];F.value?.length?-1===F.value.findIndex((e=>e.id===a[0].id))&&(F.value=[...F.value,...a]):F.value=a})),I((e=>{const a=e?.data?.myEvents?.data??[];A.value?.length?-1===A.value.findIndex((e=>e.id===a[0].id))&&(A.value=[...A.value,...a]):A.value=a}));const C=(0,n.iH)(localStorage.getItem("dashboard_active_tab")||o.N.Facilities),W=(0,s.Fl)((()=>{switch(C.value){case o.N.Trainings:return F.value;case o.N.Events:return A.value;default:return Z.value}})),x=e=>{e&&(C.value=e,localStorage.setItem("dashboard_active_tab",C.value),_.value=1,Z.value=[],F.value=[],A.value=[],z())},E=()=>{a.go(-1)},j=e=>{switch(C.value){case o.N.Facilities:return a.push({name:o.N.BookedTraining,params:{id:e},query:{type:o.N.Facility}});case o.N.Trainings:return a.push({name:o.N.BookedTraining,params:{id:e},query:{type:o.N.Training}});case o.N.Events:return a.push({name:o.N.BookedTraining,params:{id:e},query:{type:o.N.Event}});default:break}},q=async e=>{(C.value===o.N.Trainings&&F.value&&F.value.length<T.value||C.value===o.N.Events&&A.value&&A.value.length<T.value)&&(_.value++,await z(),e.target.complete())},z=async()=>new Promise(((e,a)=>{switch(C.value){case o.N.Facilities:k({page:_.value,first:6,orderBy:[{column:c.LP.StartDate,order:c.As.Asc}]})?.then((()=>{e(!0)})).catch((e=>{console.log("err:",e),a()}));break;case o.N.Trainings:M({page:_.value,first:6,start_date:{from:f()().format("YYYY-MM-DD HH:mm:ss"),to:f()().add(1,"M").format("YYYY-MM-DD HH:mm:ss")},orderBy:[{column:c.Vy.StartDate,order:c.As.Asc}]})?.then((()=>{e(!0)})).catch((e=>{console.log("err:",e),a()}));break;case o.N.Events:H({page:_.value,first:6,start_date:{from:f()().format("YYYY-MM-DD HH:mm:ss"),to:f()().add(1,"M").format("YYYY-MM-DD HH:mm:ss")},orderBy:[{column:c.wL.StartDate,order:c.As.Asc}]})?.then((()=>{e(!0)})).catch((e=>{console.log("err:",e),a()}));break;default:break}})),P=(0,s.Fl)((()=>{switch(C.value){case o.N.Trainings:return"trainings";case o.N.Events:return"events";default:return"gyms"}}));return(e,a)=>((0,s.wg)(),(0,s.j4)(l.Z,null,{header:(0,s.w5)((()=>[(0,s.Wm)(i.Z,{title:"Upcoming Bookings","back-btn":"",onBack:E})])),content:(0,s.w5)((()=>[(0,s._)("div",y,[!W.value||!W.value.length||(0,n.SU)(b)||(0,n.SU)(S)||(0,n.SU)(h)?(0,n.SU)(b)||(0,n.SU)(S)||(0,n.SU)(h)?((0,s.wg)(),(0,s.j4)((0,n.SU)(v.PQ),{key:1,name:"lines",class:"spinner"})):((0,s.wg)(),(0,s.j4)(g.Z,{key:2,"hide-button":"",icon:"assets/icon/empty.svg",title:`Sorry, no ${P.value} found`,text:`Currently you have no booked ${P.value}`},null,8,["title","text"])):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(W.value,(e=>((0,s.wg)(),(0,s.j4)(d.Z,{key:e.id,item:e,rounded:C.value===(0,n.SU)(o.N).Trainings,onClick:a=>j(e.id)},null,8,["item","rounded","onClick"])))),128)),C.value===(0,n.SU)(o.N).Facilities&&Z.value&&Z.value?.length<N.value||C.value===(0,n.SU)(o.N).Trainings&&F.value&&F.value?.length<T.value||C.value===(0,n.SU)(o.N).Events&&A.value&&A.value?.length<B.value?((0,s.wg)(),(0,s.j4)((0,n.SU)(v.ju),{key:3,threshold:"100px",class:"infinite-scroll",onIonInfinite:q},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(v.MB),{"loading-spinner":"lines","loading-text":"Loading more data..."})])),_:1})):(0,s.kq)("",!0)]),(0,s.Wm)(r.Z,{tabs:t,class:"page-tabs",value:C.value,onChange:x},null,8,["value"])])),_:1}))}}),h=t(83744);const k=(0,h.Z)(p,[["__scopeId","data-v-3831d440"]]);var w=k}}]);
//# sourceMappingURL=4207.ffcf5930.js.map